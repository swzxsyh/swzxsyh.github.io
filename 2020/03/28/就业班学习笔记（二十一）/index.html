<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="反射 注解">
<meta property="og:type" content="article">
<meta property="og:title" content="就业班学习笔记（二十一）">
<meta property="og:url" content="http://yoursite.com/2020/03/28/%E5%B0%B1%E4%B8%9A%E7%8F%AD%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%E5%8D%81%E4%B8%80%EF%BC%89/index.html">
<meta property="og:site_name" content="Swzxsyh">
<meta property="og:description" content="反射 注解">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-03-28T00:58:03.000Z">
<meta property="article:modified_time" content="2020-03-29T16:06:03.300Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2020/03/28/%E5%B0%B1%E4%B8%9A%E7%8F%AD%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%E5%8D%81%E4%B8%80%EF%BC%89/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>就业班学习笔记（二十一） | Swzxsyh</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Swzxsyh</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">--学习笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/28/%E5%B0%B1%E4%B8%9A%E7%8F%AD%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%E5%8D%81%E4%B8%80%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="学习笔记">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Swzxsyh">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          就业班学习笔记（二十一）
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-03-28 08:58:03" itemprop="dateCreated datePublished" datetime="2020-03-28T08:58:03+08:00">2020-03-28</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-03-30 00:06:03" itemprop="dateModified" datetime="2020-03-30T00:06:03+08:00">2020-03-30</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <ul>
<li>反射</li>
<li>注解<a id="more"></a>

</li>
</ul>
<p>一.反射<br>1.1 类加载器</p>
<ul>
<li><strong>类的加载</strong><br>当程序要使用某个类时,如果该类还未被加载到内存中,则系统会通过类的加载,类的连接,类的初始化这三个步骤对类进行初始化。如果不出意外,JVM将会连续完成这三个步骤,使用有时也把这三个步骤统称为类加载或类初始化。</li>
</ul>
<p>类的加载：<br>•就是将class文件读入内存,并为之创建一个java.lang.Class对象(字节码文件对象,在Heap区)<br>•任何类被使用时,系统都会为之建立一个java.lang.Class对象<br>类的连接：<br>•验证阶段：用于检验被加载的类是否有正确的内部结构,并合其他类协调一致<br>•准备阶段：负责为类变量分配内存,并社长默认初始化值<br>•解析阶段：将类的二进制数据中的符合引用替换为直接引用<br>类的初始化：<br>•在该阶段,主要就是对类变量进行初始化</p>
<p>类的初始化时机：<br>•假如类还未被加载和连接,则程序先加载并连接该类<br>•假如该类的父类还未被初始化,则先初始化其直接父类<br>•假如类中有初始化语句,则系统依次执行这些初始化语句<br>注意：在执行第二个步骤时,系统对直接父类的初始化步骤也遵循初始化步骤1-3</p>
<ul>
<li><p>类的初始化时机<br>a.创建类的实例<br>b.调用类的静态变量,或为静态变量赋值<br>c.调用类的静态方法<br>d.初始化某个类的子类<br>e.直接使用java命令来运行某个主类<br>f.使用反射方式来强制创建某个类或接口对应的java.lang.Class对象</p>
</li>
<li><p>类加载器的作用和分类<br>类加载器将类加载到内存</p>
</li>
</ul>
<p>类加载器的作用：<br>•负责将.class文件加载到内存中,并为之生成对应的java.lang.Class对象</p>
<p>JVM类加载机制<br>•全盘负责：当一个类加载器负责加载某个Class时,该Clas所依赖的和引用的其他Class也将由该类加载器负责载入,除非显示使用另一个类加载器来载入<br>•父类委托：当一个类加载器负责加载某个Class时,先让父类加载器试图加载该Class,只有在父类加载器无法加载该类时才尝试从自己的类路径中加载该类<br>•缓存机制：保证所有加载过的Class都会被缓存,当程序需要使用某个Class对象时,类加载器先从缓存去中搜索该Class,只有当缓存区中不存在该Class对象时,系统才会读取该类对应的二进制数据,并将其转换成Class对象,存储到缓存区</p>
<p>类加载器有三种:<br>ClassLoader：是负责加载类的对象<br>•启动类加载器(Bootstrap ClassLoader):用于加载系统类库<JAVA_HOME>\bin目录下的class,例如: rt.jar。<br>•扩展类加载器(Extension ClassLoader):用于加载扩展类库<JAVA_HOME>\jre\lib\ext目录下的class。<br>•应用程序类加载器(Application ClassLoader):用于加载我们自定义类的加载器。</p>
<p>ClassLoader：中的两种方法<br>•static ClassLoader getSystemClassLoader();返回用于委派的系统类加载器<br>•ClassLoader getParent();返回父类加载器进行委派</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassLoaderDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        ClassLoader  classLoader = String<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span>;</span><br><span class="line">        System.out.println(classLoader);</span><br><span class="line"></span><br><span class="line">        ClassLoader classLoader1 = ClassLoaderDemo<span class="class">.<span class="keyword">class</span>.<span class="title">getClassLoader</span>()</span>;</span><br><span class="line">        System.out.println(classLoader1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>双亲委派机制<br>当某个类加载器需要加载一个类时,它并不是直接加载,而是把加载需求交给父级类加载器,最终请求会到达启动类加载器,启动类加载器会判断是否可以加载该类,如果加载不了,在交给扩展类加载器,扩展类加载器判断是否可以加载,如果加载不了,再交给程序类加载器</li>
</ul>
<p>双亲委派机制主要作用:就是让一个类只会被加载一次,确保一个类在内存中只有它一个。</p>
<p>1.2 什么是反射<br>是指在运行时去获取一个类的变量和方法信息。然后通过获取到的信息(字节码文件对象)来创建对象，调用方法的一种机制。由于这种方法的动态性，可以 极大增强程序的灵活性，程序不需要在编译时期将完成确定，在运行期仍能完成扩展</p>
<p>1.3 反射在实际开发中的应用<br>•开发IDE<br>•框架的设计与底层原理的学习</p>
<p>1.4 反射中万物皆对象的概念<br>一个类变异之后的字节码文件Class对象<br>Class对象中的成员变量:Field对象<br>Class对象中的成员方法:Method对象<br>Class对象中的构造方法:Constructor对象<br>创建对象–&gt;newInstance对象<br>调用/执行–&gt;invoke对象</p>
<p>反射语法与正常语法是反过来的,例如:<br>创建对象:<br>正常语法:new 构造方法(参数);<br>反射语法:构造方法对象.new Instance(参数);</p>
<p>调用方法:<br>正常语法:对象名.成员方法名(参数);<br>反射语法:成员方法对象.invoke(对象名,参数);</p>
<p>1.5 反射的第一步获取字节码文件对象(Class对象)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetClassDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ClassNotFoundException </span>&#123;</span><br><span class="line">        <span class="comment">//获取一个类Class对象的三种方式</span></span><br><span class="line">        <span class="comment">//1.通过类的一个静态成员 class</span></span><br><span class="line">        Class clazz1 = Dog<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        System.out.println(clazz1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.通过该类的一个对象,获取该类的Clazz对象</span></span><br><span class="line">        Dog dd = <span class="keyword">new</span> Dog();</span><br><span class="line">        Class clazz2 = dd.getClass();</span><br><span class="line">        System.out.println(clazz2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过反射强制加载该类,并获取该类的Class对象</span></span><br><span class="line">        Class clazz3 = Class.forName(<span class="string">"com.itheima.Demo02_GetClass.Dog"</span>);</span><br><span class="line">        System.out.println(clazz3);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*以上是三种获取Dog类Class对象的方式,并不是获取三个Class对象,实际上它们获取的是同一个Class对象*/</span></span><br><span class="line">        System.out.println(clazz1 == clazz2);</span><br><span class="line">        System.out.println(clazz2 == clazz3);</span><br><span class="line">        System.out.println(clazz1 == clazz3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1.6 Class对象中的三个常用方法<br>public String getName();//获取全限定类名<br>public String getSimple();//获取类名<br>public Object getInstance();//创建Class对象所代表的那个类的对象,底层实际上使用的是该类的无参构造</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ClassMethodDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IllegalAccessException, InstantiationException </span>&#123;</span><br><span class="line">        Class clazz = Dog<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取全限定类名</span></span><br><span class="line">        String name = clazz.getName();</span><br><span class="line">        System.out.println(name);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取类名</span></span><br><span class="line">        String simpleName = clazz.getSimpleName();</span><br><span class="line">        System.out.println(simpleName);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//创建Class对象所代表的那个类的对象,底层实际上使用的是Dog的无参构造</span></span><br><span class="line">        Dog dog = (Dog) clazz.newInstance();</span><br><span class="line">        System.out.println(dog);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>输出:<br>com.itheima.Demo03_ClassMethod.Dog<br>Dog<br>Dog{name=’null’, legs=0}</p>
<p>1.7 通过反射获取构造方法 &amp;&amp; 使用构造方法创建对象</p>
<ul>
<li>反射获取构造方法</li>
</ul>
<p><strong>Constructor getConstructor(Class… parameterTypes); //获取单个pulic构造</strong><br><strong>Constructor getDeclaredConstructor(Class… parameterTypes); //获取单个”任意”修饰符构造</strong><br>Constructor[] getConstructors(); //获得类中的所有构造方法对象,获得public修饰符构造(返回数组)<br>Constructor[] getDeclaredConstructors();//获得类中的所有修饰符构造方法对象(返回数组)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetConstructorDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> NoSuchMethodException </span>&#123;</span><br><span class="line"></span><br><span class="line">        Class clazz = Dog<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        System.out.println(clazz);</span><br><span class="line"></span><br><span class="line">        Constructor con1 = clazz.getConstructor();</span><br><span class="line">        System.out.println(con1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取单个pulic构造</span></span><br><span class="line"><span class="comment">//        Constructor con2 = clazz.getConstructor(String.class, int.class);</span></span><br><span class="line"><span class="comment">//        System.out.println(con2);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取单个"任意"修饰符构造</span></span><br><span class="line">        Constructor deccon = clazz.getDeclaredConstructor(String<span class="class">.<span class="keyword">class</span>, <span class="title">int</span>.<span class="title">class</span>)</span>;</span><br><span class="line">        System.out.println(deccon);</span><br><span class="line"></span><br><span class="line">        Constructor[] cons = clazz.getConstructors();</span><br><span class="line">        System.out.println(cons.length);</span><br><span class="line">        <span class="keyword">for</span> (Constructor con : cons) &#123;</span><br><span class="line">            System.out.println(con);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Constructor[] deccons = clazz.getDeclaredConstructors();</span><br><span class="line">        System.out.println(deccons.length);</span><br><span class="line">        <span class="keyword">for</span> (Constructor con : deccons) &#123;</span><br><span class="line">            System.out.println(con);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用构造方法创建对象<br>语法:<br>构造方法对象.newInstance(参数);</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    Class clazz = Dog<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">    System.out.println(clazz);</span><br><span class="line"></span><br><span class="line">    Constructor con1 = clazz.getConstructor();</span><br><span class="line">    System.out.println(con1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用构造创建对象</span></span><br><span class="line">    Dog dog = (Dog) con1.newInstance();</span><br><span class="line">    System.out.println(dog);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果是私有构造怎么办<br>私有构造必须设置暴力权限,然后才能正常使用,否则会抛出IllegalAccessException异常</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    Class clazz = Dog<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">    System.out.println(clazz);</span><br><span class="line"></span><br><span class="line">    Constructor con1 = clazz.getConstructor();</span><br><span class="line">    System.out.println(con1);</span><br><span class="line"></span><br><span class="line">    Constructor con2 = clazz.getDeclaredConstructor(String<span class="class">.<span class="keyword">class</span>,<span class="title">int</span>.<span class="title">class</span>)</span>;</span><br><span class="line">    System.out.println(con2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//使用构造创建对象</span></span><br><span class="line">    Dog dog = (Dog) con1.newInstance();</span><br><span class="line">    System.out.println(dog);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//私有构造,不能直接使用,因为没有权限</span></span><br><span class="line">    <span class="comment">//设置暴力访问权限</span></span><br><span class="line">    con2.setAccessible(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">    Dog dog2 = (Dog) con2.newInstance(<span class="string">"a"</span>, <span class="number">1</span>);</span><br><span class="line">    System.out.println(dog2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.8 通过反射获取成员方法 &amp;&amp; 调用成员方法</p>
<ul>
<li>反射获取成员方法<br>public Method get Method(String name,Class…args);//获取public方法<br>public Method get getDeclaredMethod(String name,Class…args);//获取 任意修饰 方法<br>public Method[] get Methods();//获取所有的public成员,包括父类继承的<br>public Method[] get getDeclaredMethods();//获取所有任意修饰方法,不包含父类继承的</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetConstructorDemo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class clazz = Dog<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取单个public成员方法</span></span><br><span class="line">        Method eat = clazz.getMethod(<span class="string">"eat"</span>);</span><br><span class="line">        System.out.println(eat);</span><br><span class="line"></span><br><span class="line">        Method eat1 = clazz.getMethod(<span class="string">"eat"</span>, String<span class="class">.<span class="keyword">class</span>, <span class="title">String</span>.<span class="title">class</span>)</span>;</span><br><span class="line">        System.out.println(eat1);</span><br><span class="line"></span><br><span class="line">        Method eat3 = clazz.getDeclaredMethod(<span class="string">"eat"</span>, String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        System.out.println(eat3);</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取所有的 public 成员方法,包含父类</span></span><br><span class="line">        Method[] methods = clazz.getMethods();</span><br><span class="line">        System.out.println(methods.length);</span><br><span class="line">        <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">            System.out.println(method);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取所有的 任意修饰 成员方法,但是不包含父类</span></span><br><span class="line">        Method[] decmethods = clazz.getDeclaredMethods();</span><br><span class="line">        System.out.println(decmethods.length);</span><br><span class="line">        <span class="keyword">for</span> (Method method : decmethods) &#123;</span><br><span class="line">            System.out.println(method);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>调用成员方法<br>语法格式:<br>成员方法对象.invoke(对象名,参数);</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GetConstructorDemo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Dog dd = <span class="keyword">new</span> Dog();</span><br><span class="line">        Class clazz = dd.getClass();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取单个public成员方法</span></span><br><span class="line">        Method eat = clazz.getMethod(<span class="string">"eat"</span>);</span><br><span class="line">        System.out.println(eat);</span><br><span class="line"></span><br><span class="line">        Method eat1 = clazz.getMethod(<span class="string">"eat"</span>, String<span class="class">.<span class="keyword">class</span>, <span class="title">String</span>.<span class="title">class</span>)</span>;</span><br><span class="line">        System.out.println(eat1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用成员方法</span></span><br><span class="line">        eat.invoke(dd);</span><br><span class="line"></span><br><span class="line">        eat1.invoke(dd,<span class="string">" a"</span>,<span class="string">" b"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>如果是私有成员方法怎么调用<br>私有成员方法必须设置暴力权限,然后才能正常使用,否则会抛出IllegalAccessException异常</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Dog dd = <span class="keyword">new</span> Dog();</span><br><span class="line">        Class clazz = dd.getClass();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//获取单个public成员方法</span></span><br><span class="line">        Method eat = clazz.geMethod(<span class="string">"eat"</span>);</span><br><span class="line">        System.out.println(eat);</span><br><span class="line"></span><br><span class="line">        Method eat1 = clazz.getMethod(<span class="string">"eat"</span>, String<span class="class">.<span class="keyword">class</span>, <span class="title">String</span>.<span class="title">class</span>)</span>;</span><br><span class="line">        System.out.println(eat1);</span><br><span class="line"></span><br><span class="line">        Method eat2 = clazz.getDeclaredMethod(<span class="string">"eat"</span>, String<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">        System.out.println(eat1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用成员方法</span></span><br><span class="line">        eat.invoke(dd);</span><br><span class="line"></span><br><span class="line">        eat1.invoke(dd,<span class="string">" a"</span>,<span class="string">" b"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置暴力访问权限,否则会抛出IllegalAccessException异常</span></span><br><span class="line">        eat2.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        eat2.invoke(dd,<span class="string">"a"</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>1.9 通过反射获取成员属性</p>
<p>二.注解<br>2.1 什么是注解<br>•注解是JDK1.5的新特性<br>•注解是一种标记,是类的组成部分,可以给类携带一些额外的信息<br>•标记(注解)可以用在各种地方(包,类,构造方法,普通方法,成员变量,局部变量…)<br>•注解主要是给编译器或JVM看的,用于完成某些特定功能</p>
<p>2.2 注解的三个作用<br>a.给程序带入一些参数<br>b.编译检查<br>c.给框架使用,作为框架的配置文件</p>
<p>2.3 常见的注解介绍<br>@author:用于标识作者<br>@version:用于标识对象的版本号<br>@Override:用于标识该方法是重写的<br>@deprecated:用于标识过期的API<br>@Test:用于单元测试的注解</p>
<p>2.4 自定义注解<br>自定义类:public class 类名<br>自定义接口:public interface 接口<br>自定义枚举:public enum 枚举名<br>自定义注解:public @interface 注解名</p>
<p>格式:<br>public @interface 注解名{</p>
<p>}</p>
<p>2.5 给自定义注解添加属性<br>格式:<br>public @interface 注解名{<br>    //注解内部只有属性,没有别的<br>    数据类型 属性名();<br>    数据类型 属性名()[default 默认值];<br>}</p>
<p>注解中并不是所有数据类型都可以的<br>只能是以下三大类型:<br>a.八大基本类型(byte,short,char,int,long,float,double,boolean)<br>b.引用类型(String,Class,注解类型,枚举类型)<br>c.以上12种具体类型的一维数组</p>
<p>2.6 自定义注解练习<br>创建时选中Annocation</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Book &#123;</span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">Price</span><span class="params">()</span> <span class="keyword">default</span> 100</span>;</span><br><span class="line"></span><br><span class="line">    String[] atuhors();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.7 使用注解时的注意事项<br>使用格式:<br>@注解名(属性名=属性值,属性名=属性值)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Book</span>(value = <span class="string">"A"</span>, Price = <span class="number">150.0</span>, authors =&#123;<span class="string">"a"</span>,<span class="string">"b"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Book</span>(value = <span class="string">"B"</span>, Price = <span class="number">160.0</span>, authors =&#123;<span class="string">"c"</span>,<span class="string">"d"</span>&#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestDemo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Book</span>(value = <span class="string">"C"</span>, Price = <span class="number">170.0</span>, authors =<span class="string">"e"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestDemo</span><span class="params">(<span class="keyword">int</span> age, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        String name = <span class="string">"a"</span>;</span><br><span class="line">        System.out.println(age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注意:<br>a.使用注解时的每个属性都必须有值(有默认值可以不再赋值,没有默认值的必须赋值)<br>b.如果是数组,需要使用{}把值包起来,如果数组的值只有一个,那么{}可以省略</p>
<p>2.8 <strong>自定义注解中的特殊属性名value</strong><br>a.如果注解中只有一个属性,并且名字叫做value,那么使用时可以直接写属性的值,省略属性名<br>b.如果注解中有value之外的其他属性,那么其他属性都有默认值,且使用注解时只给value赋值,那么也可以直接写属性的值,省略属性名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Book &#123;</span><br><span class="line">    <span class="comment">//特殊属性value</span></span><br><span class="line">    <span class="function">String <span class="title">value</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">double</span> <span class="title">Price</span><span class="params">()</span> <span class="keyword">default</span> 100.0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestDemo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Book</span>(<span class="string">"a"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestDemo</span><span class="params">(<span class="keyword">int</span> age, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        String name = <span class="string">"a"</span>;</span><br><span class="line">        System.out.println(age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.9 注解的注解–元注解<br>Java官方提供的注解,用来修饰或定义注解的注解</p>
<ul>
<li>两个元注解<br>@Target 元注解<br>作用:用来标识注解的使用位置,如果没有标识,那么注解在各种地方都可以使用<br>取值:<br>可以使用ElementType枚举类中的值,常用如下:<br>TYPE,类,接口<br>FIELD, 成员变量<br>METHOD, 成员方法<br>PARAMETER, 方法参数<br>CONSTRUCTOR, 构造方法<br>LOCAL_VARIABLE, 局部变量</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用元注解来修饰定义的注解</span></span><br><span class="line"><span class="meta">@Target</span>(ElementType.LOCAL_VARIABLE)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnno &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestDemo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TestDemo</span><span class="params">(<span class="keyword">int</span> age, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//使用定义的注解</span></span><br><span class="line">        <span class="meta">@MyAnno</span></span><br><span class="line">        String name = <span class="string">"a"</span>;</span><br><span class="line">        System.out.println(age);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>@Retention 元注解<br>作用:用来标识注解的声明周期(有效范围)<br>取值:<br>可以使用RetentionPolicy枚举类中的值,常用如下:</p>
<table>
<thead>
<tr>
<th>方法名</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>SOURCE</td>
<td>只作用在源码阶段,编译生成的字节码文件后消失</td>
</tr>
<tr>
<td>CLASS</td>
<td>在源码阶段、编程成字节码文件阶段存在,运行阶段不存在</td>
</tr>
<tr>
<td>RUNTIME</td>
<td>在源码阶段,字节码文件阶段,运行阶段都存在</td>
</tr>
</tbody></table>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.CLASS)</span><br><span class="line"><span class="meta">@Target</span>(ElementType.LOCAL_VARIABLE)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnno &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.10 注解的解析</p>
<ul>
<li><p>什么是注解解析<br>提供代码获取出来某个注解中的属性值</p>
</li>
<li><p>注解解析的步骤<br>a.获取注解所在类的Class对象<br>b.获取注解所在的对象(可能Field,Method,Constructor)<br>c.判断获取的对象中是否有该注解存在<br>d.如果有要的注解,取出注解即可<br>e.从注解中取出属性值即可</p>
</li>
</ul>
<p>与之相关的API:<br>Annotation:注解类,Java中所有定义的注解的父类<br>AnnotatedElement:该接口定义了与注解解析相关的方法<br>Field,Method,Constructor,Class等类都是实现了AnnotatedElement接口</p>
<p><strong>public boolean isAnnotationPresent(Class annotationClass);//判断是否存在某个注解</strong><br><strong>Annotion getAnnotation(Class annotationClass);//获取指定类型的注解</strong><br>Annotation[] getAnnotations();//获取所有注解,包含父类继承的<br>Annotation[] getDeclaredAnnotations()//获取所有注解,只包含本类的</p>
<ul>
<li>注解解析的代码实现<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Student &#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">Age</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">Name</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    String[] bys();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStudent</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Student</span>(Age = <span class="number">1</span>, Name = <span class="string">"a"</span>, bys = <span class="string">"c"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class clazz = TestStudent<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line">        Method showMethod = clazz.getMethod(<span class="string">"show"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (showMethod.isAnnotationPresent(Student<span class="class">.<span class="keyword">class</span>)) </span>&#123;</span><br><span class="line">            Student anno = showMethod.getAnnotation(Student<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">            <span class="keyword">int</span> age = anno.Age();</span><br><span class="line">            String name = anno.Name();</span><br><span class="line">            String[] bys = anno.bys();</span><br><span class="line"></span><br><span class="line">            System.out.println(age+<span class="string">" "</span>+name+<span class="string">" "</span>+bys.toString());</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"Y"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"N"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>2.11 注解解析案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyTest &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@MyTest</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"a"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@MyTest</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"b"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMyTest</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Class clazz = Demo<span class="class">.<span class="keyword">class</span></span>;</span><br><span class="line"></span><br><span class="line">        Method[] methods = clazz.getMethods();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Method method : methods) &#123;</span><br><span class="line">            <span class="keyword">if</span> (method.isAnnotationPresent(MyTest<span class="class">.<span class="keyword">class</span>)) </span>&#123;</span><br><span class="line">                method.invoke(<span class="keyword">new</span> Demo());</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">"N Annotation"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>总结:<br>反射技术获取Class字节码对象<br>Class clazz = 类名.class;<br>Class clazz = 对象名.getClass();<br>Class clazz = Class.forName(“包名”,”类名”);</p>
<p>通过反射技术怄气构造方法对象,并创建对象<br>获取构造:<br>public Constructor getConstructor(参数的类型.class,…)//获取单个 public 构造<br>public Constructor getDeclareConstructor(参数的类型.class,…)//获取单个 任意修饰 构造<br>public Constructor[] getConstructors()//获取所有个 public 构造<br>public Constructor[] getDeclareConstructors()//获取所有 任意修饰 构造<br>使用构造:<br>构造方法对象.newInstance(实际参数);<br>如果是私有构造:<br>必须在使用之前设置暴力权限-&gt;构造方法对象.getAccessable(true);</p>
<p>反射获取成员方法对象,并调用方法<br>public Method getMethod(String name,参数的类型.class,…)//获取单个 public 方法<br>public Method getDeclareMethod(String name,参数的类型.class,…)//获取单个 任意修饰 方法<br>public Method[] getMethods()//获取所有个 public 方法,包括父类继承的<br>public Method[] getDeclareMethods()//获取所有 任意修饰 方法,不包含父类的</p>
<p>使用方法:<br>成员方法对象.invoke(对象名,方法的实际参数);<br>如果是私有方法:<br>必须在使用之前设置暴力权限-&gt;成员方法对象.getAccessable(true);</p>
<p>通过反射获取属性对象,并能够给对象的属性赋值和取值</p>
<p>注解的作用:<br>a.给程序带入参数<br>b.编译检查<br>c.给框架做配置文件</p>
<p>自定义注解和使用注解:<br>自定义注解:<br>public @interface 注解名{<br>数据类型 属性名();<br>数据类型 属性名() default 默认值;<br>数据类型[] 属性名() default {默认值1,默认值2,…};</p>
<p>}<br>数据类型限定:<br>a.八大基本类型(byte,short,char,int,long,float,double,boolean)<br>b.引用类型(String,Class,注解类型,枚举类型)<br>c.以上12种具体类型的一维数组</p>
<p>特殊属性:<br>value<br>a.如果注解中只有一个属性,并且名字叫做value,那么使用时可以直接写属性的值,省略属性名<br>b.如果注解中有value之外的其他属性,那么其他属性都有默认值,且使用注解时只给value赋值,那么也可以直接写属性的值,省略属性名</p>
<p>元注解及其作用:<br>@Target<br>@Retension</p>
<p>解析注解并获取注解中的数据<br>写代码把某个注解上的那些属性值打印出来</p>
<ul>
<li>注解解析的步骤<br>a.获取注解所在类的Class对象<br>b.获取注解所在的对象(可能Field,Method,Constructor)<br>c.判断获取的对象中是否有该注解存在<br>d.如果有要的注解,取出注解即可<br>e.从注解中取出属性值即可</li>
</ul>

    </div>

    
    
    
        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/03/27/%E5%B0%B1%E4%B8%9A%E7%8F%AD%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%E5%8D%81%EF%BC%89/" rel="prev" title="就业班学习笔记(二十)">
      <i class="fa fa-chevron-left"></i> 就业班学习笔记(二十)
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/03/30/%E5%B0%B1%E4%B8%9A%E7%8F%AD%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%E5%8D%81%E4%BA%8C%EF%BC%89/" rel="next" title="就业班学习笔记（二十二）">
      就业班学习笔记（二十二） <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description">学习笔记</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">105</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>

<script src="/js/utils.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
