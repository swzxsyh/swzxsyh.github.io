<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"swzxsyh.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="swzxsyh">
<meta property="og:url" content="https://swzxsyh.github.io/page/14/index.html">
<meta property="og:site_name" content="swzxsyh">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="swzxsyh">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://swzxsyh.github.io/page/14/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>swzxsyh</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="swzxsyh" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">swzxsyh</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">--笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-rss">

    <a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/06/15/Maven-Git/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/06/15/Maven-Git/" class="post-title-link" itemprop="url">Maven & Git</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-06-15 01:50:37" itemprop="dateCreated datePublished" datetime="2020-06-15T01:50:37+08:00">2020-06-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.Maven<br>1.1 Maven基础回顾<br>目标</p>
<p>回顾Maven基础课程</p>
<p>学习路径</p>
<p>Maven好处<br>安装配置Maven<br>三种仓库<br>常见命令<br>坐标的书写规范<br>如何添加坐标<br>依赖范围<br>1.1.1 回顾<br>什么是Maven</p>
<p>Maven 是专门用于构建和管理Java相关项目的工具。</p>
<p>Maven好处</p>
<p>节省磁盘空间<br>可以一键构建<br>可以跨平台<br>应用在大型项目时可以提高开发效率（jar包管理，maven的工程分解，可分模块开发）<br>安装配置 maven</p>
<p>三种仓库</p>
<p>本地仓库，远程仓库（私服）, 公司内部中央仓库</p>
<p>常见的命令</p>
<p>Compile<br>Test<br>Package（jar，war）<br>Install（安装到本地仓库）<br>Deploy（部署到远程仓库（私服））<br>Clean（target下生成的文件）<br>坐标的书写规范</p>
<p>groupId 公司或组织域名的倒序<br>artifactId 项目名或模块名<br>version 版本号<br>如何添加坐标</p>
<p>在本地仓库中搜索<br>互联网上搜，推荐网址 <a target="_blank" rel="noopener" href="http://www.mvnrepository.com/">http://www.mvnrepository.com/</a><br>依赖范围</p>
<p><scope>属性：</scope></p>
<p>依赖范围	对于编译classpath有效	对于测试classpath有效	对于运行classpath有效	例子<br>Compile(默认)	Y	Y	Y	Spring-core<br>Test	-	Y	-	Junit<br>Provided	Y	Y	-	servlet-api<br>Runtime	-	Y	Y	JDBC驱动<br>System	Y	Y	-	本地的，Maven仓库之外的类库<br>1.1.2 小结<br>Maven好处<br>安装配置Maven（熟练）<br>三种仓库（本地仓库(阿里镜像)，中央仓库（远程仓库），私服（代理仓库））<br>常见命令（clean compile test package install deploy）<br>坐标的书写规范（groupId artifactId version）<br>如何添加坐标（<a target="_blank" rel="noopener" href="http://www.mvnrepository.com/%EF%BC%89">http://www.mvnrepository.com/）</a><br>依赖范围<br>私服的配置（settings.xml配置私服 工作中大概率要配置的）<br>1.2 Maven中jar包冲突问题<br>目标</p>
<p>使用maven依赖导入jar包，出现相同名称但版本不一致的jar包</p>
<p>学习路径</p>
<p>演示jar包冲突问题：遵循第一声明者优先原则<br>解决jar包冲突问题，路径近者优先<br>解决jar包冲突问题，直接排除法<br>首先创建一个Mavenjar包工程(New Project-Maven)</p>
<p>1.2.1 第一声明优先原则<br>哪个jar包在靠上的位置，这个jar包就是先声明的，先声明的jar包下的依赖包，可以优先引入项目中。</p>
<p>在pom.xml中引入如下坐标，分别是spring中不同的版本。</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br><?xml version="1.0" encoding="UTF-8"?><br><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"><br>  <modelVersion>4.0.0</modelVersion></project></p>
<p>  <groupId>com.test</groupId><br>  <artifactId>Maven_Advanced</artifactId><br>  <version>1.0-SNAPSHOT</version></p>
<p>  <packaging>jar</packaging></p>
  <!--导入相关依赖包-->
  <dependencies>
    <!--引入spring-context，它所以来的包都会导入进来-->
    <dependency>
      <groupId>org.springframework</groupId>
      <artifactId>spring-context</artifactId>
      <version>5.0.2.RELEASE</version>
    </dependency>

<pre><code>&lt;dependency&gt;
  &lt;groupId&gt;org.springframework&lt;/groupId&gt;
  &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;
  &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
  </dependencies>

在控制面板的maven面板，点击查看依赖关系按钮，看到了包和包之间的依赖关系存在冲突，都使用了spring-core包，关系图如下：



<p>看看他们依赖包的导入，发现导入的包却没有问题，包使用的都是5.0.2的版本。</p>
<p>我们把上面2个包的顺序调换后就变成了低版本的依赖导入。</p>
<p>1.2.2 路径近者优先原则<br>直接依赖：项目中直接导入的jar包就是项目的直接依赖包。<br>传递依赖（间接依赖）：项目中没有直接导入的jar包，可以通过中直接依赖包传递到项目中去。<br>直接依赖比传递依赖路径近，最终进入项目的jar包会是路径近的直接依赖包。<br>修改jar包，直接引入依赖spring-core</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21</p>
<!--导入相关依赖包-->
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>4.2.4.RELEASE</version>
    </dependency>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
    &lt;version&gt;5.0.2.RELEASE&lt;/version&gt;
&lt;/dependency&gt;

&lt;!--引入直接依赖--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;
    &lt;version&gt;4.2.8.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</dependencies>
此时优先引入的是直接依赖的引用



<p>1.2.3 直接排除法<br>问题：整合项目需要用到5的版本，引入4的版本，会不会出现异常（类没有找到，方法没有找到）<br>当我们需要排除某个jar包的依赖时，在配置exclusions标签的时候，内部可以不写版本号。pom.xml依赖如下：</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21</p>
<!--导入相关依赖包-->
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>4.2.4.RELEASE</version>
        <!--直接排除-->
        <exclusions>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-core</artifactId>
            </exclusion>
        </exclusions>
    </dependency>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
    &lt;version&gt;5.0.2.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</dependencies>
解决方案

<p>pom.xml添加exclusions</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br><exclusions><br>  <exclusion><br>    <artifactId>spring-core</artifactId><br>    <groupId>org.springframework</groupId><br>  </exclusion><br></exclusions><br>1.2.4 小结<br>出现1个项目存在多个同种jar包的时候，需要我们进行解决maven的jar包冲突问题（异常：Class not found、Method not found等）</p>
<p>路径近者<br>节点路径相同时，使用第一声明优先（xml上下顺序有关）<br>无法通过依赖管理原则排除的，使用直接排除法<br>1.3 工程分层<br>之前项目开发：</p>
<p>工程分层后的开发：所有的service和dao的代码都在一起，1：增强程序的通用性，2：降低了代码的耦合性</p>
<p>目标</p>
<p>实现项目工程分解，掌握聚合和继承的作用</p>
<p>学习路径</p>
<p>聚合和继承<br>准备数据库环境<br>ssm_parent（父工程） pom 引入依赖<br>ssm_model（子工程） 实体类<br>ssm_dao（子工程） 数据库操作<br>ssm_service（子工程） 完业务操作<br>ssm_web（子工程） 收集请求参数，调用业务，返回结果给前端<br>测试（工程发布tomcat）<br>1.3.1 聚合（多模块）和继承<br>继承和聚合结构图：</p>
<p>特点1（继承）</p>
<p>ssm_parent父工程：存放项目的所有jar包。</p>
<p>ssm_web和ssm_service和ssm_dao有选择的继承jar包，并在工程中使用。这样可以消除jar包重复，并锁定版本</p>
<p>特点2（聚合）</p>
<p>ssm_web依赖于ssm_service，ssm_service依赖于ssm_dao，启动ssm_web，便可访问程序。</p>
<p>执行安装的时候，执行ssm_parent，就可以将所有的子工程全部进行安装。</p>
<p>理解继承和聚合总结</p>
<p>通常继承和聚合同时使用。</p>
<p>何为继承</p>
<p>继承是为了消除重复，如果将 dao、 service、 web 分开创建独立的工程则每个工程的 pom.xml 文件中的内容存在重复，比如：设置编译版本、锁定 spring 的版本的等，可以将这些重复的 配置提取出来在父工程的 pom.xml 中定义。</p>
<p>何为聚合</p>
<p>项目开发通常是分组分模块开发， 每个模块开发完成要运行整个工程需要将每个模块聚合在 一起运行，比如： dao、 service、 web 三个工程最终会打一个独立的 war 运行。</p>
<p>1.3.2 准备数据库环境<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>SET FOREIGN_KEY_CHECKS&#x3D;0;</p>
<p>CREATE DATABASE Maven;<br>use Maven;<br>DROP TABLE IF EXISTS <code>items</code>;<br>CREATE TABLE <code>items</code> (<br>                         <code>id</code> int(10) NOT NULL auto_increment,<br>                         <code>name</code> varchar(20) default NULL,<br>                         <code>price</code> float(10,0) default NULL,<br>                         <code>pic</code> varchar(40) default NULL,<br>                         <code>createTime</code> datetime default NULL,<br>                         <code>detail</code> varchar(200) default NULL,<br>                         PRIMARY KEY  (<code>id</code>)<br>) ENGINE&#x3D;InnoDB AUTO_INCREMENT&#x3D;9 DEFAULT CHARSET&#x3D;utf8;</p>
<p>INSERT INTO <code>items</code> VALUES (‘1’, ‘Test01’, ‘1000’, null, ‘2018-03-13 09:29:30’, ‘带我走上人生巅峰’);<br>INSERT INTO <code>items</code> VALUES (‘2’, ‘Test02’, null, null, ‘2018-03-28 10:05:52’, ‘插入测试’);<br>INSERT INTO <code>items</code> VALUES (‘3’, ‘Test03’, ‘199’, null, ‘2018-03-07 10:08:04’, ‘插入测试’);<br>INSERT INTO <code>items</code> VALUES (‘7’, ‘Test04’, null, null, null, null);<br>INSERT INTO <code>items</code> VALUES (‘8’, ‘Test05’, null, null, null, null);<br>1.3.3 ssm_parent<br>创建ssm_parent的Maven Project<br>删除src文件夹<br>1.3.3.1 pom.xml<br>父工程：<packaging>pom</packaging></p>
<p>详细信息<br>小结</p>
<p><package>pom<br>管理所有的jar包（并锁定版本）<br>父工程不需要开发的代码，src的文件夹可以删除<br>1.3.4 ssm_model<br>选择ssm_parent&#x3D;&gt;New-&gt;Moudle-&gt;Maven-&gt;创建子项目ssm_model(即实体类)</package></p>
<p>1.3.4.1 pom.xml<br>查看子工程pom.xml</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br><?xml version="1.0" encoding="UTF-8"?><br><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"><br>    <parent><br>        <artifactId>ssm_parent</artifactId><br>        <groupId>com.test</groupId><br>        <version>1.0-SNAPSHOT</version><br>    </parent><br>    <modelVersion>4.0.0</modelVersion></project></p>
<pre><code>&lt;artifactId&gt;ssm_model&lt;/artifactId&gt;
&lt;packaging&gt;jar&lt;/packaging&gt;
</code></pre>

回去查看ssm_parent的pom.xml，自动聚合类ssm_model

<p>1<br>2<br>3<br><modules><br>  <module>ssm_model</module><br></modules><br>1.3.4.2 创建Items.java<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>public class Items {<br>    private Integer id;<br>    private String name;<br>    private Float price;<br>    private String pic;<br>    private Date createTime;<br>    private String detail;<br>&#x2F;&#x2F;此处省略getter&#x2F;setter，toString<br>}<br>小结<br><package>jar<br>管理项目中所有的实体类<br>1.3.5 ssm_dao<br>操作路径<br>配置pom.xml<br>创建spring-mybatis.xml（spring整合mybatis的配置）<br>创建ItemsDao.java<br>创建ItemsDao.xml<br>1.3.5.1 pom.xml<br>详细信息<br>查看父工程pom.xml</package></p>
<p>1<br>2<br>3<br>4<br><modules><br>  <module>ssm_model</module><br>  <module>ssm_dao</module><br></modules><br>1.3.5.2 创建spring-mybatis.xml<br>操作路径</p>
<p>设置数据库连接池<br>配置SqlSessionFactoryBean<br>添加Dao层接口扫描，让Dao被spring管理<br>spring-mybatis.xml</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br><?xml version="1.0" encoding="UTF-8"?><br><beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"><br>    <!--1.数据库连接池--><br>    <bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource"><br>        <property name="driverClassName" value="com.mysql.jdbc.Driver"><br>        <property name="url" value="jdbc:mysql://localhost:3306/Maven"><br>        <property name="username" value="root"><br>        <property name="password" value="root"><br>    </property></property></property></property></bean></beans></p>
<pre><code>&lt;!--2.配置sqlSessionFactoryBean--&gt;
&lt;bean id=&quot;sqlSessionFactory&quot; class=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&gt;
    &lt;!--配置数据源--&gt;
    &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;
    &lt;!--别名配置--&gt;
    &lt;property name=&quot;typeAliases&quot; value=&quot;com.test.domain&quot;/&gt;
&lt;/bean&gt;

&lt;!--3.dao接口扫描--&gt;
&lt;bean class=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&gt;
    &lt;property name=&quot;basePackage&quot; value=&quot;com.test.dao&quot;/&gt;
&lt;/bean&gt;
</code></pre>

1.3.5.3 创建ItemsDao.java
1
2
3
4
5
public interface ItemsDao {
    List<Items> findAll();

<pre><code>int save(Items items);
</code></pre>
<p>}<br>1.3.5.4 创建ItemsDao.xml<br>com&#x2F;test&#x2F;dao&#x2F;ItemsDao.xml</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br><?xml version="1.0" encoding="UTF-8" ?><br><!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"></p>
<!--
    namespace="Dao接口的全限定名"
-->
<mapper namespace="com.test.dao.ItemsDao">

  <!--保存操作-->
  <insert id="save" parametertype="com.test.domain.Items">
    INSERT  INTO items(name,price,pic,creaTetime,detail) VALUES(#{name},#{price},#{pic},#{createTime},#{detail})
  </insert>

  <!--查询所有-->
  <select id="findAll" resulttype="com.test.domain.Items">
    SELECT * FROM items
  </select>
</mapper>
1.3.5.5 dao测试
1
2
3
4
5
6
7
8
9
10
@Test
public  void testFindAll() {
  ClassPathXmlApplicationContext classPathXmlApplicationContext = new ClassPathXmlApplicationContext("classpath:spring-mybatis.xml");
  ItemsDao itemsDao = classPathXmlApplicationContext.getBean(ItemsDao.class);
  List<Items> all = itemsDao.findAll();

<p>  for (Items items : all) {<br>    System.out.println(items);<br>  }<br>}<br>小结<br><package>jar<br>引入依赖 ssm_model 、mybatis的依赖…<br>spring-mybatis.xml（spring的配置文件）（spring整合mybatis的框架）<br>数据源<br>工厂<br>包扫描(dao)<br>接口ItemsDao.java<br>创建映射文件ItemsDao.xml (映射文件路径与包名相同, resources目录下的)<br>1.3.6 ssm_service<br>操作路径<br>pom.xml<br>创建spring-service.xml（spring的声明式事务处理）<br>创建ItemsService接口<br>创建ItemsServiceImpl实现类<br>1.3.6.1 pom.xml<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br><?xml version="1.0" encoding="UTF-8"?><br><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"><br>    <parent><br>        <artifactId>ssm_parent</artifactId><br>        <groupId>com.test</groupId><br>        <version>1.0-SNAPSHOT</version><br>    </parent><br>    <modelVersion>4.0.0</modelVersion></project></package></p>
<pre><code>&lt;artifactId&gt;ssm_service&lt;/artifactId&gt;


&lt;!--jar包--&gt;
&lt;packaging&gt;jar&lt;/packaging&gt;

&lt;!--依赖--&gt;
&lt;dependencies&gt;
    &lt;!--依赖dao--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.test&lt;/groupId&gt;
        &lt;artifactId&gt;ssm_dao&lt;/artifactId&gt;
        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;!-- spring --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
        &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>

1.3.6.2 创建spring-service.xml
操作路径
创建一个事务管理器
配置事务的通知，及传播特性，对切入点方法的细化
AOP声明式事务配置（配置切入点，通知关联切入点）
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tx="http://www.springframework.org/schema/tx" xmlns:aop="http://www.springframework.org/schema/aop" xmlns:context="http://www.springframework.org/schema/context" xsi:schemalocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/tx
       http://www.springframework.org/schema/tx/spring-tx.xsd
       http://www.springframework.org/schema/aop
       http://www.springframework.org/schema/aop/spring-aop.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd">
    <!--1.创建一个事务管理器-->
    <bean id="txtManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <!--指定数据源-->
        <property name="dataSource" ref="dataSource">
    </property></bean>

<pre><code>&lt;!--2.方式一：声明式事务配置--&gt;
&lt;tx:advice id=&quot;txAdvice&quot; transaction-manager=&quot;txtManager&quot;&gt;
    &lt;!--配置传播特性属性--&gt;
    &lt;tx:attributes&gt;
        &lt;!--
            对应方法参与事务并且在事务下执行，事务隔离剂别使用默认隔离级别,发生异常需要事务回滚
        --&gt;
      &lt;tx:method name=&quot;add*&quot; isolation=&quot;DEFAULT&quot; propagation=&quot;REQUIRED&quot; rollback-for=&quot;java.lang.Exception&quot; /&gt;
      &lt;tx:method name=&quot;insert*&quot; isolation=&quot;DEFAULT&quot; propagation=&quot;REQUIRED&quot; rollback-for=&quot;java.lang.Exception&quot; /&gt;
      &lt;tx:method name=&quot;save*&quot; isolation=&quot;DEFAULT&quot; propagation=&quot;REQUIRED&quot; rollback-for=&quot;java.lang.Exception&quot; /&gt;
      &lt;tx:method name=&quot;delete*&quot; isolation=&quot;DEFAULT&quot; propagation=&quot;REQUIRED&quot; rollback-for=&quot;java.lang.Exception&quot; /&gt;
      &lt;tx:method name=&quot;update*&quot; isolation=&quot;DEFAULT&quot; propagation=&quot;REQUIRED&quot; rollback-for=&quot;java.lang.Exception&quot; /&gt;
      &lt;tx:method name=&quot;edit*&quot; isolation=&quot;DEFAULT&quot; propagation=&quot;REQUIRED&quot; rollback-for=&quot;java.lang.Exception&quot; /&gt;
        &lt;!--
            只读操作
        --&gt;
        &lt;tx:method name=&quot;*&quot; read-only=&quot;true&quot; /&gt;
    &lt;/tx:attributes&gt;
&lt;/tx:advice&gt;
 &lt;!--AOP声明式事务配置（配置切入点，通知关联切入点）--&gt;
&lt;aop:config&gt;
    &lt;!--切点指点--&gt;
    &lt;aop:pointcut id=&quot;tranpointcut&quot; expression=&quot;execution(* com.test.service.*.*(..))&quot; /&gt;
    &lt;!--配置通知--&gt;
    &lt;aop:advisor advice-ref=&quot;txAdvice&quot; pointcut-ref=&quot;tranpointcut&quot; /&gt;
&lt;/aop:config&gt;
&lt;!--方式二：注解方式事务配置--&gt;
&lt;!--&lt;tx:annotation-driven transaction-manager=&quot;txtManager&quot;/&gt;--&gt;
&lt;!--3.扫描service--&gt;
&lt;context:component-scan base-package=&quot;com.test.service&quot;/&gt;
&lt;!--4.引入spring-mybatis.xml--&gt;
&lt;import resource=&quot;spring-mybatis.xml&quot; /&gt;
</code></pre>
</beans>
1.3.6.3 创建ItemsService接口
1
2
3
4
5
public interface ItemsService {
    List<Items> findAll();

<pre><code>void save(Items items);
</code></pre>
<p>}<br>1.3.6.4 创建ItemsServiceImpl<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>@Service<br>public class ItemsServiceImpl implements ItemsService {<br>    @Autowired<br>    private ItemsDao itemsDao;</p>
<pre><code>@Override
public List&lt;Items&gt; findAll() &#123;
    return itemsDao.findAll();
&#125;

@Override
public void save(Items items) &#123;
    itemsDao.save(items);
&#125;
</code></pre>
<p>}<br>1.3.6.5 service测试<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>public class ServiceTest {<br>  @Test<br>  public void testService(){<br>    ClassPathXmlApplicationContext classPathXmlApplicationContext &#x3D; new ClassPathXmlApplicationContext(“classpath:spring-service.xml”);<br>    ItemsService bean &#x3D; classPathXmlApplicationContext.getBean(ItemsService.class);<br>    List<Items> all &#x3D; bean.findAll();</Items></p>
<pre><code>for (Items items : all) &#123;
  System.out.println(items);
&#125;
</code></pre>
<p>  }<br>}<br>小结<br><package>jar<br>引入依赖 ssm_dao 、spring相关的依赖<br>spring-service.xml（声明式事务处理）<br>扫描业务层<br>事务管理器<br>通知-&gt;切的方法<br>aop:config<br>要切的包 表达式<br>把advice与pointcut整合起来<br>注解式事务<br>接口ItemsService.java<br>实现类ItemsServiceImpl.java<br>1.3.7 ssm_web<br>操作路径<br>pom.xml<br>创建web.xml<br>创建springmvc.xml<br>创建ItemsController.java<br>创建页面items.jsp<br>1.3.7.1 pom.xml<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br><?xml version="1.0" encoding="UTF-8"?><br><project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"><br>  <parent><br>    <artifactId>ssm_parent</artifactId><br>    <groupId>com.test</groupId><br>    <version>1.0-SNAPSHOT</version><br>  </parent><br>  <modelVersion>4.0.0</modelVersion></project></package></p>
<p>  <artifactId>ssm_web</artifactId></p>
  <!--war包-->
<p>  <packaging>war</packaging></p>
  <!--依赖引入-->
  <dependencies>
    <!--依赖service-->
    <dependency>
      <groupId>com.test</groupId>
      <artifactId>ssm_service</artifactId>
      <version>1.0-SNAPSHOT</version>
    </dependency>

<pre><code>&lt;!--导入springmvc--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.springframework&lt;/groupId&gt;
  &lt;artifactId&gt;spring-web&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;org.springframework&lt;/groupId&gt;
  &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
&lt;/dependency&gt;

&lt;!--servletAPI --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
  &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;
  &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;
  &lt;scope&gt;provided&lt;/scope&gt;
&lt;/dependency&gt;

&lt;!--jstl表达式 --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;jstl&lt;/groupId&gt;
  &lt;artifactId&gt;jstl&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
  </dependencies>


  <build>
    <!--插件-->
    <plugins>
      <!--tomcat插件-->
      <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <!--插件使用的相关配置-->
        <configuration>
          <!--端口号-->
          <port>18081</port>
          <!--写当前项目的名字(虚拟路径),如果写/，那么每次访问项目就不需要加项目名字了-->
          <path></path>/
          <!--解决get请求乱码-->
          <uriEncoding>UTF-8</uriEncoding>
        </configuration>
      </plugin>
    </plugins>
  </build>

1.3.7.2 创建web.xml
操作路径

<p>配置编码过滤器</p>
<p>springmvc前端核心控制器</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>.<br>├── pom.xml<br>├── src<br>│   ├── main<br>│   │   ├── java<br>│   │   ├── resources<br>│   │   └── webapp<br>│   │       └── WEB-INF<br>│   │           └── web.xml<br>│   └── test<br>│       └── java<br>└── ssm_web.iml<br>web.xml</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br><?xml version="1.0" encoding="UTF-8"?><br><web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd" version="3.1"><br>    <!--1.配置编码过滤器--><br>    <filter><br>        <filter-name>encodingFilter</filter-name><br>        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class><br>        <!--编码设置--><br>        <init-param><br>            <param-name>encoding</param-name><br>            <param-value>UTF-8</param-value><br>        </init-param><br>    </filter><br>    <filter-mapping><br>        <filter-name>encodingFilter</filter-name><br>        <url-pattern>&#x2F;*</url-pattern><br>    </filter-mapping></web-app></p>
<pre><code>&lt;!--2.springmvc核心控制器--&gt;
&lt;servlet&gt;
    &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;
    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
        &lt;param-value&gt;classpath:spring-mvc.xml&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;!--启动优先级--&gt;
    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;
&lt;/servlet&gt;
&lt;!--3.指定映射拦截--&gt;
&lt;servlet-mapping&gt;
    &lt;servlet-name&gt;dispatcherServlet&lt;/servlet-name&gt;
    &lt;url-pattern&gt;/&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre>

1.3.7.3 创建springmvc.xml
操作路径

<p>包扫描<br>视图解析器<br>springmvc注解驱动，自动配置mvc的处理器适配器和处理映射器<br>静态资源不过滤<br>mport导入spring.xml<br>springmvc.xml</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br><?xml version="1.0" encoding="UTF-8"?><br><beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context" xmlns:mvc="http://www.springframework.org/schema/mvc" xsi:schemalocation="http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd"><br>    <!--1：包扫描--><br>    &lt;context:component-scan base-package&#x3D;”com.test.controller”&#x2F;&gt;<br>    <!--2：视图解析器--><br>    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"><br>        <property name="prefix" value="/WEB-INF/pages/"><br>        <property name="suffix" value=".jsp"><br>    </property></property></bean><br>    <!--3：springmvc注解驱动，自动配置mvc的处理器适配器和处理映射器--><br>    <a href="mvc:annotation-driven/">mvc:annotation-driven/</a><br>    <!--4：静态资源不过滤--><br>    <a href="mvc:default-servlet-handler/">mvc:default-servlet-handler/</a><br>    <!--5：导入spring.xml--><br>    <import resource="spring-service.xml"><br></import></beans><br>1.3.7.4 创建ItemsController<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24</p>
<p>@Controller<br>@RequestMapping(“&#x2F;list”)<br>public class ItemsController {</p>
<pre><code>@Autowired
private ItemsService itemsService;

@GetMapping(&quot;/findAll&quot;)
public String findAll(Model model)&#123;
    List&lt;Items&gt; list = itemsService.findAll();
    for (Items items : list) &#123;
        System.out.println(items);
    &#125;
    model.addAttribute(&quot;list&quot;,list);
    return &quot;list&quot;;
&#125;

@PostMapping(&quot;/save&quot;)
public String  save(Items items)&#123;
    itemsService.save(items);
    return &quot;redirect:/list/findAll&quot;;
&#125;
</code></pre>
<p>}<br>1.3.7.5 创建页面items.jsp<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>&lt;%@ taglib prefix&#x3D;”c” uri&#x3D;”<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/core&quot;">http://java.sun.com/jsp/jstl/core&quot;</a> %&gt;<br>&lt;%@ page contentType&#x3D;”text&#x2F;html;charset&#x3D;UTF-8” language&#x3D;”java” %&gt;</p>
<html>
<head>
    <title>Title</title>
</head>
<body>
<table>
    <form action="${pageContext.request.contextPath}/list/save" method="post">
        <table>
            <tr>
                <td>名称</td>
                <td><input type="text" name="name"></td>
            </tr>
            <tr>
                <td>价格</td>
                <td><input type="text" name="price"></td>
            </tr>
            <tr>
                <td>创建日期</td>
                <td><input type="text" name="createTime"></td>
            </tr>
            <tr>
                <td>详情</td>
                <td><input type="text" name="detail"></td>
            </tr>
            <tr>
                <td colspan="2">
                    <input type="submit" value="提交">
                </td>
            </tr>
        </table>
    </form>
</table>
<hr>


<table border="1">
    <tr>
        <td>ID</td>
        <td>name</td>
        <td>price</td>
        <td>createTime</td>
        <td>detail</td>
    </tr>
    <tr>
        <c:forEach items="${list}" var="item">
        <td>${item.id}</td>
        <td>${item.name}</td>
        <td>${item.price}</td>
        <td>${item.pic}</td>
        <td>${item.createTime}</td>
        <td>${item.detail}</td>
    </c:forEach></tr>
    
</table>
</body>
</html>
1.3.7.6 小结
<package>war
引入依赖 ssm_service 、 springmvc 、 servlet_api等
springmvc.xml（springmvc的相关配置）
web.xml（springmvc的核心控制器、post乱码过滤器）
类ItemsController.java
测试页面items.jsp
1.3.8 测试
操作路径
测试打包package、安装install（演示maven聚合）
发布到外部tomcat
使用maven的tomcat插件发布
1.3.8.1 方式一：tomcat插件发布（配置父工程）
parent是有聚合的功能，不需要将ssm_parent，ssm_model，ssm_dao，ssm_service安装到本地仓库。

<p>1.3.8.2 方式二：tomcat插件发布（配置web工程）<br>需要将ssm_parent，ssm_model，ssm_dao，ssm_service安装到本地仓库。</p>
<p>1.3.8.3 方式三：发布到外部tomcat<br>当使用外部tomcat进行开发的时候，不需要将ssm_parent，ssm_model，ssm_dao，ssm_service安装到本地仓库。</p>
<p>1.3.8.4 小结<br>1：拆分与聚合和继承</p>
<p>​ 拆分：解耦，代码最大程度的重复使用，维护方便</p>
<p>​ 聚合：靠父工程来聚合，单一工程是没法完成工作。</p>
<p>​ 继承：父工程引入依赖，子工程就不需要再引了</p>
<p>2: Maven的jar包冲突解决</p>
<p>路径近者优先<br>路径相同，第一声明优先<br>路径相同，使用强制排除exclusions<br>3：准备数据库环境</p>
<p>ssm_parent（父工程）聚合，引入依赖管理</p>
<p>ssm_model（子工程） 实体类</p>
<p>ssm_dao（子工程） mybatis, dataSource, sqlSessionFactorybean, MapperScannerConfigurer</p>
<p>注：映射文件的路径必须与包名路径一样</p>
<p>ssm_service（子工程）</p>
<p>扫service包，事务管理器，通知、切面。</p>
<p>ssm_web（子工程）</p>
<p>SpringMVC.xml 扫controller, 视图解析器，注解驱动，静态资源过滤<br>web.xml 编码过滤器，前端核心控制器(load-on-startup)<br>8：测试（工程发布tomcat）</p>
<p>推荐使用本地tomcat<br>1.4 补充<br>Maven项目，如果正在下载一个jar，但是突然断网，此时，就会产生一个m2e-lastUpdated.，别指望下次上网就会自动下载，必须手动删除该文件，然后再进行下载。</p>
<p>二.Git<br>学习目标：</p>
<p>能够概述git基本概念<br>能够概述git工作流程<br>能够使用git基本命令<br>能够使用idea操作git<br>2.1 Git版本控制系统目标<br>速度<br>简单的设计<br>对非线性开发模式的强力支持（允许上千个并行开发的分支）<br>完全分布式<br>有能力高效管理类似 Linux 内核一样的超大规模项目（速度和数据量）<br>2.2 Git与svn对比<br>SVN是集中式版本控制系统，版本库是集中放在中央服务器的</p>
<p>集中管理方式在一定程度上看到其他开发人员在干什么，而管理员也可以很轻松掌握每个人的开发权限。</p>
<p>但是相较于其优点而言，集中式版本控制工具缺点很明显：</p>
<p>服务器单点故障<br>容错性差<br>Git是分布式版本控制系统，那么它就没有中央服务器的</p>
<p>小结</p>
<p>git: 是一个代码(文档)版本的管理工具</p>
<p>svn：集中式版本控制工具（服务器完成对文件的版本控制）（一个仓库）</p>
<p>git：分布式版本控制工具（客户端、服务器都可以完成对文件的版本控制）（两个仓库，本地仓库、远程仓库）</p>
<p>2.3 git工作流程<br>一般工作流程如下：</p>
<p>从远程仓库中克隆 Git 资源作为本地仓库。</p>
<p>从本地仓库中checkout代码然后进行代码修改</p>
<p>在提交前先将代码提交到暂存区。</p>
<p>提交执行commit命令。提交到本地仓库。本地仓库中保存修改的各个历史版本。</p>
<p>在修改完成后，需要和团队成员共享代码时，可以将本地仓库的代码push到远程仓库。</p>
<p>小结</p>
<p>本地仓库——存入工程代码zip<br>工作区—— idea工作目录(代码明文)<br>暂存区<br>​ 命令：</p>
<p>远程仓库：(代码与他人共享的地方)</p>
<p>add（添加到暂存区）；</p>
<p>commit（提交到本地仓库）</p>
<p>clone（远程仓库的代码克隆到本地仓库 所有的版本）；</p>
<p>pull（将代码从远程仓库拉取到本地开发 只拉取某一版本的代码, 会尝试合并(远程与本地)）；</p>
<p>push（将代码从本地仓库推送到远程仓库）</p>
<p>clone与pull的区别</p>
<p>​ clone：第一次连接远程仓库 所有的版本 初始化</p>
<p>​ pull：第一次用clone命令，如果已经连接是哪个，其他都用pull命令拉取 只拉取某一版本的代码 会尝试合并(远程与本地)</p>
<p>2.4 使用git管理文件版本<br>目标</p>
<p>使用git在本地仓库完成版本控制，及相关命令的是使用</p>
<p>学习路径</p>
<p>创建版本库<br>添加&#x2F;修改&#x2F;删除文件&#x2F;删除文件并保留副本<br>将java工程提交到版本库<br>忽略文件（提交版本库时，可忽略某些文件）<br>2.4.1 创建版本库<br>什么是版本库呢？版本库又名仓库，英文名repository，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的新增、修改、删除，Git都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以“还原”。由于git是分布式版本管理工具，所以git在不需要联网的情况下也具有完整的版本管理能力。</p>
<p>创建本地仓库执行命令</p>
<p>1<br>$ git init<br>查看</p>
<p>1<br>2<br>$ ls -a | grep git<br> .git<br>创建服务器仓库</p>
<p>1<br>$ git –bare init<br>小结</p>
<p>git init 有工作空间，可以编码，一般用于客户端</p>
<p>git –bare init没有有工作空间，不可以编码，一般用于服务端</p>
<p>概念：</p>
<p>版本库</p>
<p>“.git”目录就是版本库，将来文件都需要保存到版本库中。</p>
<p>工作目录（工作区）</p>
<p>包含“.git”目录的目录，也就是.git目录的上一级目录就是工作目录。只有工作目录中的文件或者是文件夹才能保存到版本库中。</p>
<p>2.4.2 添加文件<br>2.4.2.1 添加文件过程<br>在git init的目录下创建一个文件</p>
<p>1<br>$ touch readme.txt<br>使用git add 命令即加入缓存区</p>
<p>1<br>$ git add readme.txt<br>使用git commit 添加注释并提交</p>
<p>1<br>$ git commit -m “Comment Message”<br>2.4.2.2 工作区和暂存区<br>Git和其他版本控制系统如SVN的一个不同之处就是有暂存区的概念。</p>
<p>什么是工作区（Working Directory）？</p>
<p>​ 工作区就是你在电脑里能看到的目录，比如我的reporstory&#x2F;repo1文件夹就是一个工作区。</p>
<p>什么是版本库？</p>
<p>​ 在这个工作区目录中的“.git”隐藏文件夹是版本库。</p>
<p>​ Git的版本库里存了很多东西，其中最重要的就是称为stage（或者叫index）的暂存区，还有Git为我们自动创建的第一个分支master，以及指向master的一个指针叫HEAD。</p>
<p>可以简单理解为，需要提交的文件修改通通放到暂存区，然后，一次性提交暂存区的所有修改。</p>
<p>2.4.2.3 修改文件<br>2.4.2.3.1 提交修改<br>修改文件</p>
<p>显示修改文件</p>
<p>1<br>$ git status<br>显示修改内容</p>
<p>1<br>$ git diff readme.txt<br>使用git add 命令即加入缓存区</p>
<p>1<br>$ git add readme.txt<br>使用git commit 添加注释并提交</p>
<p>1<br>$ git commit -m “New Comment Message”<br>2.4.2.3.2 查看修改历史<br>查看修改历史</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>$ git log | less | grep -v “swzxsyh”<br>commit 360abaca1a57aa9a9652c57fc3b06cf8a2c16742<br>Date:   Tue Jan 29 17:01:39 2019 +0800</p>
<p>Learning Part of C Language</p>
<p>commit 9b1e91b72926493818ccbafd1447c2ae3fe8af55<br>Date:   Tue Jan 29 16:57:04 2019 +0800</p>
<p>Cisco Packet Tracer ReadME<br>恢复版本</p>
<p>1<br>$ git checkout – <file><br>2.4.2.3.3 差异比较<br>1<br>$ git diff 新版本号 旧版本号<br>2.4.2.3.4 还原修改<br>1<br>$ git reset HEAD <file>…<br>注意：此操作会撤销所有未提交的修改，所以当使用还原操作是需要慎重</file></file></p>
<p>2.4.2.4 删除文件<br>需要删除无用的文件时可以使用git提供的删除功能直接将文件从版本库中删除。</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>$ rm readme.txt</p>
<p>$ git rm readme.txt</p>
<p>$ git commit -m “rm readme.txt”</p>
<p>$ git push resp<br>2.4.2.5 删除文件并保留副本<br>1<br>2<br>3<br>4<br>#对于一个文件：<br>git rm –cached mylogfile.log<br>#对于一个目录：<br>git rm –cached -r mydirectory<br>2.4.2.6 案例：将java工程-提交到版本库<br>创建HelloProjet项目，将工程添加到暂存区。</p>
<p>1<br>$ git add HelloProjet&#x2F;<br>忽略文件或文件夹</p>
<p>并不是所有文件都需要保存到版本库中的例如“out”目录及目录下的文件就可以忽略。</p>
<p>需要创建.gitignore文件，并添加ignore内容</p>
<p>1<br>$ echo “out.idea” &gt;&gt; .gitignore<br>提交代码</p>
<p>1<br>$ git commit -m “HelloProjet”<br>2.4.2.7 忽略文件（.gitignore）语法规范<br>空行或是以 # 开头的行即注释行将被忽略。</p>
<p>可以在前面添加正斜杠 &#x2F; 来避免递归,下面的例子中可以很明白的看出来与下一条的区别。</p>
<p>可以在后面添加正斜杠 &#x2F; 来忽略文件夹，例如 build&#x2F; 即忽略build文件夹。</p>
<p>可以使用 ! 来否定忽略，即比如在前面用了 *.apk ，然后使用 !a.apk ，则这个a.apk不会被忽略。</p>
<p>*用来匹配零个或多个字符，如 *.[oa] 忽略所有以”.o”或”.a”结尾， *~ 忽略所有以 ~ 结尾的文件（这种文件通常被许多编辑器标记为临时文件）； [] 用来匹配括号内的任一字符，如 [abc] ，也可以在括号内加连接符，如 [0-9] 匹配0至9的数； ? 用来匹配单个字符。</p>
<p>看了这么多，还是应该来个例子：</p>
<p>gitignore文件</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12</p>
<h1 id="忽略-a-文件"><a href="#忽略-a-文件" class="headerlink" title="忽略 .a 文件"></a>忽略 .a 文件</h1><p>*.a</p>
<h1 id="不忽略-lib-a-尽管已经在前面忽略了-a-文件"><a href="#不忽略-lib-a-尽管已经在前面忽略了-a-文件" class="headerlink" title="不忽略 lib.a, 尽管已经在前面忽略了 .a 文件"></a>不忽略 lib.a, 尽管已经在前面忽略了 .a 文件</h1><p>!lib.a</p>
<h1 id="仅在当前目录下忽略-TODO-文件，-但不包括子目录下的-subdir-x2F-TODO"><a href="#仅在当前目录下忽略-TODO-文件，-但不包括子目录下的-subdir-x2F-TODO" class="headerlink" title="仅在当前目录下忽略 TODO 文件， 但不包括子目录下的 subdir&#x2F;TODO"></a>仅在当前目录下忽略 TODO 文件， 但不包括子目录下的 subdir&#x2F;TODO</h1><p>&#x2F;TODO</p>
<h1 id="忽略-build-x2F-文件夹下的所有文件"><a href="#忽略-build-x2F-文件夹下的所有文件" class="headerlink" title="忽略 build&#x2F; 文件夹下的所有文件"></a>忽略 build&#x2F; 文件夹下的所有文件</h1><p>build&#x2F;</p>
<h1 id="忽略-doc-x2F-notes-txt-不包括-doc-x2F-server-x2F-arch-txt"><a href="#忽略-doc-x2F-notes-txt-不包括-doc-x2F-server-x2F-arch-txt" class="headerlink" title="忽略 doc&#x2F;notes.txt, 不包括 doc&#x2F;server&#x2F;arch.txt"></a>忽略 doc&#x2F;notes.txt, 不包括 doc&#x2F;server&#x2F;arch.txt</h1><p>doc&#x2F;*.txt</p>
<h1 id="忽略所有的-pdf-文件，包括在-doc-x2F-directory-下的"><a href="#忽略所有的-pdf-文件，包括在-doc-x2F-directory-下的" class="headerlink" title="忽略所有的 .pdf 文件，包括在 doc&#x2F; directory 下的"></a>忽略所有的 .pdf 文件，包括在 doc&#x2F; directory 下的</h1><p>doc&#x2F;**&#x2F;*.pdf<br>2.4.2.8 小结<br>创建版本库</p>
<p>git init：初始化仓库(包含工作目录) –bare[创建的是纯仓库]</p>
<p>添加文件</p>
<p>git add：把文件添加进暂存区</p>
<p>git commit提交文件至本地仓库 添加提交日志</p>
<p>修改文件</p>
<p>删除文件</p>
<p>删除文件并保留副本</p>
<p>忽略文件（提交版本库时，可忽略某些文件。提交工程源码与jar和pom.xml，其它不提交）</p>
<p>将java工程提交到版本库【重点-不要提交忽略文件】</p>
<p>2.5 远程仓库<br>目标</p>
<p>使用git在远程仓库完成版本控制，及相关命令的使用，远程仓库可实现项目组人员之间的文件版本控制</p>
<p>学习路径</p>
<p>添加到远程仓库</p>
<p>（1）在github上创建仓库</p>
<p>（2）什么是ssh协议</p>
<p>（3）使用ssh协议同步到远程仓库</p>
<p>（4）使用https协议同步到远程仓库</p>
<p>从远程仓库上克隆</p>
<p>从远程仓库取代码</p>
<p>解决多人协作中版本冲突问题</p>
<p>搭建私有Git服务器（linux环境）</p>
<p>2.5.1 添加远程仓库<br>此时在本地已有一个Git仓库，想让其他人来协作开发，此时可以把本地仓库同步到远程仓库，同时还增加了本地仓库的一个备份。</p>
<p>2.5.1.1 在github上创建仓库<br>官网：<a target="_blank" rel="noopener" href="https://github.com/">https://github.com/</a></p>
<p>注册账号-&gt;登录-&gt;新建仓库-&gt;Start a project-&gt;-&gt;点击“create repository”按钮仓库即可</p>
<p>Github支持两种同步方式“https”和“ssh”。</p>
<p>使用https很简单基本不需要配置就可以使用，但是每次提交代码和下载代码时都需要输入用户名和密码</p>
<p>2.5.1.1.2 ssh协议版本<br>SSH 为 Secure Shell的缩写，利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。</p>
<p>使用ssh方式就需要客户端先生成一个密钥对，即一个公钥一个私钥。然后还需要把公钥放到githib的服务器上。</p>
<p>Client</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>[root@localhost ~]# ssh-keygen -t rsa       &lt;&#x3D;&#x3D; 建立密钥对，-t代表类型，有RSA和DSA两种<br>Generating public&#x2F;private rsa key pair.<br>Enter file in which to save the key (&#x2F;root&#x2F;.ssh&#x2F;id_rsa): #密钥文件默认存放位置，按Enter即可<br>Created directory ‘&#x2F;root&#x2F;.ssh’.<br>Enter passphrase (empty for no passphrase):  #输入密钥锁码<br>Enter same passphrase again:<br>Your identification has been saved in &#x2F;root&#x2F;.ssh&#x2F;id_rsa.    #生成的私钥<br>Your public key has been saved in &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub.    #生成的公钥<br>The key fingerprint is:<br>SHA256:<br>ssh密钥配置</p>
<p>密钥生成后需要在github上配置密钥本地才可以顺利访问。</p>
<p>在key部分将id_rsa.pub文件内容添加进去，然后点击“Add SSH key”按钮完成配置。</p>
<p>使用ssh协议同步到远程仓库</p>
<p>1<br>2<br>$ git remote add origin <a href="mailto:&#103;&#105;&#116;&#64;&#103;&#x69;&#x74;&#x68;&#117;&#98;&#x2e;&#99;&#111;&#x6d;">&#103;&#105;&#116;&#64;&#103;&#x69;&#x74;&#x68;&#117;&#98;&#x2e;&#99;&#111;&#x6d;</a>:itcast888&#x2F;mytest.git<br>$ git push -u origin master<br>origin就是一个名字，它是在你clone一个托管在Github上代码库时，git为你默认创建的指向这个远程代码库的标签， origin指向的是repository，master只是这个repository中默认创建的第一个分支。</p>
<p>2.5.2 从远程仓库克隆<br>克隆远程仓库也就是从远程把仓库复制一份到本地，克隆后会创建一个新的本地仓库。选择一个任意部署仓库的目录，然后克隆远程仓库。</p>
<p>1<br>$ git clone <a href="mailto:git@github.com:sublun/mytest.git">git@github.com:sublun/mytest.git</a><br>2.5.3 从远程仓库取代码<br>1<br>2<br>3</p>
<ol>
<li><p>git fetch：相当于是从远程获取最新版本到本地，不会自动merge（合并代码）</p>
</li>
<li><p>git pull：相当于是从远程获取最新版本并merge到本地，上述命令其实相当于git fetch 和 git merge<br>在实际使用中，git fetch更安全一些，但是不常用！</p>
</li>
</ol>
<p>因为在merge前，我们可以查看更新情况，然后再决定是否合并。</p>
<p>git pull更常用，因为即得代码又可以自动合并</p>
<p>2.5.4 解决版本冲突<br>原因</p>
<p>同时获取同一份代码，用户A先提交，用户B再提交，即出现版本冲突</p>
<p>解决</p>
<p>先拉取（pull）远程仓库的代码到本地。</p>
<p>编辑冲突</p>
<p>合并成一个新的文件</p>
<p>再次推送</p>
<p>避免冲突</p>
<p>优先提交代码<br>提交后通知全组成员pull<br>2.6 分支管理<br>目标</p>
<p>在本地仓库中使用分支，可在一个项目中使用多条路径，完成版本控制。</p>
<p>学习路径</p>
<p>分支的概念</p>
<p>分支管理</p>
<p>（1）创建分支（2）合并分支（3）解决冲突（4）删除分支</p>
<p>2.6.1 分支的概念<br>在我们每次的提交，Git都把它们串成一条时间线，这条时间线就是一个分支。截止到目前，只有一条时间线，在Git里，这个分支叫主分支，即master分支。HEAD指针严格来说不是指向提交，而是指向master，master才是指向提交的，所以，HEAD指向的就是当前分支。</p>
<p>只要有本地仓库就有master分支。</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>$ git checkout<br>A	“Algorithm&#x2F;\347\256\227\346\263\225\345\233\276\350\247\243&#x2F;.idea&#x2F;$CACHE_FILE$”<br>M	C++ project&#x2F;.vscode&#x2F;launch.json<br>M	C++ project&#x2F;.vscode&#x2F;tasks.json<br>M	Java&#x2F;MyFirstApp.class<br>Your branch is up to date with ‘origin&#x2F;master’.<br>Master是条线，Git用master指向最新的提交，再用HEAD指向master，就能确定当前分支</p>
<p>每次提交，master分支都会向前移动一步，这样，随着你不断提交，master分支的线也越来越长。</p>
<p>1<br>2<br>3<br>              Head<br>                ↓<br>A–&gt;B–&gt;C–&gt;D–&gt;E(Master)<br>创建新的分支，如dev，Git新建了一个指针叫dev，指向master相同的提交，再把HEAD指向dev，此时，对工作区的修改和提交就针对dev分支，提交后，dev指针往前移动一步，而master指针不变</p>
<p>1<br>2<br>$ git checkout -b dev<br>Switched to a new branch “dev”<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>              Master<br>                ↓<br>A–&gt;B–&gt;C–&gt;D–&gt;E<br>                 ↘<br>                  dev<br>                   ↑<br>                  Head<br>dev上的工作完成了，就可以把dev合并到master上，删除dev分支，变回一条线</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>#在切换分支之前，保持好一个干净的状态<br>$ git add xx&#x2F;*<br>$ git commit -m “XXX”<br>#切换回 master 分支<br>$ git checkout master<br>Switched to branch ‘master’<br>#假设提交，且无冲突，合并分支<br>$ git merge dev<br>#使用带 -d 选项的 git branch 命令来删除分支<br>$ git branch -d dev<br>2.7 IntelliJ IDEA中使用git<br>目标</p>
<p>在idea使用git完成版本控制</p>
<p>git操作本地仓库（自己进行版本控制）</p>
<p>git操作远程仓库（多人进行版本控制）</p>
<p>学习路径</p>
<p>配置Git<br>创建工程集成Git<br>推送代码到远程仓库<br>从远程仓库克隆<br>从远程仓库拉取<br>使用分支<br>2.7.1 在Idea中配置git<br>安装好IntelliJ IDEA后，如果Git安装在默认路径下，那么idea会自动找到git的位置，如果更改了Git的安装位置则需要手动配置下Git的路径。</p>
<p>选择File→Settings打开设置窗口，找到Version Control下的git选项<br>选择git的安装目录后可以点击“Test”按钮测试是否正确配置。<br>使用idea操作github远程服务器的时候，在idea中配置用户名和密码，这样使用https协议访问github的时候，不需要输入用户名和密码了。<br>2.7.2 创建工程集成GIT<br>2.7.2.1创建maven工程<br>创建Maven工程打包方式为jar包，创建User类</p>
<p>创建本地仓库</p>
<p>在菜单中选择“vcs”→Import into Version Control→Create Git Repository</p>
<p>此时样式改变，查看本地工程目录，有绿色箭头。说明创建了本地仓库。</p>
<p>2.7.2.2添加暂存区<br>项目右键——&gt;Git—&gt;Add</p>
<p>2.7.2.3 提交本地仓库<br>项目右键——&gt;Git—&gt;Commit Directory</p>
<p>2.7.3 远程仓库操作<br>2.7.3.1 推送到远程仓库<br>在github上创建一个远程仓库 HelloGithub 然后将本地仓库推送到远程。</p>
<p>注意：这里使用https的协议连接</p>
<p>在工程上点击右键，选择git→Repository→Remotes，添加URL</p>
<p>在工程上点击右键，选择git→Repository→Push</p>
<p>2.7.3.2 从远程仓库克隆<br>方式一</p>
<p>选择VCS—&gt;Checkout from Version Control—&gt;GitHub</p>
<p>方式二</p>
<p>在idea的欢迎页上有“Checkout from version control”下拉框，选择git(推荐使用https形式的url)</p>
<p>2.7.3.3 修改文件push到远程仓库<br>修改User</p>
<p>先commit到本地</p>
<p>Git–&gt;Commit Directory</p>
<p>再push到远程</p>
<p>Git–&gt;Repository–&gt;Push</p>
<p>2.7.3.4 从远程仓库拉取<br>Git–&gt;Repository–&gt;Pull</p>
<p>2.7.4 在Idea中使用分支<br>选择VCS—&gt;Git—&gt;Branches</p>
<p>点击“New Branch”，新建一个分支</p>
<p>分支操作</p>
<p>Checkout：为切换分支<br>Merge：为合并分支<br>Delete：删除分支<br>小结<br>在idea中配置git<br>将工程添加至git（操作本地仓库，将工程推送到远程仓库）<br>从远程仓库克隆（远程仓库）<br>从服务端拉取代码（远程仓库）<br>在idea中使用分支</p>
</package></Items></Items></Items>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/05/25/Linux-Nginx/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/25/Linux-Nginx/" class="post-title-link" itemprop="url">Linux & Nginx</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-05-25 01:40:56" itemprop="dateCreated datePublished" datetime="2020-05-25T01:40:56+08:00">2020-05-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.linux基础<br>1.1 远程连接工具使用<br>在实际开发中，Linux服务器都在其他的地方，我们要通过windows客户端工具远程去连接Linux并操作 它，连接Linux的windows客户端工具有很多，企业中常用的有secureCRT、Putty、xshell、SSH Secure等。</p>
<p>1.2 Linux目录结构<br>root目录:超级管理员所在的目录，用~表示<br>home目录:普通用户所在的目录<br>usr目录:安装用户文件所在的目录<br>etc目录:Linux系统管理和配置文件所在的目录</p>
<p>1.3 文件夹(目录)操作命令<br>查看</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>ls</p>
<p>List directory contents.</p>
<ul>
<li><p>List files one per line:<br>  ls -1</p>
</li>
<li><p>List all files, including hidden files:<br>  ls -a</p>
</li>
<li><p>Long format list (permissions, ownership, size and modification date) of all files:<br>  ls -la</p>
</li>
<li><p>Long format list with size displayed using human readable units (KB, MB, GB):<br>  ls -lh</p>
</li>
<li><p>Long format list sorted by size (descending):<br>  ls -lS</p>
</li>
<li><p>Long format list of all files, sorted by modification date (oldest first):<br>  ls -ltr<br>跳转</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>cd</p>
<p>Change the current working directory.</p>
<ul>
<li><p>Go to the given directory:<br>  cd path&#x2F;to&#x2F;directory</p>
</li>
<li><p>Go to home directory of current user:<br>  cd</p>
</li>
<li><p>Go up to the parent of the current directory:<br>  cd ..</p>
</li>
<li><p>Go to the previously chosen directory:<br>  cd -<br>创建</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>mkdir</p>
<p>Creates a directory.</p>
<ul>
<li><p>Create a directory in current directory or given path:<br>  mkdir directory</p>
</li>
<li><p>Create directories recursively (useful for creating nested dirs):<br>  mkdir -p path&#x2F;to&#x2F;directory<br>搜索</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>find</p>
<p>Find files or directories under the given directory tree, recursively.</p>
<ul>
<li><p>Find files by extension:<br>  find root_path -name ‘*.ext’</p>
</li>
<li><p>Find files by matching multiple patterns:<br>  find root_path -name ‘<em>pattern_1</em>‘ -or -name ‘<em>pattern_2</em>‘</p>
</li>
<li><p>Find directories matching a given name, in case-insensitive mode:<br>  find root_path -type d -iname ‘<em>lib</em>‘</p>
</li>
<li><p>Find files matching a path pattern:<br>  find root_path -path ‘<strong>&#x2F;lib&#x2F;</strong>&#x2F;*.ext’</p>
</li>
<li><p>Find files matching a given pattern, excluding specific paths:<br>  find root_path -name ‘<em>.py’ -not -path ‘</em>&#x2F;site-packages&#x2F;*’</p>
</li>
<li><p>Find files matching a given size range:<br>  find root_path -size +500k -size -10M</p>
</li>
<li><p>Run a command for each file (use <code>&#123;&#125;</code> within the command to access the filename):<br>  find root_path -name ‘*.ext’ -exec wc -l {} ;</p>
</li>
<li><p>Find files modified in the last 7 days, and delete them:<br>  find root_path -mtime -7 -delete<br>修改</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19</p>
<p>mv</p>
<p>Move or rename files and directories.</p>
<ul>
<li><p>Move files in arbitrary locations:<br>  mv source target</p>
</li>
<li><p>Do not prompt for confirmation before overwriting existing files:<br>  mv -f source target</p>
</li>
<li><p>Prompt for confirmation before overwriting existing files, regardless of file permissions:<br>  mv -i source target</p>
</li>
<li><p>Do not overwrite existing files at the target:<br>  mv -n source target</p>
</li>
<li><p>Move files in verbose mode, showing files after they are moved:<br>  mv -v source target<br>剪切</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19</p>
<p>mv</p>
<p>Move or rename files and directories.</p>
<ul>
<li><p>Move files in arbitrary locations:<br>  mv source target</p>
</li>
<li><p>Do not prompt for confirmation before overwriting existing files:<br>  mv -f source target</p>
</li>
<li><p>Prompt for confirmation before overwriting existing files, regardless of file permissions:<br>  mv -i source target</p>
</li>
<li><p>Do not overwrite existing files at the target:<br>  mv -n source target</p>
</li>
<li><p>Move files in verbose mode, showing files after they are moved:<br>  mv -v source target<br>复制</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>cp</p>
<p>Copy files and directories.</p>
<ul>
<li><p>Copy a file to another location:<br>  cp path&#x2F;to&#x2F;file.ext path&#x2F;to&#x2F;copy.ext</p>
</li>
<li><p>Copy a file into another directory, keeping the filename:<br>  cp path&#x2F;to&#x2F;file.ext path&#x2F;to&#x2F;target_parent_directory</p>
</li>
<li><p>Recursively copy a directory’s contents to another location (if the destination exists, the directory is copied inside it):<br>  cp -r path&#x2F;to&#x2F;directory path&#x2F;to&#x2F;copy</p>
</li>
<li><p>Copy a directory recursively, in verbose mode (shows files as they are copied):<br>  cp -vr path&#x2F;to&#x2F;directory path&#x2F;to&#x2F;copy</p>
</li>
<li><p>Copy text files to another location, in interactive mode (prompts user before overwriting):<br>  cp -i *.txt path&#x2F;to&#x2F;target_directory</p>
</li>
<li><p>Dereference symbolic links before copying:<br>  cp -L link path&#x2F;to&#x2F;copy<br>删除</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>rmdir</p>
<p>Removes a directory.</p>
<ul>
<li><p>Remove directory, provided it is empty. Use <code>rm</code> to remove not empty directories:<br>  rmdir path&#x2F;to&#x2F;directory</p>
</li>
<li><p>Remove directories recursively (useful for nested dirs):<br>  rmdir -p path&#x2F;to&#x2F;directory<br>1.4 文件操作命令<br>创建</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>touch</p>
<p>Change a file access and modification times (atime, mtime).</p>
<ul>
<li><p>Create a new empty file(s) or change the times for existing file(s) to current time:<br>  touch filename</p>
</li>
<li><p>Set the times on a file to a specific date and time:<br>  touch -t YYYYMMDDHHMM.SS filename</p>
</li>
<li><p>Use the times from a file to set the times on a second file:<br>  touch -r filename filename2<br>查看</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>cat</p>
<p>Print and concatenate files.</p>
<ul>
<li><p>Print the contents of a file to the standard output:<br>  cat file</p>
</li>
<li><p>Concatenate several files into the target file:<br>  cat file1 file2 &gt; target_file</p>
</li>
<li><p>Append several files into the target file:<br>  cat file1 file2 &gt;&gt; target_file</p>
</li>
<li><p>Number all output lines:<br>  cat -n file</p>
</li>
<li><p>Display non-printable and whitespace characters (with <code>M-</code> prefix if non-ASCII):<br>  cat -v -t -e file</p>
</li>
</ul>
<p>tail</p>
<p>Display the last part of a file.</p>
<ul>
<li><p>Show last ‘num’ lines in file:<br>  tail -n num file</p>
</li>
<li><p>Show all file since line ‘num’:<br>  tail -n +num file</p>
</li>
<li><p>Show last ‘num’ bytes in file:<br>  tail -c num file</p>
</li>
<li><p>Keep reading file until <code>Ctrl + C</code>:<br>  tail -f file</p>
</li>
<li><p>Keep reading file until <code>Ctrl + C</code>, even if the file is rotated:<br>  tail -F file</p>
</li>
</ul>
<p>head</p>
<p>Output the first part of files.</p>
<ul>
<li><p>Output the first few lines of a file:<br>  head -n count_of_lines filename</p>
</li>
<li><p>Output the first few bytes of a file:<br>  head -c number_in_bytes filename<br>删除</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>rm</p>
<p>Remove files or directories.</p>
<ul>
<li><p>Remove files from arbitrary locations:<br>  rm path&#x2F;to&#x2F;file path&#x2F;to&#x2F;another&#x2F;file</p>
</li>
<li><p>Recursively remove a directory and all its subdirectories:<br>  rm -r path&#x2F;to&#x2F;directory</p>
</li>
<li><p>Forcibly remove a directory, without prompting for confirmation or showing error messages:<br>  rm -rf path&#x2F;to&#x2F;directory</p>
</li>
<li><p>Interactively remove multiple files, with a prompt before every removal:<br>  rm -i file(s)</p>
</li>
<li><p>Remove files in verbose mode, printing a message for each removed file:<br>  rm -v path&#x2F;to&#x2F;directory&#x2F;*<br>编辑</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>vim</p>
<p>Vim (Vi IMproved), a command-line text editor, provides several modes for different kinds of text manipulation.<br>Pressing <code>i</code> enters edit mode. <code>&lt;Esc&gt;</code> goes back to normal mode, which doesn’t allow regular text insertion.<br>More information: <a target="_blank" rel="noopener" href="https://www.vim.org/">https://www.vim.org</a>.</p>
<ul>
<li><p>Open a file:<br>  vim path&#x2F;to&#x2F;file</p>
</li>
<li><p>View Vim’s help manual:<br>  :help<Enter></Enter></p>
</li>
<li><p>Save a file:<br>  :write<Enter></Enter></p>
</li>
<li><p>Quit without saving:<br>  :quit!<Enter></Enter></p>
</li>
<li><p>Open a file at a specified line number:<br>  vim +line_number path&#x2F;to&#x2F;file</p>
</li>
<li><p>Undo the last operation:<br>  u</p>
</li>
<li><p>Search for a pattern in the file (press <code>n</code>&#x2F;<code>N</code> to go to next&#x2F;previous match):<br>  &#x2F;search_pattern<Enter></Enter></p>
</li>
<li><p>Perform a regex substitution in the whole file:<br>  :%s&#x2F;pattern&#x2F;replacement&#x2F;g<Enter><br>1.5 文件压缩命令<br>将文件打成压缩包</Enter></p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>tar</p>
<p>Archiving utility.<br>Often combined with a compression method, such as gzip or bzip.<br>More information: <a target="_blank" rel="noopener" href="https://www.gnu.org/software/tar">https://www.gnu.org/software/tar</a>.</p>
<ul>
<li><p>Create an archive from files:<br>  tar cf target.tar file1 file2 file3</p>
</li>
<li><p>Create a gzipped archive:<br>  tar czf target.tar.gz file1 file2 file3</p>
</li>
<li><p>Create a gzipped archive from a directory using relative paths:<br>  tar czf target.tar.gz -C path&#x2F;to&#x2F;directory .</p>
</li>
<li><p>Extract a (compressed) archive into the current directory:<br>  tar xf source.tar[.gz|.bz2|.xz]</p>
</li>
<li><p>Extract an archive into a target directory:<br>  tar xf source.tar -C directory</p>
</li>
<li><p>Create a compressed archive, using archive suffix to determine the compression program:<br>  tar caf target.tar.xz file1 file2 file3</p>
</li>
<li><p>List the contents of a tar file:<br>  tar tvf source.tar</p>
</li>
<li><p>Extract files matching a pattern:<br>  tar xf source.tar –wildcards “*.html”</p>
</li>
<li><p>Extract a specific file without preserving the folder structure:<br>  tar xf source.tar source.tar&#x2F;path&#x2F;to&#x2F;extract –strip-components&#x3D;depth_to_strip<br>解压缩包获得文件</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>tar</p>
<p>Archiving utility.<br>Often combined with a compression method, such as gzip or bzip.<br>More information: <a target="_blank" rel="noopener" href="https://www.gnu.org/software/tar">https://www.gnu.org/software/tar</a>.</p>
<ul>
<li><p>Create an archive from files:<br>  tar cf target.tar file1 file2 file3</p>
</li>
<li><p>Create a gzipped archive:<br>  tar czf target.tar.gz file1 file2 file3</p>
</li>
<li><p>Create a gzipped archive from a directory using relative paths:<br>  tar czf target.tar.gz -C path&#x2F;to&#x2F;directory .</p>
</li>
<li><p>Extract a (compressed) archive into the current directory:<br>  tar xf source.tar[.gz|.bz2|.xz]</p>
</li>
<li><p>Extract an archive into a target directory:<br>  tar xf source.tar -C directory</p>
</li>
<li><p>Create a compressed archive, using archive suffix to determine the compression program:<br>  tar caf target.tar.xz file1 file2 file3</p>
</li>
<li><p>List the contents of a tar file:<br>  tar tvf source.tar</p>
</li>
<li><p>Extract files matching a pattern:<br>  tar xf source.tar –wildcards “*.html”</p>
</li>
<li><p>Extract a specific file without preserving the folder structure:<br>  tar xf source.tar source.tar&#x2F;path&#x2F;to&#x2F;extract –strip-components&#x3D;depth_to_strip<br>1.6 文件权限命令<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>chmod</p>
</li>
</ul>
<p>Change the access permissions of a file or directory.</p>
<ul>
<li><p>Give the [u]ser who owns a file the right to e[x]ecute it:<br>  chmod u+x file</p>
</li>
<li><p>Give the [u]ser rights to [r]ead and [w]rite to a file&#x2F;directory:<br>  chmod u+rw file_or_directory</p>
</li>
<li><p>Remove e[x]ecutable rights from the [g]roup:<br>  chmod g-x file</p>
</li>
<li><p>Give [a]ll users rights to [r]ead and e[x]ecute:<br>  chmod a+rx file</p>
</li>
<li><p>Give [o]thers (not in the file owner’s group) the same rights as the [g]roup:<br>  chmod o&#x3D;g file</p>
</li>
<li><p>Remove all rights from [o]thers:<br>  chmod o&#x3D; file</p>
</li>
<li><p>Change permissions recursively giving [g]roup and [o]thers the abililty to [w]rite:<br>  chmod -R g+w,o+w directory<br>1.7 其他命令<br>显示工作目录</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>pwd</p>
<p>Print name of current&#x2F;working directory.</p>
<ul>
<li><p>Print the current directory:<br>  pwd</p>
</li>
<li><p>Print the current directory, and resolve all symlinks (i.e. show the “physical” path):<br>  pwd -P<br>查看进程</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>ps</p>
<p>Information about running processes.</p>
<ul>
<li><p>List all running processes:<br>  ps aux</p>
</li>
<li><p>List all running processes including the full command string:<br>  ps auxww</p>
</li>
<li><p>Search for a process that matches a string:<br>  ps aux | grep string</p>
</li>
<li><p>List all processes of the current user in extra full format:<br>  ps –user $(id -u) -F</p>
</li>
<li><p>List all processes of the current user as a tree:<br>  ps –user $(id -u) f</p>
</li>
<li><p>Get the parent pid of a process:<br>  ps -o ppid&#x3D; -p pid<br>杀死进程</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>kill</p>
<p>Sends a signal to a process, usually related to stopping the process.<br>All signals except for SIGKILL and SIGSTOP can be intercepted by the process to perform a clean exit.</p>
<ul>
<li><p>Terminate a program using the default SIGTERM (terminate) signal:<br>  kill process_id</p>
</li>
<li><p>List available signal names (to be used without the <code>SIG</code> prefix):<br>  kill -l</p>
</li>
<li><p>Terminate a background job:<br>  kill %job_id</p>
</li>
<li><p>Terminate a program using the SIGHUP (hang up) signal. Many daemons will reload instead of terminating:<br>  kill -1|HUP process_id</p>
</li>
<li><p>Terminate a program using the SIGINT (interrupt) signal. This is typically initiated by the user pressing <code>Ctrl + C</code>:<br>  kill -2|INT process_id</p>
</li>
<li><p>Signal the operating system to immediately terminate a program (which gets no chance to capture the signal):<br>  kill -9|KILL process_id</p>
</li>
<li><p>Signal the operating system to pause a program until a SIGCONT (“continue”) signal is received:<br>  kill -17|STOP process_id</p>
</li>
<li><p>Send a <code>SIGUSR1</code> signal to all processes with the given GID (group id):<br>  kill -SIGUSR1 -group_id<br>搜索</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>grep</p>
<p>Matches patterns in input text.<br>Supports simple patterns and regular expressions.</p>
<ul>
<li><p>Search for an exact string:<br>  grep search_string path&#x2F;to&#x2F;file</p>
</li>
<li><p>Search in case-insensitive mode:<br>  grep -i search_string path&#x2F;to&#x2F;file</p>
</li>
<li><p>Search recursively (ignoring non-text files) in current directory for an exact string:<br>  grep -RI search_string .</p>
</li>
<li><p>Use extended regular expressions (supporting <code>?</code>, <code>+</code>, <code>&#123;&#125;</code>, <code>()</code> and <code>|</code>):<br>  grep -E ^regex$ path&#x2F;to&#x2F;file</p>
</li>
<li><p>Print 3 lines of [C]ontext around, [B]efore, or [A]fter each match:<br>  grep -C|B|A 3 search_string path&#x2F;to&#x2F;file</p>
</li>
<li><p>Print file name with the corresponding line number for each match:<br>  grep -Hn search_string path&#x2F;to&#x2F;file</p>
</li>
<li><p>Use the standard input instead of a file:<br>  cat path&#x2F;to&#x2F;file | grep search_string</p>
</li>
<li><p>Invert match for excluding specific strings:<br>  grep -v search_string<br>管道</p>
</li>
</ul>
<p>1<br>2<br>3<br>4<br>|      ##管道符<br>管道只允许正确输出通过<br> tee         ####复制一份输出<br>2&gt;&amp;1 |       ####转换错误输出为正确再通过管道<br>关机</p>
<p>1<br>poweroff<br>重启</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>reboot</p>
<p>Reboot the system.</p>
<ul>
<li><p>Reboot immediately:<br>  sudo reboot</p>
</li>
<li><p>Reboot immediately without gracefully shutting down:<br>  sudo reboot -q<br>二.Linux网络<br>2.1 网络服务<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>ifconfig</p>
</li>
</ul>
<p>Network Interface Configurator.</p>
<ul>
<li><p>View network settings of an ethernet adapter:<br>  ifconfig eth0</p>
</li>
<li><p>Display details of all interfaces, including disabled interfaces:<br>  ifconfig -a</p>
</li>
<li><p>Disable eth0 interface:<br>  ifconfig eth0 down</p>
</li>
<li><p>Enable eth0 interface:<br>  ifconfig eth0 up</p>
</li>
<li><p>Assign IP address to eth0 interface:<br>  ifconfig eth0 ip_address</p>
</li>
</ul>
<p>ip addr :CentOS7版本<br>修改网卡ip<br>vim &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33<br>概要信息	<br>DEVICE&#x3D;ens33	网卡名称<br>TYPE&#x3D;Ethernet	网卡类型 以太网<br>ONBOOT&#x3D;yes	是否开机就使用此网卡<br>BOOTPROTO&#x3D;dhcp	启动网卡时指定获取IP地址的方式<br>IPADDR&#x3D;	ip地址<br>GATEWAY&#x3D;	网关<br>NETMASK&#x3D;255.255.255.0	子网掩码<br>DNS1&#x3D;	DNS服务器<br>重启网卡服务	<br>systemctl status network	查看指定服务的状态<br>systemctl stop network	停止指定服务<br>systemctl start network	启动指定服务<br>systemctl restart network	重启指定服务<br>2.2 防火墙服务<br>2.2.1 防火墙设置<br>防火墙设置	<br>开启防火墙	systemctl start firewalld<br>重启防火墙	systemctl restart firewalld<br>关闭防火墙	systemctl stop firewalld<br>设置开机启动	systemctl enable firewalld<br>停止并关闭开机启动	systemctl disable firewalld<br>查看防火墙状态	systemctl status firewalld 或者 firewall-cmd –state<br>查看防火墙开机时是否启动	systemctl list-unit-files | grep firewalld<br>2.2.2 端口设置<br>端口设置	<br>添加	firewall-cmd –zone&#x3D;public –add-port&#x3D;80&#x2F;tcp –permanent<br>更新防火墙规则	firewall-cmd –reload<br>查看	firewall-cmd –zone&#x3D;public –query-port&#x3D;80&#x2F;tcp<br>firewall-cmd –zone&#x3D;public –list-ports<br>删除	firewall-cmd –zone&#x3D;public –remove-port&#x3D;80&#x2F;tcp –permanent<br>常用端口	8080 tomcat<br>80 http协议<br>443 https协议<br>22 ssh远程连接<br>3306 mysql<br>6379 redis<br>三.Nginx<br>3.1 介绍<br>Nginx是一款轻量级的 Web 服务器,由俄罗斯的程序设计师伊戈尔·西索夫所开发。 Nginx性能非常优秀, 官方测试能够支撑5万并发链接，并且 cpu、内存等资源消耗却非常低，运行非常稳定。</p>
<p>Nginx的功能有很多，我们主要使用它来做静态资源服务器、负载均衡服务器和反向代理服务器。</p>
<p>3.2 应用场景<br>3.2.1 静态资源服务器<br>部署网站的静态资源(html、css、js),可与Tomcat等实现动静分离</p>
<p>3.2.2 反向代理服务器<br>代理</p>
<p>给某个对象提供一个代理对象，并由代理对象控制原对象的引用</p>
<p>正向代理</p>
<p>对客户端进行代理(例如VPN)</p>
<p>反向代理</p>
<p>对服务端进行代理</p>
<p>反向代理，就是对服务端进行代理，作为客户端,只需要将请求发送到反向代理服务器，由反向代理服务 器去选择目标服务器获取数据后，再响应给客户端，此时反向代理服务器和目标服务器对外就是一个服 务器，暴露的是代理服务器地址，隐藏了真实服务器IP地址。</p>
<p>3.2.3 负载均衡服务器<br>负载均衡 Load Balance 意思就是将一份负载分摊到多个操作单元上进行执行</p>
<p>3.3 配置文件介绍(nginx-1.13.9&#x2F;conf&#x2F;nginx.conf)<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>server {<br>    listen       80; #port<br>    server_name  localhost; #Server</p>
<pre><code>#charset koi8-r;

#access_log  logs/host.access.log  main;

location / &#123;
    root   html; #Static resource directory
    index  index.html index.htm; #Default visit page
&#125;
</code></pre>
<p>3.5 nginx与tomcat区别<br>存放的文件(资源)形式<br>Nginx是http服务器,只能解析静态文件</p>
<p>Tomcat是web中间件(本质上是一个servlet),能解析jsp和静态文件</p>
<p>用途</p>
<p>nginx可以作为反向代理服务器,负责均衡服务器,静态资源存放服务器</p>
<p>tomcat能作为jsp容器使用,静态资源存放服务器</p>
<p>性能</p>
<p>nginx支持5W+并发,tomcat的并发只能在200-400之间</p>
<p>总结</p>
<h1 id="linux基础"><a href="#linux基础" class="headerlink" title="linux基础"></a>linux基础</h1><h2 id="Linux基本命令"><a href="#Linux基本命令" class="headerlink" title="Linux基本命令"></a>Linux基本命令</h2><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><ul>
<li>root</li>
</ul>
<p>​ - 超级管理员所在的目录</p>
<ul>
<li>home</li>
</ul>
<p>​ - 普通用户所在的目录</p>
<ul>
<li>usr</li>
</ul>
<p>​ - 安装用户文件所在的目录</p>
<ul>
<li>etc</li>
</ul>
<p>​ - Linux系统管理和配置文件所在的目录</p>
<h3 id="目录操作"><a href="#目录操作" class="headerlink" title="目录操作"></a>目录操作</h3><ul>
<li>查看</li>
</ul>
<p>​ - ll</p>
<p>​ - ls</p>
<ul>
<li>切换</li>
</ul>
<p>​ - cd</p>
<p>​ - 绝对路径</p>
<p>​ - 相对路径</p>
<ul>
<li>创建</li>
</ul>
<p>​ - mkdir -p</p>
<ul>
<li>修改&#x2F;剪切</li>
</ul>
<p>​ - mv</p>
<ul>
<li>复制</li>
</ul>
<p>​ - cp -r</p>
<ul>
<li>删除</li>
</ul>
<p>​ - rmdir -p</p>
<h3 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h3><ul>
<li>创建</li>
</ul>
<p>​ - touch</p>
<ul>
<li>查看</li>
</ul>
<p>​ - cat&#x2F;more&#x2F;less&#x2F;head&#x2F;tail</p>
<ul>
<li>删除</li>
</ul>
<p>​ - rm -rf</p>
<ul>
<li>编辑</li>
</ul>
<p>​ - vim</p>
<p>​ - 插入模式</p>
<p>​ - i</p>
<p>​ - 命令行模式</p>
<p>​ - esc</p>
<p>​ - 底行模式</p>
<p>​ - :</p>
<p>​ - wq!</p>
<p>​ - q!</p>
<h3 id="压缩命令"><a href="#压缩命令" class="headerlink" title="压缩命令"></a>压缩命令</h3><ul>
<li>打包</li>
</ul>
<p>​ - tar -zcvf</p>
<p>​ - xxxx.tar.gz</p>
<ul>
<li>解压缩</li>
</ul>
<p>​ - tar -zxvf</p>
<p>​ - xxxx.tar.gz</p>
<h3 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h3><ul>
<li>chmod -R 777</li>
</ul>
<h3 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h3><ul>
<li>查看进程</li>
</ul>
<p>​ - ps -ef</p>
<ul>
<li>杀死进程</li>
</ul>
<p>​ - kill -9 PID</p>
<ul>
<li>文本搜索</li>
</ul>
<p>​ - grep -in</p>
<ul>
<li>管道</li>
</ul>
<p>​ - 一个命令的输出作为另一个命令的输入</p>
<h2 id="Linux网络"><a href="#Linux网络" class="headerlink" title="Linux网络"></a>Linux网络</h2><h3 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h3><ul>
<li>查看ip</li>
</ul>
<p>​ - ifconfig</p>
<p>​ - ip addr</p>
<h3 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h3><ul>
<li>防火墙设置</li>
</ul>
<p>​ - 关闭</p>
<p>​ - systemctl stop firewalld</p>
<p>​ - 关闭开机自启动</p>
<p>​ - systemctl disable firewalld</p>
<ul>
<li>端口设置</li>
</ul>
<p>​ - 放行端口</p>
<p>​ - firewall-cmd –zone&#x3D;public –add-port&#x3D;80&#x2F;tcp –permanent</p>
<p>​ - 更新规则</p>
<p>​ - firewall-cmd –reload</p>
<h2 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h2><h3 id="由战斗民族开发的一款高性能的-http-服务器-x2F-反向代理服务器"><a href="#由战斗民族开发的一款高性能的-http-服务器-x2F-反向代理服务器" class="headerlink" title="由战斗民族开发的一款高性能的 http 服务器&#x2F;反向代理服务器"></a>由战斗民族开发的一款高性能的 http 服务器&#x2F;反向代理服务器</h3><ul>
<li><p>http服务器</p>
</li>
<li><p>反向代理（负载均衡）</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/05/14/Maven%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/14/Maven%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">Maven基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-05-14 01:39:29" itemprop="dateCreated datePublished" datetime="2020-05-14T01:39:29+08:00">2020-05-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.Maven简介<br>1.1 Maven是什么<br>Maven 是一个项目管理工具，它包含了一个项目对象模型 (POM:Project Object Model)，一组标准集合，一个项 目生命周期(Project Lifecycle)，一个依赖管理系统(Dependency Management System)，和用来运行定义在生命周 期阶段(phase)中插件(plugin)目标(goal)的逻辑。</p>
<p>1.2 Maven能解决什么问题<br>一种工具，可以构建工程，管理 jar包，编译代码，还 能帮你自动运行单元测试，打包，生成报表，部署项目，生成 Web 站点。</p>
<p>1.3 Maven的两个核心功能<br>1.3.1 依赖管理<br>Maven的一个核心特性就是依赖管理。MVN依赖管理，就是一个管理jar包的过程</p>
<p>CRM项目<br>使用mvn工程实现	➡项目中给定坐标，去仓库拉取jar包➡<br>索引的存在，使拉取jar包过程，可以认为是自己项目中有的	MVN仓库<br>jar的仓库<br>坐标:将来要找某个jar包，就是要确定这个jar包的坐标	<br>jar包如何给出坐标:公司&#x2F;组织名+项目名+版本号一起确定	<br>maven工程中不直接将jar包导入到工程中，而是通过在pom.xml文件中添加所需jar包的坐标，避免了jar直接引入进来，在需要用到jar包的时候，只要查找pom.xml文件，再通过pom.xml文件中的坐标，到一个专门用于”存放jar包的仓库”(maven仓库)中根据坐标从而找到这些jar包，再把这些jar包拿去运行。</p>
<p>通过读取pom.xml 文件中的坐标，再到仓库中找到jar包，会不会很慢</p>
<p>通过pom.xml文件配置要引入的jar包的坐标，再读取坐标并到仓库中加载jar包，这样我们就可以直接使用jar包，为了解决这个过程中速度慢的问题，maven中也有索引的概念，通过建立索引，可以大大提高加载jar包的速度，使得我们认为jar包基本跟放在本地的工程文件中再读取出来的速度是一样的。</p>
<p>1.3.2 项目构建<br>什么是项目构建</p>
<p>项目从编译、测试、运行、打包、安装 ，部署整个过程都交给maven进行管理，这个过程称为构建。</p>
<p>一键构建 指的是整个构建过程，使用maven一个命令可以轻松完成整个工作。</p>
<p>Maven规范化构建流程</p>
<p>清理	➡	编译	➡	测试	➡	报告	➡	打包	➡	部署<br>二 Maven安装和使用<br>2.1 Maven下载和安装<br>2.1.1 Maven下载<br>Maven官网下载地址:<a target="_blank" rel="noopener" href="http://maven.apache.org/download.cgi">http://maven.apache.org/download.cgi</a></p>
<p>目前使用@3.5版本</p>
<p>2.1.2 Maven安装<br>将apache-maven-3.5.2-bin.zip解压并添加至path</p>
<p>maven目录结构</p>
<p>目录	介绍<br>bin	存放了 maven 的命令<br>boot	存放了一些 maven 本身的引导程序，如类加载器等<br>conf	存放了 maven 的一些配置文件，如 setting.xml 文件<br>lib	存放了 maven 本身运行所需的一些 jar 包<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>apache-maven-3.5.2<br>├── LICENSE<br>├── NOTICE<br>├── README.txt<br>├── bin<br>│   ├── m2.conf<br>│   ├── mvn<br>│   ├── mvn.cmd<br>│   ├── mvnDebug<br>│   ├── mvnDebug.cmd<br>│   └── mvnyjp<br>├── boot<br>│   └── plexus-classworlds-2.5.2.jar<br>├── conf<br>│   ├── logging<br>│   ├── settings.xml<br>│   └── toolchains.xml<br>└── lib<br>    ├── aopalliance-1.0.jar<br>        ├── …省略<br>    └── wagon-provider-api.license</p>
<p>7 directories, 91 files<br>2.1.3 Maven及JDK配置<br>Maven 3.3+ require JDK 1.7 or above to execute - they still allow you to build against 1.3 and other JDK versions by Using Toolchains</p>
<p>配置PATH</p>
<p>1<br>2<br>3<br>4<br>5<br>vi .zshrc</p>
<p>#MAVEN_HOME<br>export MAVEN_HOME&#x3D;&#x2F;Users&#x2F;swzxsyh&#x2F;Program&#x2F;apache-maven-3.5.2<br>export PATH&#x3D;$PATH:$MAVEN_HOME&#x2F;bin<br>2.1.4 Maven软件版本测试<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br> ~ #mvn -v<br>Apache Maven 3.5.2 (138edd61fd100ec658bfa2d307c43b76940a5d7d; 2017-10-18T15:58:13+08:00)<br>Maven home: &#x2F;Users&#x2F;swzxsyh&#x2F;Program&#x2F;apache-maven-3.5.2<br>Java version: 1.8.0_221, vendor: Oracle Corporation<br>Java home: &#x2F;Library&#x2F;Java&#x2F;JavaVirtualMachines&#x2F;jdk1.8.0_221.jdk&#x2F;Contents&#x2F;Home&#x2F;jre<br>Default locale: en_CN, platform encoding: UTF-8<br>OS name: “mac os x”, version: “10.15.4”, arch: “x86_64”, family: “mac”<br>2.3 Maven仓库<br>2.3.1 Maven仓库的分类<br>Maven仓库分为本地仓库和远程仓库二大类。而远程仓库又可分成中央仓库，私服，第三方仓库。</p>
<p>Maven仓库	<br>本地仓库		远程仓库<br>⬇<br>中央仓库<br>私服<br>第三方公共库<br>依赖寻找流程</p>
<p>在本地仓库中，根据Maven坐标系寻找指定依赖，如果存在，直接返回。</p>
<p>如果Maven仓库中不存在，或者需要检查依赖的版本时，maven则会去远程仓库中寻找，下载到本地仓库中再使 用。</p>
<p>本地仓库</p>
<p>用来存储从远程仓库下载的插件和jar包，项目使用一些插件或jar包，优先从本地仓库查找。</p>
<p>中央仓库</p>
<p>在maven软件中内置一个远程仓库地址<a target="_blank" rel="noopener" href="http://repo1.maven.org/maven2">http://repo1.maven.org/maven2</a> ，它是中央仓库，服务于整个互联网，它是由Maven团队自己维护，里面存储了非常全的jar包，它包含了世界上大部分流行的开源项目构件。</p>
<p>第三方公共库</p>
<p>Maven 仓库默认中央仓库在国外且只有一个， 国内使用难免很慢，我们可以更换为第三方公共库，例如:阿里云镜 像。</p>
<p>私服</p>
<p>私服是一种特殊的远程仓库，其内容是来自于其他的远程仓库，一般架设在局域网内，提供给一个组织的人员使用。 当Maven需要下载依赖时，从私服请求，如果私服上不存在该依赖，则从其他远程仓库下载，同时缓存在私服上，提 供给其他人使用。如果项目中的一些内部模块，无法发布到外部远程仓库中，也可发布在私服上，提供给项目中的其 他人员使用。</p>
<p>2.3.2 Maven本地仓库的配置<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>cd  $MAVEN_HOME&#x2F;conf<br>vi settings.xml</p>
<h1 id="找到"><a href="#找到" class="headerlink" title="找到"></a>找到</h1><p><settings xmlns="http://maven.apache.org/SETTINGS/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd"><br>  <!-- localRepository
   | The path to the local repository maven will use to store artifacts.
   |
   | Default: ${user.home}/.m2/repository
  <localRepository>/path/to/local/repo</localRepository>
  --><br>  将<localRepository>&#x2F;path&#x2F;to&#x2F;local&#x2F;repo</localRepository>改为本地仓库路径添加到注释后<br>2.3.4 Maven仓库国内镜像配置<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br><mirrors><br>  <!-- mirror
   | Specifies a repository mirror site to use instead of a given repository. The repository that
   | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used
   | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.
   |
  <mirror>
    <id>mirrorId</id>
    <mirrorOf>repositoryId</mirrorOf>
    <name>Human Readable Name for this Mirror.</name>
    <url>http://my.repository.com/repo/path</url>
  </mirror>
   --><br>  <!-- 添加阿里云镜像 --><br><mirror><br>    <id>alimaven</id><br>    <name>aliyun maven</name><br>    <url><a target="_blank" rel="noopener" href="http://maven.aliyun.com/nexus/content/groups/public/">http://maven.aliyun.com/nexus/content/groups/public/</a></url><br>    <mirrorOf>central</mirrorOf><br>  </mirror><br></mirrors><br>2.3.4 全局setting与用户setting<br>maven仓库地址、私服等配置信息需要在setting.xml文件中配置，分为全局配置和用户配置。</settings></p>
<p>在maven安装目录下 的有 conf&#x2F;setting.xml文件，此setting.xml文件用于maven的所有project项目，它作为maven的全局配置。 如需要 个性配置则需要在用户配置中设置，用户配置的setting.xml文件默认的位置在:${user.dir} &#x2F;.m2&#x2F;settings.xml目录 中,${user.dir} 指windows 中的用户目录。</p>
<p>maven会先找用户配置，如果找到则以用户配置文件为准，否则使用全 局配置文件。</p>
<p>2.3 Maven坐标和依赖<br>Maven的一个核心的作用就是管理项目的依赖，引入我们所需的各种jar包等。为了能自动化的解析任何一个Java构 件，Maven必须将这些Jar包或者其他资源进行唯一标识，这是管理项目的依赖的基础，也就是我们要说的坐标。包 括我们自己开发的项目，也是要通过坐标进行唯一标识的，这样才能才其它项目中进行依赖引用。</p>
<p>坐标的定义元素如下</p>
<p>元素	作用<br>groupId	定义当前Maven项目名称<br>artifactId	定义项目模块<br>version	定义当前项目的当前版本<br>例如</p>
<p>创建一个Maven的web项目，在pom.xml文件中生成坐标</p>
<p>1<br>2<br>3<br>4<br>5</p>
<!--当前项目坐标--> 
<p><groupId>com.test</groupId><br><artifactId>maven_helloword</artifactId><br><version>1.0-SNAPSHOT</version><br><packaging>war</packaging><br>要引入junit的测试jar，只需要在pom.xml配置文件中配置引入junit的坐标依赖即可</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13</p>
<!-- 依赖关系 --> 
<dependencies>
<!-- 此项目运行使用junit，所以此项目依赖junit --> 
  <dependency>
<!-- junit的项目名称 --> 
    <groupId>junit</groupId>
<!-- junit的模块名称 --> 
    <artifactId>junit</artifactId> <!-- junit版本 --> 
    <version>4.12</version>
<!-- 依赖范围:单元测试时使用junit -->
        <scope>test</scope>
    </dependency>
</dependencies>
2.4 Maven工程的认识
2.4.1 Maven工程的目录结构
作为一个maven工程，它的src目录和pom.xml是必备的。

<p>1<br>2<br>3<br>4<br>├── maven_java.iml<br>├── pom.xml<br>├── src<br>└── target<br>进入src目录后，我们发现它里面的目录结构如下</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>src<br>├── main<br>│   ├── java					#项目代码<br>│   ├── resources			#配置文件<br>│   └── webapp				#页面资源<br>└── test<br>        ├── java					#测试代码<br>    └──resources 					</p>
<p>6 directories, 0 files<br>文件	说明<br>src&#x2F;main&#x2F;java	存放项目的.java文件<br>src&#x2F;main&#x2F;resources	存放项目资源文件，如spring, mybatis配置文件<br>src&#x2F;test&#x2F;java	存放所有单元测试.java文件，如junit测试类<br>src&#x2F;test&#x2F;resources	测试资源文件<br>target	项目输出位置，编译后的class文件会输出到此目录<br>pom.xml	maven项目核心配置文<br>注意:如果是普通的java项目，那么就没有webapp目录。<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>完整java项目<br>    java工程名（项目名）<br>        |– src目录<br>            |– main目录（主干代码）<br>                |– java目录（java代码）<br>                |– resources目录（配置文件）<br>            |– test目录（测试代码）<br>                |– java目录（java代码）<br>                |– resources目录（配置文件）<br>        |– pom.xml（maven工程核心配置文件）<br>        |– target目录（存放编译后的class文件…..）</p>
<ul>
<li>web项目【重点】<br>  web工程名（项目名）<br>  |– src目录<br>      |– main目录（主干代码）<br>          |– java目录（java代码）<br>          |– resources目录（配置文件）<br>          |– webapp目录（页面资源）<br>              |– WEB-INF<br>                  |– web.xml(web工程核心配置文件)<br>              |– index.jsp<br>              |– css、js、img..<br>      |– test目录（测试代码）<br>          |– java目录（java代码）<br>          |– resources目录（配置文件）<br>  |– pom.xml（maven工程核心配置文件）<br>  |– target目录（存放编译后的class文件…..）<br>2.4.2 Maven工程的运行<br>进入maven工程目录(当前目录有pom.xml文件)，运行tomcat7:run命令</li>
</ul>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>~ mvn tomcat7:run</p>
<p>[INFO] Scanning for projects…<br>[INFO]<br>[INFO] ————————————————————————<br>[INFO] Building maven_web 1.0-SNAPSHOT<br>[INFO] ————————————————————————<br>[INFO]<br>[INFO] &gt;&gt;&gt; tomcat7-maven-plugin:2.2:run (default-cli) &gt; process-classes @ maven_web &gt;&gt;&gt;<br>[INFO]<br>[INFO] — maven-resources-plugin:2.6:resources (default-resources) @ maven_web —<br>[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!<br>[INFO] Copying 0 resource<br>[INFO]<br>[INFO] — maven-compiler-plugin:3.1:compile (default-compile) @ maven_web —<br>[INFO] Changes detected - recompiling the module!<br>[INFO] Compiling 1 source file to &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;classes<br>[INFO]<br>[INFO] &lt;&lt;&lt; tomcat7-maven-plugin:2.2:run (default-cli) &lt; process-classes @ maven_web &lt;&lt;&lt;<br>[INFO]<br>[INFO]<br>[INFO] — tomcat7-maven-plugin:2.2:run (default-cli) @ maven_web —<br>[INFO] Running war on <a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080/</a><br>[INFO] Creating Tomcat server configuration at &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;tomcat<br>[INFO] create webapp with contextPath:<br>May 15, 2020 10:29:37 PM org.apache.coyote.AbstractProtocol init<br>INFO: Initializing ProtocolHandler [“http-bio-8080”]<br>May 15, 2020 10:29:37 PM org.apache.catalina.core.StandardService startInternal<br>INFO: Starting service Tomcat<br>May 15, 2020 10:29:37 PM org.apache.catalina.core.StandardEngine startInternal<br>INFO: Starting Servlet Engine: Apache Tomcat&#x2F;7.0.47<br>May 15, 2020 10:29:38 PM org.apache.coyote.AbstractProtocol start<br>INFO: Starting ProtocolHandler [“http-bio-8080”]<br>根据上边的提示信息,访问<a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080/</a> 即可</p>
<p>三.Maven生命周期和插件<br>3.1 Maven常用命令和插件<br>3.1.1 clean<br>clean是maven工程的清理命令，执行 clean会删除target目录及内容。</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>~ mvn clean</p>
<p>[INFO] Scanning for projects…<br>[INFO]<br>[INFO] ————————————————————————<br>[INFO] Building maven_web 1.0-SNAPSHOT<br>[INFO] ————————————————————————<br>[INFO]<br>[INFO] — maven-clean-plugin:2.5:clean (default-clean) @ maven_web —<br>[INFO] Deleting &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target<br>[INFO] ————————————————————————<br>[INFO] BUILD SUCCESS<br>[INFO] ————————————————————————<br>[INFO] Total time: 0.228 s<br>[INFO] Finished at: 2020-05-15T23:52:52+08:00<br>[INFO] Final Memory: 9M&#x2F;309M<br>[INFO] ————————————————————————<br>3.1.2 compile<br>compile是maven工程的编译命令，作用是将src&#x2F;main&#x2F;java下的文件编译为class文件输出到target目录下。</p>
<p>将src中main目录下java代码进行编译，将src中main目录下配置抽取，输出到target目录: classes目录</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>~ mvn compile</p>
<p>[INFO] Scanning for projects…<br>[INFO]<br>[INFO] ————————————————————————<br>[INFO] Building maven_web 1.0-SNAPSHOT<br>[INFO] ————————————————————————<br>[INFO]<br>[INFO] — maven-resources-plugin:2.6:resources (default-resources) @ maven_web —<br>[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!<br>[INFO] Copying 0 resource<br>[INFO]<br>[INFO] — maven-compiler-plugin:3.1:compile (default-compile) @ maven_web —<br>[INFO] Changes detected - recompiling the module!<br>[INFO] Compiling 1 source file to &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;classes<br>[INFO] ————————————————————————<br>[INFO] BUILD SUCCESS<br>[INFO] ————————————————————————<br>[INFO] Total time: 0.952 s<br>[INFO] Finished at: 2020-05-15T23:56:28+08:00<br>[INFO] Final Memory: 13M&#x2F;209M<br>[INFO] ————————————————————————</p>
<p>～ ll  .&#x2F;target&#x2F;classes&#x2F;cn&#x2F;itcast&#x2F;web&#x2F;servlet&#x2F;</p>
<p>total 8<br>-rw-r–r–  1 swzxsyh  staff   1.1K May 15 23:56 HelloServlet.class<br>3.1.3 test<br>test是maven工程的测试命令 mvn test，会执行src&#x2F;test&#x2F;java下的单元测试类，并编译为class文件。</p>
<p>mvn test&#x3D;&gt;target编译main代码&#x3D;&gt;编译test代码&#x3D;&gt;执行所有测试代码，类名xxxTest结尾，必须有@Test注解的方法</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>~ mvn test</p>
<p>[INFO] Scanning for projects…<br>[INFO]<br>[INFO] ————————————————————————<br>[INFO] Building maven_web 1.0-SNAPSHOT<br>[INFO] ————————————————————————<br>[INFO] </p>
<p>#清理target目录<br>[INFO] — maven-resources-plugin:2.6:resources (default-resources) @ maven_web —<br>[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!<br>[INFO] Copying 0 resource<br>[INFO]<br>#编译src&#x2F;main主干<br>[INFO] — maven-compiler-plugin:3.1:compile (default-compile) @ maven_web —<br>[INFO] Nothing to compile - all classes are up to date<br>[INFO]<br>#编译src&#x2F;test测试目录<br>[INFO] — maven-resources-plugin:2.6:testResources (default-testResources) @ maven_web —<br>[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!<br>[INFO] Copying 0 resource<br>[INFO]<br>[INFO] — maven-compiler-plugin:3.1:testCompile (default-testCompile) @ maven_web —<br>[INFO] Changes detected - recompiling the module!<br>[INFO] Compiling 1 source file to &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;test-classes<br>[INFO] </p>
<h1 id="针对test目录下的测试代码，逐一测试"><a href="#针对test目录下的测试代码，逐一测试" class="headerlink" title="针对test目录下的测试代码，逐一测试"></a>针对test目录下的测试代码，逐一测试</h1><p>[INFO] — maven-surefire-plugin:2.12.4:test (default-test) @ maven_web —<br>[INFO] Surefire report directory: &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;surefire-reports</p>
<hr>
<h2 id="T-E-S-T-S"><a href="#T-E-S-T-S" class="headerlink" title=" T E S T S"></a> T E S T S</h2><p>Running cn.itcast.test.HelloTest<br>仅在测试期有效<br>Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.065 sec</p>
<p>Results :</p>
<p>Tests run: 1, Failures: 0, Errors: 0, Skipped: 0</p>
<p>[INFO] ————————————————————————<br>[INFO] BUILD SUCCESS<br>[INFO] ————————————————————————<br>[INFO] Total time: 1.509 s<br>[INFO] Finished at: 2020-05-16T00:00:02+08:00<br>[INFO] Final Memory: 15M&#x2F;212M<br>[INFO] ————————————————————————<br>3.1.4 package<br>package是maven工程的打包命令，对于java工程执行package打成jar包，对于web工程打成war包。</p>
<p>mvn package&#x3D;&gt;编译main代码&#x3D;&gt;编译test代码&#x3D;&gt;执行测试&#x3D;&gt;将项目打成war包</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>~ mvn package</p>
<p>[INFO] Scanning for projects…<br>[INFO]<br>[INFO] ————————————————————————<br>[INFO] Building maven_web 1.0-SNAPSHOT<br>[INFO] ————————————————————————<br>[INFO]<br>[INFO] — maven-resources-plugin:2.6:resources (default-resources) @ maven_web —<br>[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!<br>[INFO] Copying 0 resource<br>[INFO]<br>[INFO] — maven-compiler-plugin:3.1:compile (default-compile) @ maven_web —<br>[INFO] Nothing to compile - all classes are up to date<br>[INFO]<br>[INFO] — maven-resources-plugin:2.6:testResources (default-testResources) @ maven_web —<br>[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!<br>[INFO] Copying 0 resource<br>[INFO]<br>[INFO] — maven-compiler-plugin:3.1:testCompile (default-testCompile) @ maven_web —<br>[INFO] Nothing to compile - all classes are up to date<br>[INFO]<br>[INFO] — maven-surefire-plugin:2.12.4:test (default-test) @ maven_web —<br>[INFO] Surefire report directory: &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;surefire-reports</p>
<hr>
<h2 id="T-E-S-T-S-1"><a href="#T-E-S-T-S-1" class="headerlink" title=" T E S T S"></a> T E S T S</h2><p>Running cn.itcast.test.HelloTest<br>仅在测试期有效<br>Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.048 sec</p>
<p>Results :</p>
<p>Tests run: 1, Failures: 0, Errors: 0, Skipped: 0</p>
<p>[INFO]<br>[INFO] — maven-war-plugin:2.2:war (default-war) @ maven_web —<br>[INFO] Packaging webapp<br>[INFO] Assembling webapp [maven_web] in [&#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;maven_web-1.0-SNAPSHOT]<br>[INFO] Processing war project<br>[INFO] Copying webapp resources [&#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;src&#x2F;main&#x2F;webapp]<br>[INFO] Webapp assembled in [49 msecs]<br>[INFO] Building war: &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;maven_web-1.0-SNAPSHOT.war<br>[INFO] WEB-INF&#x2F;web.xml already added, skipping<br>[INFO] ————————————————————————<br>[INFO] BUILD SUCCESS<br>[INFO] ————————————————————————<br>[INFO] Total time: 1.528 s<br>[INFO] Finished at: 2020-05-16T00:05:14+08:00<br>[INFO] Final Memory: 12M&#x2F;294M<br>[INFO] ————————————————————————</p>
<p>~ find . -name ‘*war’<br>.&#x2F;target&#x2F;maven_web-1.0-SNAPSHOT.war<br>#此包可以直接放在tomcat的webapp下执行<br>注意：为什么maven_hello是war包而不是jar包呢？</p>
<p>1<br>2<br>3<br>cat pom.xml| grep -ri ‘packaging’<br>(standard input):    <packaging>war</packaging><br>#导包方式：jar默认，手动指定war<br>3.1.5 install<br>install是maven工程的安装命令，执行install将maven打成jar包或war包发布到本地仓库。</p>
<p>mvn install&#x3D;&gt;编译main代码&#x3D;&gt;编译test代码&#x3D;&gt;执行测试&#x3D;&gt;将项目打成war包&#x3D;&gt;安装到本地库</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>~ mvn install</p>
<p>[INFO] Scanning for projects…<br>[INFO]<br>[INFO] ————————————————————————<br>[INFO] Building maven_web 1.0-SNAPSHOT<br>[INFO] ————————————————————————<br>[INFO]<br>[INFO] — maven-resources-plugin:2.6:resources (default-resources) @ maven_web —<br>[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!<br>[INFO] Copying 0 resource<br>[INFO]<br>[INFO] — maven-compiler-plugin:3.1:compile (default-compile) @ maven_web —<br>[INFO] Nothing to compile - all classes are up to date<br>[INFO]<br>[INFO] — maven-resources-plugin:2.6:testResources (default-testResources) @ maven_web —<br>[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!<br>[INFO] Copying 0 resource<br>[INFO]<br>[INFO] — maven-compiler-plugin:3.1:testCompile (default-testCompile) @ maven_web —<br>[INFO] Nothing to compile - all classes are up to date<br>[INFO]<br>[INFO] — maven-surefire-plugin:2.12.4:test (default-test) @ maven_web —<br>[INFO] Surefire report directory: &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;surefire-reports</p>
<hr>
<h2 id="T-E-S-T-S-2"><a href="#T-E-S-T-S-2" class="headerlink" title=" T E S T S"></a> T E S T S</h2><p>Running cn.itcast.test.HelloTest<br>仅在测试期有效<br>Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.053 sec</p>
<p>Results :</p>
<p>Tests run: 1, Failures: 0, Errors: 0, Skipped: 0</p>
<p>[INFO]<br>[INFO] — maven-war-plugin:2.2:war (default-war) @ maven_web —<br>[INFO] Packaging webapp<br>[INFO] Assembling webapp [maven_web] in [&#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;maven_web-1.0-SNAPSHOT]<br>[INFO] Processing war project<br>[INFO] Copying webapp resources [&#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;src&#x2F;main&#x2F;webapp]<br>[INFO] Webapp assembled in [32 msecs]<br>[INFO] Building war: &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;maven_web-1.0-SNAPSHOT.war<br>[INFO] WEB-INF&#x2F;web.xml already added, skipping<br>[INFO] </p>
<h1 id="将自己的代码，编译到本地仓库，之后可以上传到远程仓库，服务器自动下载部署"><a href="#将自己的代码，编译到本地仓库，之后可以上传到远程仓库，服务器自动下载部署" class="headerlink" title="将自己的代码，编译到本地仓库，之后可以上传到远程仓库，服务器自动下载部署"></a>将自己的代码，编译到本地仓库，之后可以上传到远程仓库，服务器自动下载部署</h1><p>[INFO] — maven-install-plugin:2.4:install (default-install) @ maven_web —<br>[INFO] Installing &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;target&#x2F;maven_web-1.0-SNAPSHOT.war to &#x2F;Users&#x2F;swzxsyh&#x2F;Program&#x2F;repository&#x2F;cn&#x2F;itcast&#x2F;maven_web&#x2F;1.0-SNAPSHOT&#x2F;maven_web-1.0-SNAPSHOT.war<br>[INFO] Installing &#x2F;Users&#x2F;swzxsyh&#x2F;Downloads&#x2F;Day54-maven基础&amp;环境搭建&#x2F;代码&#x2F;maven_web&#x2F;pom.xml to &#x2F;Users&#x2F;swzxsyh&#x2F;Program&#x2F;repository&#x2F;cn&#x2F;itcast&#x2F;maven_web&#x2F;1.0-SNAPSHOT&#x2F;maven_web-1.0-SNAPSHOT.pom<br>[INFO] ————————————————————————<br>[INFO] BUILD SUCCESS<br>[INFO] ————————————————————————<br>[INFO] Total time: 1.522 s<br>[INFO] Finished at: 2020-05-16T00:08:09+08:00<br>[INFO] Final Memory: 12M&#x2F;297M<br>[INFO] ————————————————————————<br>从运行结果中，可以看出: 当后面的命令执行时，前面的操作过程也都会自动执行</p>
<p>3.1.6 deploy<br>maven工程部署命令，将jar或war包部署（上传）到私服中。</p>
<p>3.2 Maven生命周期<br>maven对项目构建过程分为三套相互独立的生命周期，请注意这里说的是“三套”，而且“相互独立”。</p>
<p>在同一个生命周期中的命令,执行后面的命令,前面的命令自动执行</p>
<p>三套名称	描述	命令<br>Clean Lifecycle	在进行真正的构建之前进行一些清理工作。	clean<br>Default Lifecycle	构建的核心部分，编译，测试，打包，部署等等。	compile,test,package,install,deploy<br>Site Lifecycle	生成项目报告，站点，发布站点。	site<br>3.2.1 clean生命周期 clean生命周期的目的是清理项目<br>阶段	描述<br>pre-clean	执行一些需要在clean之前完成的工作<br>clean	移除所有上一次构建生成的文件<br>post-clean	执行一些需要在clean之后立刻完成的工作<br>3.2.2 default生命周期<br>default生命周期定义了真正构件时所需要执行的所有步骤，它是生命周期中最核心的部分</p>
<p>生命周期阶段	描述<br>validate(校验)	校验项目是否正确并且所有必要的信息可以完成项目的构建过程。<br>initialize(初始化)	初始化构建状态，比如设置属性值。<br>generate-sources(生成源代码)	生成包含在编译阶段中的任何源代码。<br>process-sources(处理源代码)	处理源代码，比如说，过滤任意值。<br>generate-resources(生成资源文件)	生成将会包含在项目包中的资源文件。<br>process-resources (处理资源文件)	复制和处理资源到目标目录，为打包阶段最好准备。<br>compile(编译)	编译项目的源代码。<br>process-classes(处理类文件)	处理编译生成的文件，比如说对Java class文件做字节码改善优化。<br>generate-test-sources(生成测试源代 码)	生成包含在编译阶段中的任何测试源代码。<br>process-test-sources(处理测试源代 码)	处理测试源代码，比如说，过滤任意值。<br>generate-test-resources(生成测试资源 文件)	为测试创建资源文件。<br>process-test-resources(处理测试资源 文件)	复制和处理测试资源到目标目录。<br>test-compile(编译测试源码)	编译测试源代码到测试目标目录.<br>process-test-classes(处理测试类文件)	处理测试源码编译生成的文件。<br>test(测试)	使用合适的单元测试框架运行测试(Juint是其中之一)。<br>prepare-package(准备打包)	在实际打包之前，执行任何的必要的操作为打包做准备。<br>package(打包)	将编译后的代码打包成可分发格式的文件，比如JAR、WAR或者 EAR文件。<br>pre-integration-test(集成测试前)	在执行集成测试前进行必要的动作。比如说，搭建需要的环境。<br>integration-test(集成测试)	处理和部署项目到可以运行集成测试环境中。<br>post-integration-test(集成测试后)	在执行集成测试完成后进行必要的动作。比如说，清理集成测试 环境。<br>verify (验证)	运行任意的检查来验证项目包有效且达到质量标准。<br>install(安装)	安装项目包到本地仓库，这样项目包可以用作其他本地项目的依赖。<br>deploy(部署)	将最终的项目包复制到远程仓库中与其他开发者和项目共享。<br>3.2.3 site生命周期<br>site生命周期的目的是建立和发布项目站点，Maven能够基于POM所包含的信息，自动生成一个友好的站点，方便团 队交流和发布项目信息。</p>
<p>阶段	描述<br>pre-site	执行一些需要在生成站点文档之前完成的工作<br>site	生成项目的站点文档<br>post-site	执行一些需要在生成站点文档之后完成的工作，并且为部署做准备<br>site-deploy	将生成的站点文档部署到特定的服务器上<br>3.3 Maven概念模型<br>Maven 包含了一个项目对象模型 (POM:Project Object Model)，一组标准集合，一个项目生命周期(Project Lifecycle)，一个依赖管理系统(Dependency Management System)，和用来运行定义在生命周期阶段(phase)中插 件(plugin)目标(goal)的逻辑。</p>
<p>项目对象模型 (Project Object Model)</p>
<p>一个maven工程都有一个pom.xml文件，通过pom.xml文件定义项目的坐标、项目依赖、项目信息、插件目标等。</p>
<p>依赖管理系统(Dependency Management System)</p>
<p>通过maven的依赖管理对项目所依赖的jar 包进行统一管理。比如:项目依赖junit4.12，通过在pom.xml中定义 junit4.12的依赖即使用junit4.12，如下所示是junit4.12的依赖定义:</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8</p>
<!-- 依赖关系 --> <dependencies>
<!-- 此项目运行使用junit，所以此项目依赖junit --> <dependency>
<!-- junit的项目名称 --> <groupId>junit</groupId>
<!-- junit的模块名称 --> <artifactId>junit</artifactId> <!-- junit版本 --> <version>4.12</version>
<!-- 依赖范围:单元测试时使用junit -->
<pre><code>    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
</dependency></dependencies>
一个项目生命周期(Project Lifecycle)

<p>使用maven完成项目的构建，项目构建包括:清理、编译、测试、部署等过程，maven将这些过程规范为一个生命</p>
<p>周期</p>
<p>清理	➡	编译	➡	测试	➡	报告	➡	打包	➡	部署<br>一组标准集合</p>
<p>maven将整个项目管理过程定义一组标准。</p>
<p>比如:通过maven构建工程有标准的目录结构，有标准的生命周期阶 段、依赖管理有标准的坐标定义等。</p>
<p>插件(plugin)目标(goal)</p>
<p>maven 管理项目生命周期过程都是基于插件完成的。</p>
<p>四.IDEA创建Maven工程<br>4.1 IDEA配置本地Maven<br>进入configure–&gt;settings–&gt;build–&gt;build tools–&gt;Maven中，设置maven工具和本地仓库</p>
<p>进入configure–&gt;settings–&gt;build–&gt;build tools–&gt;Maven–&gt;Runner中，设置VM Options:-DarchetypeCatalog&#x3D;internal -Dfile.encoding&#x3D;GB2312</p>
<p>4.2 IDEA创建工程<br>Java工程</p>
<p>选择Maven，下一步，设置GroupID域名倒写，ArtifactID项目名，Version版本号</p>
<p>手动创建test测试配置文件目录</p>
<p>test目录右击创建resources目录，然后Mark Directory AS选Resources Root</p>
<p>指定maven环境的jdk版本和字符集</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17</p>
<!-- pom.xml -->

<build>
    <plugins>
        <!-- 设置编译版本为1.8 -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.1</version>
            <configuration>
                <source>1.8
                <target>1.8</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
    </plugins>
</build>
maven工程命令操作

<p>打开右侧maven栏，双击命令即可</p>
<p>如何导入依赖</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12</p>
<!-- pom.xml -->  

<!--依赖管理-->
  <dependencies>
    <!--mysql驱动-->
    <dependency>
      <groupId>mysql</groupId>
      <artifactId>mysql-connector-java</artifactId>
      <version>5.1.47</version>
      <scope>runtime</scope>
    </dependency>
</dependencies>
安装一个插件JBLJavaToWeb

<p>点击项目，选择插件功能JBLJavaToWeb即可将Java项目转换为Web项目</p>
<p>4.3 发布web工程<br>idea使用外置tomcat运行</p>
<p>Add Configurations–&gt;ADD&#x3D;&gt;Tomcat(Local)，设置名称Tomcat，其他跟之前项目一样</p>
<p>idea使用maven内置tomcat插件</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br><build><br>        <plugins><br>            <!-- 设置编译版本为1.8 --><br>            <plugin><br>                <groupId>org.apache.maven.plugins</groupId><br>                <artifactId>maven-compiler-plugin</artifactId><br>                <version>3.1</version><br>                <configuration><br>                    <source>1.8<br>                    <target>1.8</target><br>                    <encoding>UTF-8</encoding><br>                </configuration><br>            </plugin><br>            <plugin><br>                <groupId>org.apache.tomcat.maven</groupId><br>                <artifactId>tomcat7-maven-plugin</artifactId><br>                <version>2.2</version><br>                <configuration><br>                    <port>8080</port><br>                    <path></path>&#x2F;<br>                    <uriEncoding>utf-8</uriEncoding><br>                </configuration><br>            </plugin><br>        </plugins><br>    </build><br>4.4 依赖管理<br>我们不考虑依赖范围引起的问题</p>
<p>依赖范围	对于编译classpath有效	对于测试classpath有效	对于运行时classpath有效	例子<br>compile（默认）	Y	Y	Y	mybatis<br>test	-	Y	-	junit<br>provided	Y	Y	-	servlet-api<br>runtime	-	Y	Y	JDBC驱动<br>system	Y	Y	-	本地，maven仓库之外的库<br>依赖范围	描述<br>compile	默认依赖范围，作用域在编译、测试、运行时都有效。<br>test	作用域在测试时有效。编译和运行时不需要，比如：Junit。<br>provided	作用域在编译、测试时有效。运行时不需要，比如： servlet api 被 tomcat 容器提供。<br>runtime	作用域在测试、运行时有效。编译时不需要，比如：jdbc的驱动包。<br>system	system范围依赖与provided类似，jar包在本地磁盘而不是maven仓库<br>在maven_web工程中测试scope:</p>
<p>默认引入 的jar包</p>
<p>compile 【默认范围 可以不写】(编译、测试、运行 都有效 )</p>
<p>servlet-api 、jsp-api</p>
<p>provided (编译、测试 有效， 运行时无效 防止和tomcat下jar冲突)</p>
<p>jdbc驱动jar包</p>
<p>runtime (测试、运行 有效 )</p>
<p>junit</p>
<p>test (测试有效)</p>
<p>依赖范围由强到弱的顺序是:compile&gt;provided&gt;runtime&gt;test</p>
<p>总结</p>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><h3 id="项目管理工具"><a href="#项目管理工具" class="headerlink" title="项目管理工具"></a>项目管理工具</h3><ul>
<li>依赖管理</li>
</ul>
<p>​ - 通过maven管理jar包的整个过程</p>
<ul>
<li>一键构建</li>
</ul>
<p>​ - 通过一个maven的一个命令就可以完成工程整个构建的过程</p>
<h2 id="安装和使用"><a href="#安装和使用" class="headerlink" title="安装和使用"></a>安装和使用</h2><h3 id="下载和安装"><a href="#下载和安装" class="headerlink" title="下载和安装"></a>下载和安装</h3><ul>
<li><p>下载 3.5.2 版本</p>
</li>
<li><p>安装解压到非中文路径</p>
</li>
<li><p>配置MAVEN_HOME环境变量</p>
</li>
</ul>
<p>​ - 依赖java环境</p>
<h2 id="仓库分类"><a href="#仓库分类" class="headerlink" title="仓库分类"></a>仓库分类</h2><h3 id="本地仓库"><a href="#本地仓库" class="headerlink" title="本地仓库"></a>本地仓库</h3><h3 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h3><ul>
<li><p>1.中央仓库</p>
</li>
<li><p>2.第三方远程仓库</p>
</li>
</ul>
<p>​ - 阿里云镜像</p>
<ul>
<li>3.私服</li>
</ul>
<h3 id="配置指定本地仓库"><a href="#配置指定本地仓库" class="headerlink" title="配置指定本地仓库"></a>配置指定本地仓库</h3><ul>
<li>帅哥提供5G</li>
</ul>
<p>​ - 不建议覆盖</p>
<h3 id="配置阿里云镜像"><a href="#配置阿里云镜像" class="headerlink" title="配置阿里云镜像"></a>配置阿里云镜像</h3><ul>
<li>提高下载速度</li>
</ul>
<h2 id="命令和插件"><a href="#命令和插件" class="headerlink" title="命令和插件"></a>命令和插件</h2><h3 id="1）clean"><a href="#1）clean" class="headerlink" title="1）clean"></a>1）clean</h3><ul>
<li>清理target目录</li>
</ul>
<h3 id="2）compile"><a href="#2）compile" class="headerlink" title="2）compile"></a>2）compile</h3><ul>
<li>编译 src&#x2F;main&#x2F;java</li>
</ul>
<h3 id="3）test"><a href="#3）test" class="headerlink" title="3）test"></a>3）test</h3><ul>
<li>测试 src&#x2F;test&#x2F;java</li>
</ul>
<h3 id="4）package"><a href="#4）package" class="headerlink" title="4）package"></a>4）package</h3><ul>
<li>将工程进行打包</li>
</ul>
<p>​ - jar</p>
<p>​ - war</p>
<h3 id="5）install"><a href="#5）install" class="headerlink" title="5）install"></a>5）install</h3><ul>
<li>将打包后的工程安装到本地仓库</li>
</ul>
<h3 id="6）deploy"><a href="#6）deploy" class="headerlink" title="6）deploy"></a>6）deploy</h3><ul>
<li>将本地仓库的jar包或war包上传到私服</li>
</ul>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><h3 id="清理生命周期"><a href="#清理生命周期" class="headerlink" title="清理生命周期"></a>清理生命周期</h3><ul>
<li>clean</li>
</ul>
<h3 id="默认生命周期"><a href="#默认生命周期" class="headerlink" title="默认生命周期"></a>默认生命周期</h3><ul>
<li>compile</li>
</ul>
<p>​ - test</p>
<p>​ - package</p>
<p>​ - install</p>
<p>​ - deploy</p>
<h3 id="站点生命周期"><a href="#站点生命周期" class="headerlink" title="站点生命周期"></a>站点生命周期</h3><ul>
<li>site</li>
</ul>
<h2 id="IDEA配置maven工具"><a href="#IDEA配置maven工具" class="headerlink" title="IDEA配置maven工具"></a>IDEA配置maven工具</h2><h3 id="全局settings配置"><a href="#全局settings配置" class="headerlink" title="全局settings配置"></a>全局settings配置</h3><ul>
<li><p>指定maven工具路径</p>
</li>
<li><p>指定maven工具配置文件路径</p>
</li>
<li><p>指定maven工具本地仓库的路径</p>
</li>
</ul>
<h3 id="指定本地创建maven时，使用本地骨架"><a href="#指定本地创建maven时，使用本地骨架" class="headerlink" title="指定本地创建maven时，使用本地骨架"></a>指定本地创建maven时，使用本地骨架</h3><ul>
<li>-DarchetypeCatalog&#x3D;internal -Dfile.encoding&#x3D;GB2312</li>
</ul>
<h2 id="IDEA创建maven工程"><a href="#IDEA创建maven工程" class="headerlink" title="IDEA创建maven工程"></a>IDEA创建maven工程</h2><h3 id="1-创建java工程"><a href="#1-创建java工程" class="headerlink" title="1)创建java工程"></a>1)创建java工程</h3><h3 id="2）创建web工程"><a href="#2）创建web工程" class="headerlink" title="2）创建web工程"></a>2）创建web工程</h3><ul>
<li>下载JBLJavaToWeb插件</li>
</ul>
<h2 id="IDEA发布web工程"><a href="#IDEA发布web工程" class="headerlink" title="IDEA发布web工程"></a>IDEA发布web工程</h2><h3 id="1）使用本地tomcat"><a href="#1）使用本地tomcat" class="headerlink" title="1）使用本地tomcat"></a>1）使用本地tomcat</h3><h3 id="2）使用tomcat插件"><a href="#2）使用tomcat插件" class="headerlink" title="2）使用tomcat插件"></a>2）使用tomcat插件</h3><ul>
<li>pom.xml</li>
</ul>
<h2 id="依赖范围"><a href="#依赖范围" class="headerlink" title="依赖范围"></a>依赖范围</h2><h3 id="1）我们编写的web工程需要手动导入servlet-api-坐标"><a href="#1）我们编写的web工程需要手动导入servlet-api-坐标" class="headerlink" title="1）我们编写的web工程需要手动导入servlet-api 坐标"></a>1）我们编写的web工程需要手动导入servlet-api 坐标</h3><h3 id="2）在打成-war包的时候将servlet-api-设置到-x2F-WEB-INF-x2F-lib目录下"><a href="#2）在打成-war包的时候将servlet-api-设置到-x2F-WEB-INF-x2F-lib目录下" class="headerlink" title="2）在打成 war包的时候将servlet-api 设置到 &#x2F;WEB-INF&#x2F;lib目录下"></a>2）在打成 war包的时候将servlet-api 设置到 &#x2F;WEB-INF&#x2F;lib目录下</h3><h3 id="3）如果与tomcat软件内置的版本不一致，可能会启动报错"><a href="#3）如果与tomcat软件内置的版本不一致，可能会启动报错" class="headerlink" title="3）如果与tomcat软件内置的版本不一致，可能会启动报错"></a>3）如果与tomcat软件内置的版本不一致，可能会启动报错</h3><h3 id="4）需要指定jar包的作用范围（provided）"><a href="#4）需要指定jar包的作用范围（provided）" class="headerlink" title="4）需要指定jar包的作用范围（provided）"></a>4）需要指定jar包的作用范围（provided）</h3><h3 id="有哪些依赖范围呢？"><a href="#有哪些依赖范围呢？" class="headerlink" title="有哪些依赖范围呢？"></a>有哪些依赖范围呢？</h3><ul>
<li>compile</li>
</ul>
<p>​ - 默认，在编译、测试、运行期有效</p>
<ul>
<li>test</li>
</ul>
<p>​ - 仅在测试期有效</p>
<ul>
<li>provided</li>
</ul>
<p>​ - 在编译、测试期有效</p>
<ul>
<li>runtime</li>
</ul>
<p>​ - 在测试、运行期有效</p>
<ul>
<li>system</li>
</ul>
<p>​ - 从本地中导入jar包</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/05/06/JDBC%E5%9F%BA%E7%A1%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/05/06/JDBC%E5%9F%BA%E7%A1%80/" class="post-title-link" itemprop="url">JDBC基础</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-05-06 01:35:06" itemprop="dateCreated datePublished" datetime="2020-05-06T01:35:06+08:00">2020-05-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.JDBC基础<br>1.1 概述<br>Java 数据库连接(Java DataBase Connectivity)</p>
<p>作用:通过Java语言操作数据库</p>
<p>本质:是官方(sun公司)定义的一套操作所有关系型数据库的规则(接口)。各个数据库厂商去实现这套接口，提 供数据库驱动jar包。我们可以使用这套接口(JDBC)编程，运行时的代码其实是驱动jar包中的实现类。</p>
<p>1.2 快速入门<br>需求</p>
<p>通过java代码向数据库user表插入一条记录</p>
<p>准备数据库和表</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>CREATE DATABASE Day48;<br>USE Day48;<br>CREATE TABLE USER<br>(<br>    id       INT PRIMARY KEY AUTO_INCREMENT,<br>    username VARCHAR(50),<br>    password VARCHAR(50)<br>);<br>INSERT INTO USER (username, password)<br>VALUES (‘admin’, ‘123’),<br>       (‘tom’, ‘123’),<br>       (‘jack’, ‘123’);</p>
<p>SELECT * FROM USER;<br>创建java工程，导入MySQL驱动jar包</p>
<p>mysql-connector-java-5.1.45-bin.jar</p>
<p>编写插入代码</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>public class JDBCDEMO {<br>    public static void main(String[] args) throws Exception {<br>        &#x2F;&#x2F;1.注册驱动<br>&#x2F;&#x2F;        DriverManager.registerDriver(new Driver());<br>        Class.forName(“com.mysql.jdbc.Driver”);<br>        &#x2F;&#x2F;2.建立连接<br>        Connection connection &#x3D; DriverManager.getConnection(“jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;Day48”, “root”, “root”);<br>        &#x2F;&#x2F;3.编写sql<br>        String sql &#x3D; “insert into user values(4,’lucy’,666)”;<br>        &#x2F;&#x2F;4.获取sql执行对象<br>        Statement statement &#x3D; connection.createStatement();<br>        &#x2F;&#x2F;5.执行sql并返回结果<br>        int i &#x3D; statement.executeUpdate(sql);<br>        &#x2F;&#x2F;6.处理结果<br>        if (i &gt; 0) {<br>            System.out.println(“Success”);<br>        } else {<br>            System.out.println(“Failed”);<br>        }<br>        &#x2F;&#x2F;7.释放资源<br>        statement.close();<br>        connection.close();<br>    }<br>}<br>1.3 API介绍<br>sun公司提供的:java.sql包下</p>
<p>DriverManager:驱动管理对象</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>1.注册驱动<br>        1)static void registerDriver(Driver driver)<br>        我们通过翻看MySQL Driver实现类的源码发现内部的静态代码已经提供了注册驱动功能<br>static {<br>        try{<br>                DriverManager.registerDriver(new Driver());<br>        }catch(SQLException var1){<br>                throw new RuntimeException(“Can’t register driver!”);<br>            }<br>        }<br>        2)反射<br>        Class.forName(“com.mysql.jdbc.Driver”);<br>        3)SPI 服务提供接口 【Service Provider Interface】<br>2.建立连接<br>static Connection getConnection(String url,String user,String password)<br>参数说明:<br>        url:连接指定数据库地址【固定格式】<br>        格式:jdbc:mysql:&#x2F;&#x2F;ip地址+端口&#x2F;数据库名<br>        实例:<br>        jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;day23<br>        jdbc:mysql:&#x2F;&#x2F;&#x2F;day23<br>      user:用户名<br>      password:密码<br>Connection:数据库连接对象</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13</p>
<ol>
<li>获取sql执行对象【小货车】<br>  Statement createStatement()<br>  PreparedStatement prepareStatement(String sql)  </li>
<li>事务管理<br> 1)关闭自动提交(开启事务)<br>     void setAutoCommit(boolean autoCommit)<br>   参数:<br>   true:自动提交【默认值】<br>   false:手动提交<br> 2)提交事务<br> void commit()<br> 3)回滚事务<br> void rollback()<br>Statement:执行sql的对象</li>
</ol>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10</p>
<ol>
<li>执行所有类型sql语句【了解】<br> boolean execute(String sql)</li>
<li>仅执行DML类型sql语句<br> int executeUpdate(String sql)<br>   参数:dml类型sql(insert、update、delete)<br>   返回值:影响行数</li>
<li>仅执行DQL类型sql语句<br> ResultSet executeQuery(String sql)<br> 参数:dql类型sql(select)<br> 返回值:结果集<br>ResultSet:结果集对象,封装查询结果</li>
</ol>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17</p>
<ol>
<li><p>指针下移<br> boolean next()<br>     返回值:<br>   true:表示此行有数据<br>   false:表示此行没有数据<br> while(resultSet.next){<br>     &#x2F;&#x2F;获取一行数据<br> }</p>
</li>
<li><p>获取数据<br>  根据制定列编号和数据类型获取<br> T getXxx(int 列编号)<br>  根据指定列名和数据类型获取<br> T getXxx(String 列名)</p>
<p> 补充:获取所有类型<br> Object getObject(String 列名)<br> String getString(String 列名)</p>
</li>
</ol>
<p>1.4 CRUD操作<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>&#x2F;&#x2F; 1.注册驱动<br>&#x2F;&#x2F; 2.建立连接<br>&#x2F;&#x2F; 3.编写sql<br>&#x2F;&#x2F; 4.获取sql执行对象 &#x2F;&#x2F; 5.执行sql并返回结果 &#x2F;&#x2F; 6.处理结果<br>&#x2F;&#x2F; 7.释放资源</p>
<p>public class CRUDDEMO {<br>    &#x2F;&#x2F;新增<br>    @Test<br>    public void testInsert() throws Exception {<br>        Class.forName(“com.mysql.jdbc.Driver”);<br>        Connection connection &#x3D; DriverManager.getConnection(“jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;Day48”, “root”, “root”);<br>        String sql &#x3D; “insert into user values(NULL,’testInsert’,666)”;<br>        Statement statement &#x3D; connection.createStatement();<br>        int i &#x3D; statement.executeUpdate(sql);<br>        if (i &gt; 0) {<br>            System.out.println(“Successful”);<br>        } else {<br>            System.out.println(“Failed”);<br>        }<br>        statement.close();<br>        connection.close();<br>    }</p>
<pre><code>//修改
@Test
public void testUpdate() throws Exception &#123;
    Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
    Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/Day48&quot;, &quot;root&quot;, &quot;root&quot;);
    String sql = &quot;UPDATE user SET username=&#39;testUpdate&#39; WHERE id = 4&quot;;
    Statement statement = connection.createStatement();
    int i = statement.executeUpdate(sql);
    if (i &gt; 0) &#123;
        System.out.println(&quot;Successful&quot;);
    &#125; else &#123;
        System.out.println(&quot;Failed&quot;);
    &#125;
    statement.close();
    connection.close();
&#125;

//删除
@Test
public void testAlter() throws Exception &#123;
    Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
    Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/Day48&quot;, &quot;root&quot;, &quot;root&quot;);
    String sql = &quot;delete from user WHERE id = 2&quot;;
    Statement statement = connection.createStatement();
    int i = statement.executeUpdate(sql);
    if (i &gt; 0) &#123;
        System.out.println(&quot;Successful&quot;);
    &#125; else &#123;
        System.out.println(&quot;Failed&quot;);
    &#125;
    statement.close();
    connection.close();
&#125;

//查询
@Test
public void testFindAll() throws Exception &#123;
    Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
    Connection connection = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/Day48&quot;, &quot;root&quot;, &quot;root&quot;);
    String sql = &quot;SELECT * FROM user&quot;;
    Statement statement = connection.createStatement();
    ResultSet resultSet = statement.executeQuery(sql);

    while (resultSet.next()) &#123;
        int id = resultSet.getInt(&quot;id&quot;);
        String username = resultSet.getString(&quot;username&quot;);
        String password = resultSet.getString(&quot;password&quot;);
        System.out.println(&quot;\tID:&quot; + id + &quot;\tUSERNAME:&quot; + username + &quot;\tPASSWORD:&quot; + password);
    &#125;
    resultSet.close();
    statement.close();
    connection.close();
&#125;
</code></pre>
<p>}<br>1.5 工具类<br>通过上面案例需求我们会发现每次去执行SQL语句都需要注册驱动，获取连接，得到Statement，以及释放资源。发</p>
<p>现很多重复的劳动，我们可以将重复的代码定义到一个工具类中。</p>
<p>目的:简化书写，一劳永逸</p>
<p>步骤分析</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>public class JdbcUtils{<br>&#x2F;&#x2F; 1.注册驱动【保证一次】<br>static{ }<br>&#x2F;&#x2F; 2.提供获取连接的静态方法<br>public static Connection getConnection(){<br>        return null;<br>    }<br>&#x2F;&#x2F; 3.提供释放资源的方法<br>  public void close(){<br>        }<br>}<br>1.5.1 版本一<br>该版本具有耦合性<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>public class JdbcUtils1 {<br>    &#x2F;&#x2F; 1.注册驱动【保证一次】<br>    static {<br>        try {<br>            Class.forName(“com.mysql.jdbc.Driver”);<br>        } catch (ClassNotFoundException e) {<br>            throw new RuntimeException(“Load JDBC Driver Failed”);<br>        }<br>    }</p>
<pre><code>// 2.提供获取连接的静态方法
public static Connection getConnection() throws SQLException &#123;
    return DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/Day48&quot;, &quot;root&quot;, &quot;root&quot;);
&#125;

// 3.提供释放资源的方法
public void close(ResultSet resultSet, Statement statement, Connection connection) &#123;
    if (resultSet != null) &#123;
        try &#123;
            resultSet.close();
        &#125; catch (SQLException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;
    if (statement != null) &#123;
        try &#123;
            statement.close();
        &#125; catch (SQLException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;
    if (connection != null) &#123;
        try &#123;
            connection.close();
        &#125; catch (SQLException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;
&#125;

// 重载关闭方法
public static void close(Statement statement, Connection connection) &#123;
    close(statement, connection);
&#125;
</code></pre>
<p>}</p>
<p>1.5.2 版本二<br>解耦合版本</p>
<p>1<br>2<br>3<br>4<br>5<br>#K-V<br>jdbc.driver&#x3D;com.mysql.jdbc.Driver<br>jdbc.url&#x3D;jdbc:mysql:&#x2F;&#x2F;localhost:3306&#x2F;Day48<br>jdbc.user&#x3D;root<br>jdbc.password&#x3D;root<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>public class JdbcUitls {</p>
<pre><code>// 声明变量
private static String driver = null;
private static String url = null;
private static String user = null;
private static String password = null;

// 加载jdbc.properties配置文件，初始化变量
static &#123;
    ResourceBundle jdbc = ResourceBundle.getBundle(&quot;jdbc&quot;);
    driver = jdbc.getString(&quot;jdbc.driver&quot;);
    url = jdbc.getString(&quot;jdbc.url&quot;);
    user = jdbc.getString(&quot;jdbc.user&quot;);
    password = jdbc.getString(&quot;jdbc.password&quot;);
&#125;

// 1.注册驱动【保证一次】
static &#123;
    try &#123;
        Class.forName(driver);
    &#125; catch (ClassNotFoundException e) &#123;
        throw new RuntimeException(&quot;Load Driver Failed&quot;);
    &#125;
&#125;

// 2.提供获取连接的静态方法
public static Connection getConnection() throws Exception &#123;
    return DriverManager.getConnection(url, user, password);
&#125;

// 3.提供释放资源的方法
public static void close(ResultSet resultSet, Statement statement, Connection connection) &#123;
    if (resultSet != null) &#123;
        try &#123;
            resultSet.close();
        &#125; catch (SQLException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;
    if (statement != null) &#123;
        try &#123;
            statement.close();
        &#125; catch (SQLException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;
    if (connection != null) &#123;
        try &#123;
            connection.close();
        &#125; catch (SQLException e) &#123;
            e.printStackTrace();
        &#125;
    &#125;
&#125;

// 重载关闭方法
public static void close(Statement statement, Connection connection) &#123;
    close(null, statement, connection);
&#125;
</code></pre>
<p>}</p>
<p>1.6 事务操作<br>事务</p>
<p>如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败</p>
<p>MySQL事务操作</p>
<p>事务	<br>开启事务	begin | start transaction;<br>提交事务	commit;<br>回顾事务	rollback;<br>Java操作(使用Connection对象)</p>
<p>事务	<br>关闭自动提交(开启事务)	void setAutoCommit(false);<br>提交事务	void commit();<br>回顾事务	void rollback();<br>需求:</p>
<p>通过Java代码实现转账案例</p>
<p>导入账户表</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>CREATE TABLE account(<br>  id INT PRIMARY KEY AUTO_INCREMENT,<br>  <code>name</code> VARCHAR(10),<br>  money DOUBLE<br>);<br>INSERT INTO account(<code>name</code>,money) VALUES (‘UserA’,1000),(‘UserB’,1000);</p>
<p>编写转账代码</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>public class TXDemo{<br>@Test<br>    public void testTX(){<br>        try{<br>          &#x2F;&#x2F; 1.获取连接【JdbcUtils工具类】<br>          &#x2F;&#x2F; 2.开启事务<br>                    &#x2F;&#x2F; 3.UserA扣钱<br>                    &#x2F;&#x2F; 机器故障<br>                    &#x2F;&#x2F; 4.UserB加钱<br>                    &#x2F;&#x2F; 5.提交事务<br>        }catch(Exception e){<br>          &#x2F;&#x2F; 6.回滚事务<br>                }finally{<br>                    &#x2F;&#x2F; 7.释放资源<br>            }<br>    }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>public class TXDemo {<br>@Test<br>    public void testTX() {<br>        Connection connection &#x3D; null;<br>        Statement statement &#x3D; null;<br>        try {<br>          &#x2F;&#x2F; 1.获取连接【JdbcUtils工具类】<br>                    connection &#x3D; JdbcUitls.getConnection();<br>          &#x2F;&#x2F; 2.开启事务<br>          connection.setAutoCommit(false);<br>          tatement &#x3D; connection.createStatement();<br>          &#x2F;&#x2F; 3.UserA扣钱<br>          &#x2F;&#x2F; 机器故障<br>          &#x2F;&#x2F; 4.UserB加钱<br>          &#x2F;&#x2F; 5.提交事务<br>          connection.commit();<br>          } catch (Exception e) {<br>    try {<br>                    &#x2F;&#x2F; 6.回滚事务<br>                    connection.rollback();<br>    } catch (SQLException e1) {<br>                    e1.printStackTrace();<br>    }<br>} finally {<br>                    &#x2F;&#x2F; 7.释放资源<br>                    JdbcUitls.close(statement, connection);<br>        }<br>        }<br>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>public class TXDemo {<br>    @Test<br>    public void testTX() {<br>        Connection connection &#x3D; null;<br>        Statement statement &#x3D; null;<br>        try {<br>            &#x2F;&#x2F; 1.获取连接【JdbcUtils工具类】<br>            connection &#x3D; JdbcUitls.getConnection();<br>            &#x2F;&#x2F; 2.开启事务<br>            connection.setAutoCommit(false);<br>            statement &#x3D; connection.createStatement();</p>
<pre><code>        // 3.UserA扣钱
        String ASql = &quot;update account set money = money-100 where id=2;&quot;;
        int AResult = statement.executeUpdate(ASql);
        if (AResult &gt; 0) &#123;
            System.out.println(&quot;User A Payment Successful&quot;);
        &#125;
        // 机器故障
        int a = 1 / 0;
        String BSql = &quot;update account set money = money +100 where id =1;&quot;;
        // 4.UserB收到钱
        int BResult = statement.executeUpdate(BSql);
        if (BResult &gt; 0) &#123;
            System.out.println(&quot;User B Get the Payment&quot;);
        &#125;
        // 5.提交事务
        connection.commit();
    &#125; catch (Exception e) &#123;
        e.printStackTrace();
        try &#123;
            // 6.回滚事务
            connection.rollback();
        &#125; catch (SQLException throwables) &#123;
            throwables.printStackTrace();
        &#125;
    &#125; finally &#123;
        // 7.释放资源
        JdbcUitls.close(statement, connection);
    &#125;
&#125;
</code></pre>
<p>}<br>二.案例:用户登陆<br>2.1 需求分析<br>浏览器登录		<br>⬇		<br>服务器LoginServlet		<br>接收用户请求<br>用户名，密码		<br>⬇		<br>操作JDBC<br>根据用户名和密码查询数据库	➡<br>⬅	Server<br>⬇		<br>判断用户是否登录成功		<br>⬇正确	➡错误	转发登录页面提示<br>重定向至list.jsp		<br>2.2 代码实现<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>package com.test.web;</p>
<p>import com.test.util.JdbcUitls;</p>
<p>import javax.servlet.ServletException;<br>import javax.servlet.annotation.WebServlet;<br>import javax.servlet.http.HttpServlet;<br>import javax.servlet.http.HttpServletRequest;<br>import javax.servlet.http.HttpServletResponse;<br>import java.io.IOException;<br>import java.sql.Connection;<br>import java.sql.ResultSet;<br>import java.sql.Statement;</p>
<p>@WebServlet(“&#x2F;LoginServlet”)<br>public class LoginServlet extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    //统一编码
    req.setCharacterEncoding(&quot;utf-8&quot;);
    resp.setContentType(&quot;text/html;charset=utf-8&quot;);
    //接收请求
    String username = req.getParameter(&quot;username&quot;);
    String password = req.getParameter(&quot;password&quot;);

    try &#123;
        // 2.操作JDBC
        // 2.1 获取连接
        Connection connection = JdbcUitls.getConnection();

        // 2.2 编写sql
        // String sql = &quot;select * from user where username =&#39;admin&#39; and password=&#39;123&#39;&quot;;
        String sql = &quot;SELECT * FROM user WHERE username=&#39;&quot; + username + &quot;&#39;AND password =&#39;&quot; + password + &quot;&#39;&quot;;
        System.out.println(sql);

        // 2.3 获取sql执行对象
        Statement statement = connection.createStatement();

        // 2.4 执行sql并返回结果
        ResultSet resultSet = statement.executeQuery(sql);

        // 3.判断是否登录成功
        if (resultSet.next()) &#123;// 成功
            String loginUsername = resultSet.getString(&quot;username&quot;);
            req.getSession().setAttribute(&quot;loginUsername&quot;, loginUsername);
            resp.sendRedirect(req.getContextPath() + &quot;/list.jsp&quot;);
        &#125; else &#123;// 失败
            req.setAttribute(&quot;error&quot;, &quot;Username/Password Wrong&quot;);
            req.getRequestDispatcher(&quot;/login.jsp&quot;).forward(req, resp);
        &#125;
    &#125; catch (Exception e) &#123;
        e.printStackTrace();
    &#125;

&#125;
</code></pre>
<p>}</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><h2 id="jdbc"><a href="#jdbc" class="headerlink" title="jdbc"></a>jdbc</h2><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><ul>
<li>通过java语言操作数据库</li>
</ul>
<h3 id="本质"><a href="#本质" class="headerlink" title="本质"></a>本质</h3><ul>
<li><p>面向接口编程思想</p>
</li>
<li><p>sun公司通过操作关系型数据库的一套规范（接口），所有的数据库厂商都需要实现这套接口，对于开发者只需要学习这套接口的API就可以操作所有类型的关系型数据库，真正的执行者是实现类（jar包驱动）</p>
</li>
</ul>
<h3 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h3><ul>
<li><p>1.注册驱动</p>
</li>
<li><p>2.建立连接</p>
</li>
<li><p>3.编写sql</p>
</li>
<li><p>4.获取sql执行对象</p>
</li>
<li><p>5.执行sql并返回结果</p>
</li>
<li><p>6.处理结果</p>
</li>
<li><p>7.释放资源</p>
</li>
</ul>
<h3 id="API详解"><a href="#API详解" class="headerlink" title="API详解"></a>API详解</h3><ul>
<li>DriverManager</li>
</ul>
<p>​ - 1.注册驱动</p>
<p>​ - Class.forName()</p>
<p>​ - 2.建立连接</p>
<ul>
<li>Connection</li>
</ul>
<p>​ - 1.获取sql执行对象</p>
<p>​ - Statement</p>
<p>​ - PreparedStatement</p>
<p>​ - 2.事务安全</p>
<ul>
<li>Statement</li>
</ul>
<p>​ - 1.仅执行DML类型sql语句</p>
<p>​ - int executeUpdate(String sql)</p>
<p>​ - 2.仅执行DQL类型sql语句</p>
<p>​ - ResultSet executeQuery(String sql)</p>
<ul>
<li>ResultSet</li>
</ul>
<p>​ - 1.指针下移</p>
<p>​ - boolean next()</p>
<p>​ - 2.获取数据</p>
<p>​ - T getXxx(String 列名)</p>
<h3 id="crud练习"><a href="#crud练习" class="headerlink" title="crud练习"></a>crud练习</h3><ul>
<li><p>新增</p>
</li>
<li><p>修改</p>
</li>
<li><p>删除</p>
</li>
<li><p>查询所有</p>
</li>
</ul>
<h3 id="JdbcUtils"><a href="#JdbcUtils" class="headerlink" title="JdbcUtils"></a>JdbcUtils</h3><ul>
<li><p>版本一</p>
</li>
<li><p>版本二</p>
</li>
</ul>
<h3 id="事务安全"><a href="#事务安全" class="headerlink" title="事务安全"></a>事务安全</h3><ul>
<li>模拟转账</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/25/Java-Web-Listener/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/25/Java-Web-Listener/" class="post-title-link" itemprop="url">Java Web - Listener</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-25 01:29:53" itemprop="dateCreated datePublished" datetime="2020-04-25T01:29:53+08:00">2020-04-25</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.Linstener<br>1.1 概述<br>中的监听器(观察者模式)<br>Java程序中，也要需要被监视的对象，一旦被监视对象发生变化，采取相应对象</p>
<p>监听器三大对象<br>HttpServletRequest,HttpSession,ServletContext</p>
<p>场景<br>历史访问次数，统计在线人数，系统启动时初始化配置信息</p>
<p>1.2 快速入门<br>使用ServletContextListener箭头项目启动和销毁做一些事，如在项目启动时加载配置文件<br>步骤:</p>
<p>创建ServletContextListener普通类<br>监听ServletContext创建、销毁<br>配置web.xml&#x2F;注解<br>补充:监听HttpServletRequestListener&#x2F;HttpSessionListener</p>
<p>web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.test.Demo01.MyListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> &#123;</span><br><span class="line">  <span class="comment">//监听ServletContext创建</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ServletContext创建&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//监听ServletContext销毁</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ServletContext销毁&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注解</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> &#123;</span><br><span class="line">  <span class="comment">//监听ServletContext创建</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ServletContext创建&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//监听ServletContext销毁</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ServletContext销毁&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>1.3 模拟Spring框架<br>ServletContext可以在项目启动时读取配置文件加载</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    全局配置参数--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>configLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>words.properties<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br></pre></td></tr></table></figure>




<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> &#123;</span><br><span class="line">  <span class="comment">//监听ServletContext创建</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ServletContext创建&quot;</span>);</span><br><span class="line">    <span class="comment">//可以加载公司定义配置文件的名称</span></span><br><span class="line">    <span class="comment">//servletContextEvent 上下文事件对象，获取ServletContext</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> servletContextEvent.getServletContext();</span><br><span class="line">    <span class="comment">//通过加载定义公司定义的配置文件名称</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">configLoaction</span> <span class="operator">=</span> servletContext.getInitParameter(<span class="string">&quot;configLocation&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;&quot;</span> + configLoaction);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//监听ServletContext销毁</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ServletContext销毁&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1.4 案例统计在线人数<br>需求:<br>有用户使用网站: 在线人数+1,用户退出，在线人数-1</p>
<p>步骤分析<br>使用ServletContext域对象存储在线总人数<br>使用ServletContextListener在项目启动时，初始化总人数为0<br>使用HttpSessionListener监听器，用户访问，人数+1，用户退出，人数-1<br>使用LogoutServlet控制器对当前会话对Session手动销毁</p>
<p>代码实现</p>
<p>InitNumberListerner</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InitNumberListerner</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line">    <span class="comment">//获取上下文域对象</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> servletContextEvent.getServletContext();</span><br><span class="line">    <span class="comment">//初始化在线人数</span></span><br><span class="line">    servletContext.setAttribute(<span class="string">&quot;number&quot;</span>,<span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent servletContextEvent)</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>NumberChangeListener</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NumberChangeListener</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionListener</span> &#123;</span><br><span class="line">  <span class="comment">//会话建立，在线人数+1</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionCreated</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> &#123;</span><br><span class="line">    <span class="comment">//获取session</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> httpSessionEvent.getSession();</span><br><span class="line">    <span class="comment">//获取上下文session域对象</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    <span class="comment">//取出在线人数</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">number</span> <span class="operator">=</span> (Integer) servletContext.getAttribute(<span class="string">&quot;number&quot;</span>);</span><br><span class="line">    <span class="comment">//+1</span></span><br><span class="line">    servletContext.setAttribute(<span class="string">&quot;number&quot;</span>, number + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//会话销毁，在线人数-1</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sessionDestroyed</span><span class="params">(HttpSessionEvent httpSessionEvent)</span> &#123;</span><br><span class="line">    <span class="comment">//获取session</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> httpSessionEvent.getSession();</span><br><span class="line">    <span class="comment">//获取上下文session域对象</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> session.getServletContext();</span><br><span class="line">    <span class="comment">//取出在线人数</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">number</span> <span class="operator">=</span> (Integer) servletContext.getAttribute(<span class="string">&quot;number&quot;</span>);</span><br><span class="line">    <span class="comment">//-1</span></span><br><span class="line">    servletContext.setAttribute(<span class="string">&quot;number&quot;</span>, number - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>index.jsp</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">  &lt;h3&gt;Learn Listener&lt;/h3&gt;</span><br><span class="line">  &lt;h5&gt;Online Member:$&#123;applicationScope.number&#125;&lt;/h5&gt;</span><br><span class="line"></span><br><span class="line">  &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/LogoutServlet&quot;</span>&gt;Logout&lt;/a&gt;</span><br><span class="line">  $END$</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>LogoutServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/LogoutServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogoutServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//销毁Session</span></span><br><span class="line">    req.getSession().invalidate();</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;Logout&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>二.综合案例<br>2.1 环境搭建</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> String sex;</span><br><span class="line">  <span class="keyword">private</span> Integer age;</span><br><span class="line">  <span class="keyword">private</span> String address;</span><br><span class="line">  <span class="keyword">private</span> String qq;</span><br><span class="line">  <span class="keyword">private</span> String email;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebFilter(&quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncodeFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">    <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line">    <span class="keyword">if</span> (request.getMethod().equalsIgnoreCase(<span class="string">&quot;post&quot;</span>)) &#123;</span><br><span class="line">      request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    filterChain.doFilter(request, response);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataUtils</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">realpath</span> <span class="operator">=</span> <span class="string">&quot;/Users/swzxsyh/Program/userdata.txt&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//从文件中读取所有学员信息</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> List&lt;User&gt; <span class="title function_">readAll</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">//保存所有学生对象信息</span></span><br><span class="line">    List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//得到文件真实路径</span></span><br><span class="line">      <span class="comment">//创建字符输入流</span></span><br><span class="line">      <span class="type">Reader</span> <span class="variable">isr</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(realpath), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">      <span class="comment">//创建字符缓冲流</span></span><br><span class="line">      <span class="type">BufferedReader</span> <span class="variable">br</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(isr); <span class="comment">//装饰模式</span></span><br><span class="line">      <span class="comment">//一次读一行</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">row</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">      <span class="keyword">while</span> ((row = br.readLine()) != <span class="literal">null</span>) &#123;<span class="comment">//row = &quot;1,张三,男,20&quot;</span></span><br><span class="line">        String[] arr = row.split(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">        user.setId(arr[<span class="number">0</span>]);</span><br><span class="line">        user.setName(arr[<span class="number">1</span>]);</span><br><span class="line">        user.setSex(arr[<span class="number">2</span>]);</span><br><span class="line">        user.setAge(Integer.parseInt(arr[<span class="number">3</span>]));</span><br><span class="line">        user.setAddress(arr[<span class="number">4</span>]);</span><br><span class="line">        user.setQq(arr[<span class="number">5</span>]);</span><br><span class="line">        user.setEmail(arr[<span class="number">6</span>]);</span><br><span class="line">        <span class="comment">//将User对象添加到集合</span></span><br><span class="line">        list.add(user);</span><br><span class="line">      &#125;</span><br><span class="line">      br.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//向文件中写入所有用户信息--覆盖写</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">writeAll</span><span class="params">(List&lt;User&gt; list)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//创建字符输出流</span></span><br><span class="line">      <span class="type">Writer</span> <span class="variable">osw</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OutputStreamWriter</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(realpath), <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">      <span class="comment">//创建字符缓冲流</span></span><br><span class="line">      <span class="type">BufferedWriter</span> <span class="variable">out</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedWriter</span>(osw);</span><br><span class="line">      <span class="comment">//循环向文件中写入文本</span></span><br><span class="line">      <span class="keyword">for</span> (User user : list) &#123;</span><br><span class="line">        out.write(user.getId() + <span class="string">&quot;,&quot;</span> + user.getName() + <span class="string">&quot;,&quot;</span> + user.getSex() + <span class="string">&quot;,&quot;</span> + user.getAge() + <span class="string">&quot;,&quot;</span> + user.getAddress() + <span class="string">&quot;,&quot;</span> + user.getQq() + <span class="string">&quot;,&quot;</span> + user.getEmail());</span><br><span class="line">        out.newLine();<span class="comment">//创建新的一行</span></span><br><span class="line">      &#125;</span><br><span class="line">      out.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;User&gt; list = readAll();</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.2 用户查询功能</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/FindAllServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FindAllServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">    List&lt;User&gt; list = userService.findAll();</span><br><span class="line">    req.setAttribute(<span class="string">&quot;list&quot;</span>, list);</span><br><span class="line">    req.getRequestDispatcher(<span class="string">&quot;/list.jsp&quot;</span>).forward(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">  <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDao</span>();</span><br><span class="line">  <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> userDao.findAll();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">      List&lt;User&gt; list = DataUtils.readAll();</span><br><span class="line">      <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


<p>2.3 添加用户功能</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      Map&lt;String, String[]&gt; parameterMap = req.getParameterMap();</span><br><span class="line">      <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">      BeanUtils.populate(user,parameterMap);</span><br><span class="line">      <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">      userService.add(user);</span><br><span class="line">      resp.sendRedirect(req.getContextPath()+<span class="string">&quot;/FindAllServlet&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span> &#123;</span><br><span class="line">  userDao.add(user);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(User user)</span> &#123;</span><br><span class="line">  List&lt;User&gt; list = DataUtils.readAll();</span><br><span class="line">  list.add(user);</span><br><span class="line">  DataUtils.writeAll(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.4 删除用户功能</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/DeleteServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeleteServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">    userService.delete(id);</span><br><span class="line">    resp.sendRedirect(req.getContextPath()+<span class="string">&quot;/FindAllServlet&quot;</span>);</span><br><span class="line">  &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String id)</span>&#123;</span><br><span class="line">  userDao.delete(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">delete</span><span class="params">(String id)</span> &#123;</span><br><span class="line">  List&lt;User&gt; list = DataUtils.readAll();</span><br><span class="line">  <span class="keyword">for</span> (User user : list) &#123;</span><br><span class="line">    <span class="keyword">if</span> (user.getId().equalsIgnoreCase(id)) &#123;</span><br><span class="line">      list.remove(user);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  DataUtils.writeAll(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.5 修改用户功能<br>2.5.1 用户回显</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/FindByIdServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FindByIdServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userService.fidById(id);</span><br><span class="line">    req.setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">    req.getRequestDispatcher(<span class="string">&quot;/update.jsp&quot;</span>).forward(req, resp);</span><br><span class="line">  &#125;&#125;</span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">fidById</span><span class="params">(String id)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> userDao.findById(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(String id)</span> &#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">returnUser</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">    List&lt;User&gt; list = DataUtils.readAll();</span><br><span class="line">    <span class="keyword">for</span> (User user : list) &#123;</span><br><span class="line">        <span class="keyword">if</span> (user.getId().equalsIgnoreCase(id)) &#123;</span><br><span class="line">            returnUser = user;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> returnUser;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>2.5.2 修改用户</p>
<p>​    </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/UpdateServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UpdateServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;<span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      Map&lt;String, String[]&gt; parameterMap = req.getParameterMap();</span><br><span class="line">      <span class="type">User</span> <span class="variable">newUser</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">      BeanUtils.populate(newUser, parameterMap);</span><br><span class="line">      <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">      userService.update(newUser);</span><br><span class="line">      resp.sendRedirect(req.getContextPath() + <span class="string">&quot;/FindAllServlet&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User newUser)</span> &#123;</span><br><span class="line">  userDao.update(newUser);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(User newUser)</span> &#123;</span><br><span class="line">  List&lt;User&gt; list = DataUtils.readAll();</span><br><span class="line">  <span class="keyword">for</span> (User user : list) &#123;</span><br><span class="line">    <span class="keyword">if</span> (user.getId().equalsIgnoreCase(newUser.getId())) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        BeanUtils.copyProperties(user, newUser);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  DataUtils.writeAll(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>总结<br>listener<br>概述<br>监听web三大域对象：Request、Session、ServletContext（创建和销毁）<br>作用<br>历史访问次数<br>统计在线人数<br>系统启动时初始化配置信息<br>快速入门<br>定义一个类，实现ServletContextListener接口<br>重写接口中的方法<br>配置</p>
<p>web.xml</p>
<p>别人写好的监听器，只能通过配置文件进行配置<br>注解</p>
<p>案例:统计在线人数<br>1）初始化在线人数<br>2）创建会话时人数+1，关闭会话时人数-1<br>3）servlet实现用户退出</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/23/Java-Web-Filter/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/23/Java-Web-Filter/" class="post-title-link" itemprop="url">Java Web- Filter</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-23 01:28:53" itemprop="dateCreated datePublished" datetime="2020-04-23T01:28:53+08:00">2020-04-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.概述<br>Web中的过滤器:当用户访问服务器资源时，过滤器将请求拦截，完成一些通用操作</p>
<p>应用场景:登陆验证，统一编码处理，敏感字符过滤</p>
<p>二.快速入门<br>2.1 XML配置<br>编写Java类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    <span class="comment">//此方法拦截用户的请求</span></span><br><span class="line">    <span class="comment">//servletRequest请求对象</span></span><br><span class="line">    <span class="comment">//servletResponse响应对象</span></span><br><span class="line">    <span class="comment">//FilterChain过滤器链</span></span><br><span class="line">    System.out.println(<span class="string">&quot;QuickFilter Filter&quot;</span>);</span><br><span class="line">    <span class="comment">//放行</span></span><br><span class="line">    filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>配置XML</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    快速入门--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>QuickFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.test.Demo01.QuickFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>QuickFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/Demo01.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.2 注解配置<br>注意:使用注解，需要把web.xml标签注释</p>
<p>编写java类，实现Filter接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@WebFilter(filterName = &quot;QuickFilter&quot;,urlPatterns = &quot;/quick.jsp&quot;)</span></span><br><span class="line"><span class="comment">//@WebFilter(urlPatterns = &quot;/quick.jsp&quot;)</span></span><br><span class="line"><span class="comment">//@WebFilter(value = &quot;/quick.jsp&quot;)</span></span><br><span class="line"><span class="meta">@WebFilter(&quot;/quick.jsp&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    <span class="comment">//此方法拦截用户的请求</span></span><br><span class="line">    <span class="comment">//servletRequest请求对象</span></span><br><span class="line">    <span class="comment">//servletResponse响应对象</span></span><br><span class="line">    <span class="comment">//FilterChain过滤器链</span></span><br><span class="line">    System.out.println(<span class="string">&quot;QuickFilter Filter&quot;</span>);</span><br><span class="line">    <span class="comment">//放行</span></span><br><span class="line">    filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>三.工作原理<br>发送请求<br>doFilter{<br>对请求拦截<br>是否放行<br>对响应增强<br>}<br>quick.jsp调用Service方法<br>doFilter{<br>对响应增强<br>}<br>返回响应<br>四.使用细节<br>4.1 生命周期<br>方法	代码<br>初始化方法	public void init(FilterConfig filterConfig)<br>拦截方法	public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)<br>销毁方法	public void destroy()<br>时机	说明<br>创建	服务器启动项目加载，创建filter对象，执行init方法<br>运行(过滤拦截)	用户访问被拦截目标资源时，执行doFilter方法<br>销毁	服务器关闭或项目卸载时，销毁filter对象，执行destroy方法(只执行一次)<br>注意	过滤器一定是优先于servlet创建的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置初始化参数一般不会在注解中使用</span></span><br><span class="line"><span class="comment">//@WebFilter(value = &quot;/show.jsp&quot;, initParams = &#123;@WebInitParam(name = &quot;encode&quot;, value = &quot;utf-8&quot;)&#125;)</span></span><br><span class="line"><span class="comment">//@WebFilter(&quot;/show.jsp&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LifeCycleFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String encode;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//filterConfig它是filter对配置对象</span></span><br><span class="line">  <span class="comment">//作用:获取filter对初始化参数</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;LifeCycleFilter Run&quot;</span>);</span><br><span class="line">    filterConfig.getInitParameter(<span class="string">&quot;encode&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;LifeCycleFilter Filter Request,Run Method&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;Unicode&quot;</span>+encode);</span><br><span class="line">    filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;LifeCycleFilter Destroy&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LifeCycleFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.test.Demo02.LifeCycleFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encode<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>LifeCycleFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/show.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>4.2 拦截路径<br>在开发时，可以指定过滤器对拦截路径来定义拦截目标资源的范围<br>匹配方式	说明<br>精准匹配	用户访问指定目标资源(&#x2F;show.jsp)时，过滤器进行拦截<br>目录匹配	用户访问指定目录下(&#x2F;user&#x2F;<em>)所有资源时，过滤器进行拦截<br>后缀匹配	用户访问指定后缀名(</em>.jsp)的资源时，过滤器进行拦截<br>匹配所有	用户访问该网站所有资源(&#x2F;*)时，过滤器进行拦截</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@WebFilter(&quot;/show.jsp&quot;) //精准匹配</span></span><br><span class="line"><span class="comment">//@WebFilter(&quot;/User/*&quot;)     //目录匹配</span></span><br><span class="line"><span class="comment">//@WebFilter(&quot;*.html&quot;)  //后缀匹配</span></span><br><span class="line"><span class="meta">@WebFilter(&quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UrlPatternFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;UrlPatternFilter拦截了请求...&quot;</span>); <span class="comment">// 放行</span></span><br><span class="line">    filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.3 拦截方式<br>开发时，可以指定过滤器拦截方式来处理不同的应用场景(如浏览器发送的，或内部转发的)<br>拦截方式	说明<br>request(默认拦截方式)	浏览器直接发送请求时，过滤器拦截<br>forward	资源A转发到资源B时，过滤器拦截<br>资源A:ForwardServlet<br>资源B:show.jsp<br>可以同时配置两者	<br>XML版本</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ModeFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Filter&quot;</span>);</span><br><span class="line">    filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>ModeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.test.Demo04.ModeFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>ModeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/show.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dispatcher</span>&gt;</span>FORWARD<span class="tag">&lt;/<span class="name">dispatcher</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dispatcher</span>&gt;</span>REQUEST<span class="tag">&lt;/<span class="name">dispatcher</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注解版本</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(value = &quot;/show.jsp&quot;,dispatcherTypes = &#123;DispatcherType.REQUEST,DispatcherType.FORWARD&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ModeFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Filter&quot;</span>);</span><br><span class="line">    filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.4 过滤器链<br>在一次请求中，若请求匹配到多个filter，通过请求将相当于把这些filter串起来，形成过滤器链</p>
<p>需求<br>用户访问目标资源 show.jsp时，经过 FilterA FilterB</p>
<p>过滤器链执行顺序 (先进后出)</p>
<p>1.用户发送请求<br>2.FilterA拦截，放行<br>3.FilterB拦截，放行<br>4.执行目标资源 show.jsp<br>5.FilterB增强响应<br>6.FilterA增强响应<br>7.封装响应消息格式，返回到浏览器</p>
<p>过滤器链中执行的先后问题</p>
<p>方式	顺序<br>配置文件	谁先声明，谁先执行<br><filter-mapping><br>注解【不推荐】	根据过滤器类名进行排序，值小的先执行<br>FilterA FilterB 进行比较， FilterA先执行<br>4.5 注解和XML使用<br>如果是自己定义filter，无执行先后顺序，可以使用注解开发<br>如果是第三方jar提供的filter，要在web.xml进行配置<br>五.综合案例<br>5.1 用户评论留言<br>需求<br>用户访问某论坛网站，可以对文章比赛等内容进行留言</filter-mapping></p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;BBS&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;LPL View Board&lt;/h3&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/WordServlet&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">      &lt;textarea name=<span class="string">&quot;content&quot;</span> id=<span class="string">&quot;&quot;</span> cols=<span class="string">&quot;30&quot;</span> rows=<span class="string">&quot;10&quot;</span>&gt;&lt;/textarea&gt;</span><br><span class="line">      &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;text&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/WordServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WordServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//接收请求参数Content</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">    <span class="comment">//结果响应到浏览器</span></span><br><span class="line">    resp.getWriter().write(content);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5.2 统一网站编码<br>需求<br>tomcat8.5版本中已经将get请求的中文乱码解决了,但是post请求还存在中文乱码 浏览器发出的任何请求，通过过滤器统一处理中文乱码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 统一网站编码   --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.test.Case01.EncodeFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encode<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncodeFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String encode;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    encode = filterConfig.getInitParameter(<span class="string">&quot;encode&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    <span class="comment">//类型向下转换</span></span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">    <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line">    <span class="comment">//判断用户是否为post请求，才设置编码</span></span><br><span class="line">    <span class="keyword">if</span> (request.getMethod().equalsIgnoreCase(<span class="string">&quot;post&quot;</span>)) &#123;</span><br><span class="line">      request.setCharacterEncoding(encode);</span><br><span class="line">    &#125;</span><br><span class="line">    response.setContentType(<span class="string">&quot;text/html;charset=&quot;</span> + encode);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//放行</span></span><br><span class="line">    filterChain.doFilter(servletRequest, servletResponse);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5.3 非法字符拦截</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(&quot;/WordServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WordsFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> List&lt;String&gt; wordList;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    <span class="comment">//加载配置文件,ResourceBundle专门读取src下的properties文件，不需要后缀名</span></span><br><span class="line">    <span class="type">ResourceBundle</span> <span class="variable">words</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;words&quot;</span>);</span><br><span class="line">    <span class="comment">//读取keyword关键字内容</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">keyword</span> <span class="operator">=</span> words.getString(<span class="string">&quot;keyword&quot;</span>);</span><br><span class="line">    <span class="comment">//split切割，转为list集合</span></span><br><span class="line">    wordList = Arrays.asList(keyword.split(<span class="string">&quot;,&quot;</span>));</span><br><span class="line">    System.out.println(wordList);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    <span class="comment">//向下转型</span></span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">    <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line">    <span class="comment">//获取用户输入的值</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">    <span class="comment">//拦截非法内容，提示</span></span><br><span class="line">    <span class="keyword">for</span> (String word : wordList) &#123;</span><br><span class="line">      <span class="keyword">if</span>(content.contains(word))&#123;</span><br><span class="line">        response.getWriter().write(<span class="string">&quot;Input Words has Problem&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//放行</span></span><br><span class="line">    filterChain.doFilter(request, response);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5.4 非法字符过滤</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRequest</span> <span class="keyword">extends</span> <span class="title class_">HttpServletRequestWrapper</span> &#123;</span><br><span class="line">  <span class="comment">//非法词库</span></span><br><span class="line">  <span class="keyword">private</span> List&lt;String&gt; wordList;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">MyRequest</span><span class="params">(HttpServletRequest request, List&lt;String&gt; wordList)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(request);</span><br><span class="line">    <span class="built_in">this</span>.wordList = wordList;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//对谁增强就重写谁</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getParameter</span><span class="params">(String name)</span> &#123;</span><br><span class="line">    <span class="comment">//调用原有的功能，获取用户输入的值</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">parameter</span> <span class="operator">=</span> <span class="built_in">super</span>.getParameter(name);</span><br><span class="line">    <span class="comment">//对非法词库过滤</span></span><br><span class="line">    <span class="keyword">for</span> (String word : wordList) &#123;</span><br><span class="line">      <span class="keyword">if</span> (parameter.contains(word)) &#123;</span><br><span class="line">        <span class="comment">//注意:替换完后进行覆盖</span></span><br><span class="line">        parameter = parameter.replaceAll(word, <span class="string">&quot;**&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> parameter;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter(&quot;/WordServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WordsProFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> List&lt;String&gt; wordList;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    <span class="comment">//加载配置文件,ResourceBundle专门读取src下的properties文件，不需要后缀名</span></span><br><span class="line">    <span class="type">ResourceBundle</span> <span class="variable">words</span> <span class="operator">=</span> ResourceBundle.getBundle(<span class="string">&quot;words&quot;</span>);</span><br><span class="line">    <span class="comment">//读取keyword关键字内容</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">keyword</span> <span class="operator">=</span> words.getString(<span class="string">&quot;keyword&quot;</span>);</span><br><span class="line">    <span class="comment">//split切割，转为list集合</span></span><br><span class="line">    wordList = Arrays.asList(keyword.split(<span class="string">&quot;,&quot;</span>));</span><br><span class="line">    System.out.println(wordList);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">    <span class="comment">//向下转型</span></span><br><span class="line">    <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">    <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//对request对象进行包装(过滤)</span></span><br><span class="line">    <span class="type">MyRequest</span> <span class="variable">requestPro</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyRequest</span>(request, wordList);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//放行</span></span><br><span class="line">    filterChain.doFilter(requestPro, response);</span><br><span class="line">    System.out.println(wordList);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>附录 Filter模版设置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end #parse(<span class="string">&quot;File Header.java&quot;</span>) <span class="meta">@javax</span>.servlet.annotation.WebFilter(<span class="string">&quot;/$&#123;Entity_Name&#125;&quot;</span>)</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;Class_Name&#125; <span class="keyword">implements</span> <span class="title class_">javax</span>.servlet.Filter &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(javax.servlet.FilterConfig config)</span> <span class="keyword">throws</span> javax.servlet.ServletException &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(javax.servlet.ServletRequest servletRequest, javax.servlet.ServletResponse servletResponse, javax.servlet.FilterChain chain)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException &#123;</span><br><span class="line">      <span class="comment">// 放行</span></span><br><span class="line">      chain.doFilter(servletRequest, servletResponse); &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125; &#125;</span><br></pre></td></tr></table></figure>


<p>总结<br>概述<br>作用<br>拦截用户请求<br>应用场景<br>如：登录验证、统一编码处理、敏感字符过滤…<br>快速入门</p>
<ol>
<li>定义一个类实现Filter接口<br>javax.servlet 包</li>
<li>重写filter方法<br>doFilter</li>
<li>配置<br>web.xml<br>注解<br>工作原理<br>用户发送请求<br>执行Filter拦截请求</li>
</ol>
<p>放行（执行放行后的资源）</p>
<p>执行Filter拦截响应</p>
<p>响应给浏览器结果<br>细节<br>生命周期<br>何时创建</p>
<p>在服务器启动时，创建fitler对象，执行init方法，只执行一次<br>何时销毁</p>
<p>服务器正常关闭时，销毁filter对象，执行destroy方法，只执行一次<br>创建优先级</p>
<p>ServletContext</p>
<p>Filter</p>
<p>Servlet<br>拦截路径<br>精准匹配</p>
<p>&#x2F;show.jsp<br>目录匹配</p>
<p>&#x2F;user&#x2F;*<br>后缀匹配</p>
<p>*.html<br>拦截所有</p>
<p>&#x2F;*<br>拦截方式<br>REQUEST</p>
<p>客户端直接访问资源时，执行Filter<br>FORWARD</p>
<p>服务器内部资源跳转时，执行Filter<br>过滤器链<br>拦截顺序</p>
<p>先进后出<br>执行先后</p>
<p>web.xml</p>
<p>谁先声明，谁先执行<br>注解</p>
<p>按照自定义过滤器类名的字符串比较规则，值小的先执行</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/23/Docker%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8Oracle-11g/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/23/Docker%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8Oracle-11g/" class="post-title-link" itemprop="url">Docker安装使用Oracle 11g</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-23 01:28:17" itemprop="dateCreated datePublished" datetime="2020-04-23T01:28:17+08:00">2020-04-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-11-15 04:25:41" itemprop="dateModified" datetime="2022-11-15T04:25:41+08:00">2022-11-15</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Docker安装使用Oracle-11g"><a href="#Docker安装使用Oracle-11g" class="headerlink" title="Docker安装使用Oracle 11g"></a>Docker安装使用Oracle 11g</h1><h2 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 拉取镜像</span></span><br><span class="line">docker pull registry.cn-hangzhou.aliyuncs.com/helowin/oracle_11g</span><br><span class="line"><span class="comment"># 可以改名</span></span><br><span class="line">docker tag xxxxxxxxxx oracle:oracle_11g  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动镜像</span></span><br><span class="line">docker run -d -p 1521:1521 --name oracle_11g oracle_11g:latest               </span><br><span class="line"><span class="comment"># 查看容器是否运行</span></span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入容器</span></span><br><span class="line">docker <span class="built_in">exec</span> -it oracle_11g bash  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到root</span></span><br><span class="line">su root</span><br><span class="line"><span class="comment">#密码:helowin</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑profile文件</span></span><br><span class="line">vi /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># 最后行添加如下环境变量</span></span><br><span class="line"><span class="built_in">export</span> ORACLE_HOME=/home/oracle/app/oracle/product/11.2.0/dbhome_2</span><br><span class="line"><span class="built_in">export</span> ORACLE_SID=helowin</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$ORACLE_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建软链接</span></span><br><span class="line"><span class="built_in">ln</span> -s <span class="variable">$ORACLE_HOME</span>/bin/sqlplus /usr/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换回oracle</span></span><br><span class="line">su - oracle</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2020/04/23/Docker%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8Oracle-11g/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/21/JSP-MVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/21/JSP-MVC/" class="post-title-link" itemprop="url">JSP & MVC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-21 01:26:17" itemprop="dateCreated datePublished" datetime="2020-04-21T01:26:17+08:00">2020-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.JSP<br>1.1 概述<br>简单来说:在html标签中嵌套java代码<br>作用:简化书写，展示动态页面<br>1.2 快速入门<br>在jsp页面显示当前时间</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    <span class="type">SimpleDateFormat</span> <span class="variable">sdf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-mm-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">currentTime</span> <span class="operator">=</span> sdf.format(date);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h3&gt;&lt;%out.write(currentTime);%&gt;&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>1.3 工作原理<br>JSP本质就是一个Servlet<br>index.jsp<br>转换⬇<br>index_jsp.java<br>servlet接口<br>编译⬇<br>index_jsp.class<br>执行 service方法<br>1.4 脚本和注释<br>1.4.1 脚本<br>JSP通过脚本方式来定义Java代码<br>格式	说明<br>&lt;% 代码%&gt;	脚本片段，生成在service方法中，每次请求的时候都会执行<br>&lt;%! 代码%&gt;	声明片段，在java代码中声明成员，放在jsp生成jsva文件中的成员位置<br>&lt;%&#x3D;代码%&gt;	输出脚本片段，相当于out.print(“Code”);方法，输出到jsp页面<br>格式	说明<br>out.print();	方法支持一切类型输出<br>out.write();	仅支持字符类型输出，如果传递的是整型，将根据ASCII码表转换输出<br>1.4.2 注释<br>格式	说明<br>&lt;!– 注释静态资源 –&gt;	html注释<br>&lt;%– 注释所有 –%&gt;	JSP注释<br>&#x2F;&#x2F; 单行注释<br>&#x2F;* 多行注释 &#x2F;<br>&#x2F;*文档注释 *&#x2F;	Java注释(JSP脚本内使用)<br>1.5 指令<br>作用<br>用于配置JSP页面，导入资源文件</p>
<p>格式<br>&lt;%@ 指令名称 属性名1&#x3D;”属性值1” 属性名2&#x3D;”属性值2” %&gt;</p>
<p>三大指令</p>
<p>指令	作用<br>page	配置JSP页面<br>include	页面包含(静态)<br>taglib	导入资源文件<br>1.5.1 page指令<br>指令	作用<br>contentType	相当于response.setContentType();设置响应体的MIME类型和编码方式<br>language	指定语言，目前仅支持Java<br>import	导入jar包<br>errorpage	当页面报错后，自动跳转到指定错误提示页面<br>isErrorpage	默认false关闭，设置true</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.util.Date&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">&quot;java.text.SimpleDateFormat&quot;</span> %&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span>  errorPage=<span class="string">&quot;500.jsp&quot;</span>%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>();</span><br><span class="line">    Integer age=<span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isErrorPage=<span class="string">&quot;true&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;Server Busy&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    <span class="comment">//打印错误提示</span></span><br><span class="line">    out.print(exception.getMessage());</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>1.5.2 include指令(静态包含)</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- top.jsp --&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Top&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div style=<span class="string">&quot;border: skyblue dashed 5px;height: 150px&quot;</span>&gt;Top&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo03&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%<span class="meta">@include</span> file=<span class="string">&quot;top.jsp&quot;</span>%&gt;</span><br><span class="line">&lt;div style=<span class="string">&quot;border: 5px solid red;height:200px &quot;</span>&gt;</span><br><span class="line">Demo03</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>1.5.3 taglib指令<br>导入jar包<br>通过taglib指令引入</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo04&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;Taglib 指令&lt;/h3&gt;</span><br><span class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">&quot;&quot;</span>&gt;&lt;/c:<span class="keyword">if</span>&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>1.6 内置对象<br>作用<br>JSP 页面中不需要get获取也不需要手动创建，就可以直接使用的对象<br>变量名	真实类型	作用<br>pageContexxt	PageContext	当前页面中共享数据(域对象)<br>request	HttpServletRequest	一切请求中共享数据<br>session	HttpSession	一次会话中共享数据(域对象)<br>application	ServletContext	整个web应用共享数据(域对象)<br>————-	——————-	——————-<br>response	HttpServletResponse	响应对象<br>page(this)	Object	当前页面Servlet对象<br>out	JSPWriter	输出对象<br>config	ServletConfig	Servlet配置对象<br>exception	Throwable	异常对象(默认关闭)<br>常用:<br>pageContext	1)当前页面的域对象<br>2)获取其他八个内置对象<br>request	1)接收用户请求(参数)<br>2)一次请求中域对象<br>response	1)设置响应:<br>  字节流<br>  字符流<br>out	1)专门在jsp中处理字符流<br>  print()&#x2F;&#x2F;可以输出一切类型<br>  wirte(); &#x2F;&#x2F;只能输出字符类型<br>1.7 JSP动作标签<br>作用<br>简化JSP页面编码<br>常用<br>指令	底层	作用<br><a href="Jsp:include">Jsp:include</a>	request.getRequestDispatcher().include(req,resp)	页面包含(动态)<br><a href="Jsp:forward">Jsp:forward</a>	request.getRequestDispatcher().forward(req,resp)	请求转发(页面跳转)<br><a href="Jsp:param">Jsp:param</a>	include forward的子标签<br>使用request.getParameter()获取参数	参数传递<br>1.7.1 动态包含<br>静态包含</p>
<p>demo03.jsp	合并转换为一个java文件➡	demo3.java	编译➡	demo3.class	执行➡	response封装响应输出<br>top.jsp<br>动态包含</p>
<p>demo06.jsp	转换➡	demo06.java	编译➡	demo06.class	合并执行➡	response封装响应输出<br>top.jsp	转换➡	top.java	编译➡	top.class</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo06&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;jsp:include page=<span class="string">&quot;top.jsp&quot;</span>&gt;&lt;/jsp:include&gt;</span><br><span class="line"></span><br><span class="line">&lt;div style=<span class="string">&quot;border: gray 1px solid;height: 400px&quot;</span>&gt;JSP的动态包含:主体&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>


<p>在企业开发时，推荐使用静态包含提示访问性能；注意:不能出现重名的变量</p>
<p>1.7.2 请求转发</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;A&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    System.out.println(<span class="string">&quot;A Run&quot;</span>);</span><br><span class="line">    request.setAttribute(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;request Set&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;jsp:forward page=<span class="string">&quot;b.jsp&quot;</span>&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">&quot;name&quot;</span> value=<span class="string">&quot;jack&quot;</span>&gt;&lt;/jsp:param&gt;</span><br><span class="line">    &lt;jsp:param name=<span class="string">&quot;age&quot;</span> value=<span class="string">&quot;18&quot;</span>&gt;&lt;/jsp:param&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;B&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    System.out.println(<span class="string">&quot;B Run&quot;</span>);</span><br><span class="line">    <span class="comment">//request域传递</span></span><br><span class="line">    System.out.println(request.getAttribute(<span class="string">&quot;username&quot;</span>));</span><br><span class="line">    <span class="comment">//param标签传递</span></span><br><span class="line">    System.out.println(request.getParameter(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">    System.out.println(request.getParameter(<span class="string">&quot;age&quot;</span>));</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>二.MVC模式<br>2.1 JSP发展介绍<br>早期只有servlet，只能使用response输出html标签，非常麻烦。<br>后来有了JSP，简化了servlet开发;如果过度使用JSP，在JSP页面中写了大量的java代码和html标签，造成难于 维护，难于分工协作的场景。<br>再后来为了弥补过度使用jsp的问题，我们使用servlet+jsp这套组合拳，利于分工协作。<br>简单来说:就是一套总结出来的设计经验，适合在各种软件开发领域</p>
<p>目的:高内聚，低耦合<br>2.2 MVC介绍<br>MVC设计模式: Model-View-Controller简写。<br>MVC是软件工程中的一种软件架构模式，它是一种分离业务逻辑与显示界面的设计方法。<br>指令	<br>M	model(模型)<br>⬇<br>JavaBean(1.处理业务逻辑，2.封装实体)<br>V	view(视图<br>⬇<br>JSP(展示数据)<br>C	controller(控制器)<br>⬇<br>Servlet(1.接收请求，2.调用模型，3.转发视图)<br>优点	降低耦合性，方便维护和拓展，利于分工协作<br>缺点	使得项目架构变得复杂，对开发人员要求高<br>客户端<br>静态资源<br>动态资源<br>请求➡	服务器<br>Controller<br>Servlet<br>1.接收请求<br>2.调用模型<br>3.转发视图	➡<br>⬅	Model<br>JavaBean<br>处理业务逻辑<br>封装实体	➡<br>⬅	SQL<br>⬇<br>⬅返回	View<br>jsp、html<br>展示动静内容</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/21/EL-JSTL-MVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/21/EL-JSTL-MVC/" class="post-title-link" itemprop="url">EL & JSTL & MVC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-21 01:23:40" itemprop="dateCreated datePublished" datetime="2020-04-21T01:23:40+08:00">2020-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.EL<br>1.1 概述<br>表达式语言(Expression Language)<br>作用:<br>主要用于代替jsp中脚本的功能，简化对java代码对操作<br>语法:<br>${表达式}<br>1.2 使用<br>1.2.1 获取值<br>EL表达式只能从域对象(4个域)中获取数据<br>标准写法	<br>${pageScope.键名}	从page域中获取指定键名对应的值<br>${requestScope.键名}	从request域中获取指定键名对应的值<br>${sessionScope.键名}	从session域中获取指定键名对应的值<br>${applicationScope.键名}	从servletContext域中获取指定键名对应的值<br>简化写法	<br>${键名}	特点:默认从最小域开始找，找到后直接显示，不在继续寻找<br>注意:要求四个域键名唯一</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo01&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;EL 表达式基本语法&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    /*模拟Servlet向域中存值*/</span><br><span class="line">    pageContext.setAttribute(&quot;Username&quot;, &quot;Jack&quot;);</span><br><span class="line">    request.setAttribute(&quot;Age&quot;, &quot;50&quot;);</span><br><span class="line">    session.setAttribute(&quot;Gender&quot;, &quot;Male&quot;);</span><br><span class="line">    application.setAttribute(&quot;Address&quot;, &quot;NY&quot;);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h5&gt;标准语法&lt;/h5&gt;</span><br><span class="line">$&#123;pageScope.Username&#125;&lt;br&gt;&lt;%--不会提示空指针异常--%&gt;</span><br><span class="line">$&#123;requestScope.Age&#125;&lt;br&gt;</span><br><span class="line">$&#123;sessionScope.Gender&#125;&lt;br&gt;</span><br><span class="line">$&#123;applicationScope.Address&#125;&lt;br&gt;</span><br><span class="line">&lt;h5&gt;简化语法&lt;/h5&gt;</span><br><span class="line">$&#123;Username&#125;&lt;br&gt;</span><br><span class="line">$&#123;Age&#125;&lt;br&gt;</span><br><span class="line">$&#123;Gender&#125;&lt;br&gt;</span><br><span class="line">$&#123;Address&#125;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>练习<br>获取字符串	${键名}<br>获取对象(User)	${键名.属性名}<br>获取List(Array)集合	${键名[索引]}<br>获取Map集合	${键名.key}<br>${键名[“key”]}<br>——–	<br>注意	El不会出现null和数组角标越界问题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">  &lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">  &lt;title&gt;Demo02&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;h3&gt;获取User对象&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  User user = new User(&quot;Jack&quot;, 13, &quot;Male&quot;);</span><br><span class="line">request.setAttribute(&quot;user&quot;,user);</span><br><span class="line">%&gt;</span><br><span class="line">  $&#123;user&#125;&lt;br&gt;&lt;%--执行该对象对toString方法--%&gt;</span><br><span class="line">    $&#123;user.username&#125; ｜$&#123;user.age&#125; ｜$&#123;user.gender&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">      &lt;h3&gt;获取List集合&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">      List&lt;Object&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">list.add(&quot;A&quot;);</span><br><span class="line">list.add(&quot;B&quot;);</span><br><span class="line">list.add(&quot;C&quot;);</span><br><span class="line">list.add(user);</span><br><span class="line">request.setAttribute(&quot;list&quot;,list);</span><br><span class="line"></span><br><span class="line">%&gt;&gt;</span><br><span class="line">  $&#123;list&#125;&lt;br&gt;&lt;%--执行该对象对toString方法--%&gt;</span><br><span class="line">    $&#123;list[0]&#125; ｜ $&#123;list[1]&#125; ｜ $&#123;list[2]&#125; ｜ $&#123;list[3].username&#125; ｜$&#123;list[3].age&#125;&lt;br&gt;</span><br><span class="line">      $&#123;list[3].gender&#125;&lt;%--EL表达式不会出现集合(数组)角标越界异常--%&gt;</span><br><span class="line"></span><br><span class="line">        &lt;h3&gt;获取map集合&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">map.put(&quot;key1&quot;,&quot;A&quot;);</span><br><span class="line">map.put(&quot;key2&quot;,&quot;B&quot;);</span><br><span class="line">map.put(&quot;key3&quot;,&quot;C&quot;);</span><br><span class="line">map.put(&quot;key.4&quot;,user);</span><br><span class="line">request.setAttribute(&quot;map&quot;,map);</span><br><span class="line">%&gt;</span><br><span class="line">  $&#123;map&#125;&lt;br&gt;&lt;%--执行该对象对toString方法--%&gt;</span><br><span class="line">    $&#123;map.get(&quot;key1&quot;)&#125; | $&#123;map.key2&#125; | $&#123;map.key3&#125;&lt;br&gt;</span><br><span class="line">      $&#123;map[&#x27;key.4&#x27;]&#125;&lt;br&gt;</span><br><span class="line">        $&#123;map[&#x27;key.4&#x27;].username&#125; | $&#123;map[&#x27;key.4&#x27;].age&#125; | $&#123;map[&#x27;key.4&#x27;].gender&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>1.2.2 执行运算<br>运算符	语法<br>算数运算符	+ - * &#x2F;(div) %(mod)<br>比较运算符	&gt; &lt; &gt;&#x3D; &lt;&#x3D; &#x3D;&#x3D;(eq) !&#x3D;(ne)<br>逻辑运算符	&amp;&amp;(and)<br>三元运算符	${条件表达式?为真:为假}<br>——–	————————–<br>空运算符	${not empty 对象}<br>功能:<br>可以判断字符串和对象是否为空<br>可以判断一个集合的长度是否为0</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">  &lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">  &lt;title&gt;Demo03&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">  int a = 4;</span><br><span class="line">int b = 3;</span><br><span class="line">request.setAttribute(&quot;a&quot;, a);</span><br><span class="line">request.setAttribute(&quot;b&quot;, b);</span><br><span class="line">%&gt;</span><br><span class="line">  &lt;h5&gt;算数运算符&lt;/h5&gt;</span><br><span class="line">$&#123;a / b&#125; | $&#123;a div b&#125; &lt;br&gt;</span><br><span class="line">  $&#123;a % b&#125; | $&#123;a mod b&#125; &lt;br&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h5&gt;比较运算符&lt;/h5&gt;</span><br><span class="line">$&#123;a == b&#125; | $&#123;a eq b&#125;&lt;br&gt;</span><br><span class="line">  $&#123;a != b&#125; | $&#123;a ne b&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h5&gt;三元运算符&lt;/h5&gt;</span><br><span class="line">$&#123;a==b?&quot;Y&quot;:&quot;N&quot;&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">  &lt;h5&gt;非空判断&lt;/h5&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  User user = new User();</span><br><span class="line">request.setAttribute(&quot;user&quot;, user);</span><br><span class="line"></span><br><span class="line">List list = new ArrayList();</span><br><span class="line">list.add(&quot;aa&quot;);</span><br><span class="line">request.setAttribute(&quot;list&quot;, list);</span><br><span class="line">%&gt;</span><br><span class="line">  $&#123;not empty user&#125;&lt;%--if(user != null)&#123;&#125;--%&gt;</span><br><span class="line">    $&#123;not empty list&#125;&lt;%--if(list != null &amp;&amp; list.size()&gt;0)--%&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">      &lt;h5&gt;空值判断&lt;/h5&gt;</span><br><span class="line">$&#123;empty user&#125;&lt;%--if(user == null)&#123;&#125;--%&gt;</span><br><span class="line">  $&#123;empty list&#125;&lt;%--if(list == null &amp;&amp; list.size()==0)--%&gt;&lt;br&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>1.2.3 隐式对象<br>EL表达式中有11个隐藏对象<br>掌握<br>pageContext<br>cookie<br>对象	作用<br>pageContext	就是jsp九大内置对象之一，可以通过它获得其他八个内置对象<br>cookie	可以获取浏览器指定cookie名称的值</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo04&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;EL隐式对象&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">    $&#123;pageContext.request.contextPath&#125;&lt;%--动态获取:项目名称(虚拟路径)--%&gt;&lt;br&gt;</span><br><span class="line">    $&#123;cookie.JSESSIONID.value&#125;&lt;%--获取指定cookie名称的值--%&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"><span class="number">1.2</span><span class="number">.4</span> 补充</span><br><span class="line">jsp默认支持el表达式</span><br><span class="line">servlet2<span class="number">.3</span>规范中，默认不支持el表达式</span><br><span class="line">忽略el表达式	方法</span><br><span class="line">忽略当前jsp页面中所有的el表达式	isELIgnored=”<span class="literal">true</span>” 属性</span><br><span class="line">忽略单个el表达式	$&#123;表达式&#125;</span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo04&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h3&gt;EL隐式对象&lt;/h3&gt;</span><br><span class="line">    $&#123;pageContext.request.contextPath&#125;&lt;%--动态获取:项目名称(虚拟路径)--%&gt;&lt;br&gt;</span><br><span class="line">    $&#123;cookie.JSESSIONID.value&#125;&lt;br&gt;&lt;%--获取指定cookie名称的值--%&gt;</span><br><span class="line">    \$&#123;cookie.JSESSIONID.value&#125;&lt;%--获取指定cookie名称的值--%&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>1.3 JavaBean<br>实际上是一个普通Java类<br>使用规范<br>所有字段(成员变量)为private<br>提供无参构造方法<br>提供getter,setter和is方法<br>实现Serializable接口<br>例如:如下User类有4个字段(成员变量),有全参和无参构造方法，有一个属性(username)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String Username;</span><br><span class="line">  <span class="keyword">private</span> Integer Age;</span><br><span class="line">  <span class="keyword">private</span> String  Gender;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="type">boolean</span> success;<span class="comment">//是否操作成功</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSuccess</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> success;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSuccess</span><span class="params">(<span class="type">boolean</span> success)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.success = success;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Username;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">    Username = username;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">    Age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Gender;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">    Gender = gender;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>二.JSTL<br>2.1 概述<br>Jsp 标准标签库(Jsp Standard Tag Library)，是由Apache组织提供的开源的jsp标签库<br>作用:替换和简化jsp页面中java代码的编写<br>JSTL标准标签库有5个子库，但随着发展，目前常使用的是它的核心库(Core)<br>标签库	标签库的URI	前缀<br>Core	<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/core">http://java.sun.com/jsp/jstl/core</a>	c<br>国际化(几乎不用)	<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/fmt">http://java.sun.com/jsp/jstl/fmt</a>	fmt<br>SQL(过时)	<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/sql">http://java.sun.com/jsp/jstl/sql</a>	sql<br>XML(过时)	<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/xml">http://java.sun.com/jsp/jstl/xml</a>	x<br>Functions(几乎不用)	<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/functions">http://java.sun.com/jsp/jstl/functions</a>	fn<br>2.2 Core标签使用<br>2.2.1 使用步骤<br>当前Web项目引入第三方jar包<br>当前JSP页面使用taglib指令引入core核心标签</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">  &lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Demo01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>2.2.2 常用标签<br>标签		语法<br>c:if	相当于Java中的if(){}	&lt;c:if test&#x3D;”boolean值&gt;<br>true:显示标签体内容<br>false:隐藏标签体内容<br>注意:此标签没有else功能，需要使用就取反<br>c:forEach	1)普通for循环for(int i&#x3D;1;i&lt;&#x3D;5;i++){i}<br>&lt;c:forEach&gt;<br>begin&#x3D;”1”起始值(包含)<br>end&#x3D;”5”结束值(包含)<br>step&#x3D;”1”步长1<br>var&#x3D;”i” 当前输出临时变量</p>
<ol start="2">
<li>增强for循环 for(User user:list){user}	&lt;c:forEach items&#x3D;”${list}” var&#x3D;”user” varStatus&#x3D;”vs”&gt;<br>${user}<br><br>items&#x3D;”list” 集合<br>var&#x3D;”user” 当前输出的临时变量<br>varStatus&#x3D;”vs” 变量状态<br>index 当前索引 从0开始<br>count 计数器 从1开始<br>c:choose	相当于java中的switch语句	&lt;c:choose&gt;等价于switch<br>&lt;c:when&gt;等价于case+break<br>&lt;c:otherwise&gt;等价于default<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">  &lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Demo01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%</span></span><br><span class="line"><span class="language-xml">    User user = new User();</span></span><br><span class="line"><span class="language-xml">user.setUsername(&quot;Jack&quot;);</span></span><br><span class="line"><span class="language-xml">request.setAttribute(&quot;user&quot;,user);</span></span><br><span class="line"><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;empty user&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    Welcome ,Please Login</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;not empty user&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  Welcome, $&#123;user.username&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">  &lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">    &lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo02&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;普通for循环&lt;/h3&gt;</span><br><span class="line">&lt;c:forEach begin=&quot;1&quot; end=&quot;5&quot; step=&quot;1&quot; var=&quot;i&quot;&gt;    &lt;%--for循环将临时变量存储到pageContext域空间--%&gt;</span><br><span class="line">    $&#123;i&#125;&lt;br&gt;</span><br><span class="line">      &lt;/c:forEach&gt;</span><br><span class="line"></span><br><span class="line">&lt;h3&gt;增强for循环&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">      List list = new ArrayList();</span><br><span class="line">list.add(new User(&quot;A&quot;,1,&quot;F&quot;));</span><br><span class="line">list.add(new User(&quot;B&quot;,1,&quot;F&quot;));</span><br><span class="line">list.add(new User(&quot;C&quot;,1,&quot;M&quot;));</span><br><span class="line">list.add(new User(&quot;D&quot;,1,&quot;M&quot;));</span><br><span class="line">request.setAttribute(&quot;list&quot;,list);</span><br><span class="line">%&gt;&gt;</span><br><span class="line">  $&#123;requestScope.list&#125;</span><br><span class="line"></span><br><span class="line">&lt;c:forEach items=&quot;$&#123;list&#125;&quot; var=&quot;user&quot; varStatus=&quot;vs&quot;&gt;</span><br><span class="line">  索引:$&#123;vs.index&#125;&lt;br&gt;</span><br><span class="line">    计数器:$&#123;vs.count&#125;&lt;br&gt;</span><br><span class="line">      $&#123;user&#125;&lt;br&gt;</span><br><span class="line">        $&#123;user.username&#125;&lt;br&gt;</span><br><span class="line">          &lt;/c:forEach&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">  &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line">    &lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo03&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;Choose标签&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    Integer money=30000;</span><br><span class="line">request.setAttribute(&quot;money&quot;,money);</span><br><span class="line">%&gt;</span><br><span class="line">  &lt;c:choose&gt;</span><br><span class="line">    &lt;c:when test=&quot;$&#123;money==7000&#125;&quot;&gt;AAA&lt;/c:when&gt;</span><br><span class="line">&lt;c:when test=&quot;$&#123;money==8000&#125;&quot;&gt;BBB&lt;/c:when&gt;</span><br><span class="line">&lt;c:when test=&quot;$&#123;money==9000&#125;&quot;&gt;CCC&lt;/c:when&gt;</span><br><span class="line">&lt;c:when test=&quot;$&#123;money==30000&#125;&quot;&gt;DDD&lt;/c:when&gt;</span><br><span class="line">&lt;c:otherwise&gt;</span><br><span class="line">  ZZZZZZ</span><br><span class="line">&lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
三.三层架构<br>3.1 概述<br>通常意义上的三层架构就是将整个业务应用划分为:表示层、业务逻辑层、数据访问层<br>区分层次的目的为了高聚合低耦合思想<br>表示层:称为web层，与浏览器进行数据交互(控制器合视图)<br>业务逻辑层:又称为service层，处理业务数据(if判断，for循环)<br>数据访问(持久)层:称为Dao层，与数据库进行交互(每一条记录与JavaBean实体产生对应关系)</li>
</ol>
<p>包目录结构	<br>com.xxx	基本包(公司域名倒写)<br>com.xxx.dao	持久层<br>com.xxx.service	业务层<br>com.xxx.web	表示层<br>com.xxx.domain	实体(JavaBean)<br>com.xxx.util	工具<br>3.2 案例:用户信息列表显示<br>需求:MVC模式开发代码，完成用户显示列表功能。<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;1&quot;</span>,<span class="string">&quot;A&quot;</span>,<span class="string">&quot;Male&quot;</span>,<span class="number">18</span>,<span class="string">&quot;NY&quot;</span>,<span class="string">&quot;123&quot;</span>,<span class="string">&quot;sd@qq.com&quot;</span>));</span><br><span class="line">    list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;2&quot;</span>,<span class="string">&quot;B&quot;</span>,<span class="string">&quot;Female&quot;</span>,<span class="number">18</span>,<span class="string">&quot;NY&quot;</span>,<span class="string">&quot;234&quot;</span>,<span class="string">&quot;ad@qq.com&quot;</span>));</span><br><span class="line">    list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;3&quot;</span>,<span class="string">&quot;C&quot;</span>,<span class="string">&quot;Male&quot;</span>,<span class="number">18</span>,<span class="string">&quot;NY&quot;</span>,<span class="string">&quot;345&quot;</span>,<span class="string">&quot;sv@qq.com&quot;</span>));</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">  &#125;&#125;<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String SID;</span><br><span class="line">  <span class="keyword">private</span> String Name;</span><br><span class="line">  <span class="keyword">private</span> String Gender;</span><br><span class="line">  <span class="keyword">private</span> Integer Age;</span><br><span class="line">  <span class="keyword">private</span> String Address;</span><br><span class="line">  <span class="keyword">private</span> String QQ;</span><br><span class="line">  <span class="keyword">private</span> String EMAIL;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//此处省略无参、全参、toString，set/get</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="comment">//调用DAO，查询</span></span><br><span class="line">      <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDao</span>();</span><br><span class="line">      List&lt;User&gt; list = userDao.findAll();</span><br><span class="line">      <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@WebServlet(&quot;/FindAllServlet&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FindAllServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">      <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">      <span class="comment">//调用Service查询</span></span><br><span class="line">      <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">      List&lt;User&gt; list=userService.findAll();</span><br><span class="line">      <span class="comment">//将list存储到request域</span></span><br><span class="line">      req.setAttribute(<span class="string">&quot;list&quot;</span>,list);</span><br><span class="line">      <span class="comment">//转发list.jsp</span></span><br><span class="line">      req.getRequestDispatcher(<span class="string">&quot;/list.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;List&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;table border=<span class="string">&quot;1&quot;</span> cellpadding=<span class="string">&quot;0&quot;</span> cellspacing=<span class="string">&quot;0&quot;</span> width=<span class="string">&quot;500px&quot;</span> align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;编号&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;性别&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;年龄&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;地址&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;QQ&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;邮箱&lt;/th&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">      &lt;c:forEach items=<span class="string">&quot;$&#123;list&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;user&quot;</span>&gt;</span><br><span class="line">        &lt;tr align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.SID&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.name&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.gender&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.age&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.address&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.QQ&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.EMAIL&#125;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/c:forEach&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/18/Java-Web-Session/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/18/Java-Web-Session/" class="post-title-link" itemprop="url">Java Web - Session</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-18 01:22:35" itemprop="dateCreated datePublished" datetime="2020-04-18T01:22:35+08:00">2020-04-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.Session<br>1.1 概述<br>1.2 快速入门<br>HttpSession也是一个对象</p>
<p>说明	API<br>存储数据	void setAttribute(String name,Object value)<br>获取数据	Object getAttribute(String name)<br>删除数据	void removeAttribute(String name)<br>步骤分析</p>
<p>将数据存储到session中</p>
<p>说明	API<br>通过request对象，获取session对象	HttpSession session &#x3D; req.getSession();<br>操作session的API，存储数据	session.setAttribute(“username”,”AAABBBCCCC”);<br>从session中获取数据<br>说明	API<br>通过request对象，获取session对象	HttpSession session &#x3D; req.getSession();<br>操作session的API，获取数据	session.getAttribute(“username”);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/SetSession&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetSession</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//通过request对象，获取session对象</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="comment">//操作session的API，存储数据</span></span><br><span class="line">    session.setAttribute(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;AAABBBCCCC&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/GetSession&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetSession</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//通过request对象，获取session对象</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="comment">//操作session的API，获取数据</span></span><br><span class="line">    <span class="type">String</span>  <span class="variable">username</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;GetSession:&quot;</span>+username);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1.3 工作原理<br>Session基于Cookie技术实现<br>HttpSession session &#x3D; req.getSession();<br>如果用户是第一次访问:表示创建Session对象，生成编号<br>如果用户是第N次访问，根据浏览器携带编号找session对象</p>
<p>1.4 Session细节<br>1.4.1 客户端关闭，服务器不关闭，两次获取的Session数据是否相同<br>默认情况下，浏览器关闭再打开，两次获取的Session不同(基于cookie实现，浏览器关闭，cookie销毁)<br>设置cookie的存活时间(JESSIONID)，代替服务器，覆盖JESSIONID，指定持久化时间</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/SessionDemo01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SessionDemo01</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//指定JESSIONID时间</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//获取session对象</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="comment">//向session中存数据</span></span><br><span class="line">    session.setAttribute(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;zZZ&quot;</span>);</span><br><span class="line">    <span class="comment">//获取SESSION 的唯一编号</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> session.getId();</span><br><span class="line">    <span class="comment">//设置cookie时长</span></span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;JESSIONID&quot;</span>, id);</span><br><span class="line">    <span class="comment">//设置存活时间</span></span><br><span class="line">    cookie.setMaxAge(<span class="number">60</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="comment">//当前项目下共享</span></span><br><span class="line">    cookie.setPath(req.getContextPath());</span><br><span class="line">    <span class="comment">//response响应cookie</span></span><br><span class="line">    resp.addCookie(cookie);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1.4.2 客户端不关闭，服务器关闭，两次获取的Session数据是否相同<br>当服务器正常关闭，重启后，两次获取的session数据一样<br>Tomcat实现了以下功能<br>钝化(序列化):当服务器正常关闭时,session中当数据，会序列化到磁盘<br>活化(反序列化):当服务器开启后，从磁盘中读取文件，反序列化到内存中<br>1.4.3 生命周期<br>何时创建</p>
<p>用户第一次调用req.getAttribute()时，创建<br>何时销毁</p>
<p>服务器非正常关闭<br>非活跃状态30分钟后销毁(tomcat&#x2F;conf&#x2F;web.xml官方已配置)<br>session.invalidate();立即销毁<br>作用范围</p>
<p>一次会话中，多次请求之间<br>注意:每一个浏览器和服务器之间都是独立的会话<br>1.4.4 URL重写<br>Session基于Cookie技术实现；浏览器Cookie可以禁用，一旦禁用，Session会出现问题<br>开发中，一般不考虑禁用Cookie用户</p>
<p>如果真要处理，可以使用URL重写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/SessionDemo02&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SessionDemo02</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//获取session对象</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="comment">//向session中存数据</span></span><br><span class="line">    session.setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;SIODJOISDJSO&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义URL</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;/Day37_war_exploded/GetSession&quot;</span>;</span><br><span class="line">    <span class="comment">//重写URL，拼接JESSIONID</span></span><br><span class="line">    url = resp.encodeURL(url);</span><br><span class="line"></span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;&lt;a href&#x27;&quot;</span> + url + <span class="string">&quot;&#x27;&gt;Direct to get Session&lt;/a&gt;&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1.5 Session特点<br>session存储数据在服务器<br>session存储类型任意(Object)<br>session存储大小和数据没有限制(相对于内存)<br>session存储数据相对安全<br>cookie和session的选择</p>
<p>cookie将数据保存在浏览器端，数据相对不安全，建议敏感数据不要放在cookie中，且数据大小有限制<br>成本低，对服务器要求不高<br>浏览器为了解决该不足，前端使用了localStroage</p>
<p>session将数据保存在服务器端，数据相对安全，数据大小比cookie中灵活<br>成本较高，对服务器压力大</p>
<p>二. 三大域对象总结<br>request,session,ServletContext</p>
<p>2.1 API<br>设置数据	void setAttribute(String name,Object o)<br>获取数据	Object getAttribute(String name)<br>删除数据	void removeAttribute(String name)<br>2.2 生命周期<br>2.2.1 ServleetContext域对象<br>何时创建	服务器正常启动，项目加载时创建<br>何时销毁	服务器关闭或项目卸载时，卸载<br>作用范围	整个web项目(共享数据)<br>2.2.2 HttpSession域对象<br>何时创建	用户第一次调用req.getSession() 方法时创建<br>用户访问携带的JESSIONID与服务器不匹配时创建<br>何时销毁	服务器非正常关闭时<br>未活跃时间30 min<br>session.invalidate();立即销毁<br>作用范围	一次会话中，多次请求间(共享数据)<br>2.2.3 HttpServletRequest域对象<br>何时创建	用户发送请求时创建<br>何时销毁	服务器做出响应后销毁<br>作用范围	一次请求中，多次转发间(共享数据)<br>2.3 小结<br>能用小的不用大的:request&lt;session&lt;servletContext</p>
<p>常用场景</p>
<p>request	一次查询的结果 (servlet转发jsp)<br>session	存放当前会话的私有数据<br>(验证码、购物车、等)<br>servletContext:若需要所有的Servlet都能访问到，才使用这个域对象</p>
<p>三.综合案例<br>3.1 商品购物车<br>3.1.1 需求分析<br>addCatrSetvlet</p>
<p>1.获取请求参数name(product)<br>2.返回:product 商品已加入购物车<br>3.从session中获取购物车<br>4.如果购物车为空，创建cart &#x3D; new HashMap()<br>5.判断，此商品是否存在于购物车<br>6.不存在，添加商品数量1<br>7.存在，在原商品基础上+1<br>8.将购物车重写到session中</p>
<p>cart.jsp</p>
<p>1.从session中获取购物车对象<br>2.判断是否为空<br>3.如果空，显示购物车空<br>4.如果不为空，遍历展示商品和数量</p>
<p>3.1.2 代码实现<br>goods.jsp<br>addCartServlet<br>cart.jsp</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Goods&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;商品列表&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a href=<span class="string">&quot;/Day37_war_exploded/AddCartServlet?name=TV&quot;</span>&gt;TV,add to cart&lt;/a&gt;&lt;br&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;/Day37_war_exploded/AddCartServlet?name=PC&quot;</span>&gt;PC,add to cart&lt;/a&gt;&lt;br&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;/Day37_war_exploded/AddCartServlet?name=Phone&quot;</span>&gt;Phone,add to cart&lt;/a&gt;&lt;br&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/AddCartServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddCartServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//设置编码</span></span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取请求参数</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">product</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    resp.getWriter().write(product + <span class="string">&quot;, has add to Cart&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//从session中获取购物车</span></span><br><span class="line">    Map&lt;String, Integer&gt; cart = (Map&lt;String, Integer&gt;) req.getSession().getAttribute(<span class="string">&quot;cart&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断购物车是否为空</span></span><br><span class="line">    <span class="keyword">if</span> (cart == <span class="literal">null</span>) &#123;</span><br><span class="line">      cart = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断购物车中是否包含本次商品</span></span><br><span class="line">    <span class="keyword">if</span> (cart.containsKey(product)) &#123;</span><br><span class="line">      <span class="comment">//存在,product++</span></span><br><span class="line">      <span class="type">Integer</span> <span class="variable">oldCount</span> <span class="operator">=</span> cart.get(product);<span class="comment">//之前的数量</span></span><br><span class="line">      cart.put(product, ++oldCount);<span class="comment">//数量加一</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//不存在 ,加入购物车</span></span><br><span class="line">      cart.put(product, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重新将购物车写入到session中</span></span><br><span class="line">    req.getSession().setAttribute(<span class="string">&quot;cart&quot;</span>, cart);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//继续浏览</span></span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;&lt;br&gt;&lt;a href=&#x27;/Day37_war_exploded/goods.jsp&#x27;&gt;Continue View&lt;/a&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">    <span class="comment">//查看购物车</span></span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;&lt;br&gt;&lt;a href=&#x27;/Day37_war_exploded/cart.jsp&#x27;&gt;Check Shopping Cart&lt;/a&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200px&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>Product<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>Quantity<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  &lt;%</span><br><span class="line">     //从session中获取购物车</span><br><span class="line">     Map&lt;String, Integer&gt; cart = (Map&lt;String, Integer&gt;) request.getSession().getAttribute(&quot;cart&quot;);</span><br><span class="line">  //判断是否为空</span><br><span class="line">  if (cart == null) &#123;</span><br><span class="line">  out.write(&quot;No Product here<span class="tag">&lt;<span class="name">br</span>&gt;</span>&quot;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">  for (String product : cart.keySet()) &#123;</span><br><span class="line">  out.write(&quot;<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&quot; + product + &quot;<span class="tag">&lt;/<span class="name">td</span>&gt;</span>  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&quot; + cart.get(product) + &quot;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>/&gt;</span>&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  %&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;/Day37_war_exploded/goods.jsp&#x27;</span>&gt;</span>Continue View<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>3.2 用户登陆(验证码)<br>3.2.1 需求分析<br>3.2.2 代码实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/LoginServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//课下作业实现非空判断</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">    <span class="comment">//获取用户输入验证码</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">checkcode</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;checkcode&quot;</span>);</span><br><span class="line">    <span class="comment">//获取session验证码</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">codeSession</span> <span class="operator">=</span> (String) req.getSession().getAttribute(<span class="string">&quot;code_session&quot;</span>);</span><br><span class="line">    <span class="comment">//校验匹配</span></span><br><span class="line">    <span class="keyword">if</span> (!checkcode.equalsIgnoreCase(codeSession)) &#123;</span><br><span class="line">      <span class="comment">//验证码不匹配提示</span></span><br><span class="line">      req.setAttribute(<span class="string">&quot;Error&quot;</span>, <span class="string">&quot;Check Code Wrong&quot;</span>);</span><br><span class="line">      <span class="comment">//转发到login.jsp</span></span><br><span class="line">      req.getRequestDispatcher(<span class="string">&quot;/login.jsp&quot;</span>).forward(req, resp);</span><br><span class="line">      <span class="comment">//代码不再向下执行</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取用户输入到用户名和密码</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断用户名密码</span></span><br><span class="line">    <span class="keyword">if</span> (!(<span class="string">&quot;jack&quot;</span>.equals(username) &amp;&amp; <span class="string">&quot;123&quot;</span>.equals(password))) &#123;</span><br><span class="line">      <span class="comment">//用户名密码不匹配提示</span></span><br><span class="line">      req.setAttribute(<span class="string">&quot;Error&quot;</span>, <span class="string">&quot;Username or Password Wrong&quot;</span>);</span><br><span class="line">      <span class="comment">//转发到login.jsp</span></span><br><span class="line">      req.getRequestDispatcher(<span class="string">&quot;/login.jsp&quot;</span>).forward(req, resp);</span><br><span class="line">      <span class="comment">//代码不再向下执行</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将用户名存入session</span></span><br><span class="line">    req.getSession().setAttribute(<span class="string">&quot;username&quot;</span>, username);</span><br><span class="line">    <span class="comment">//重定向到Succes.jsp</span></span><br><span class="line">    resp.sendRedirect(req.getContextPath() + <span class="string">&quot;/success.jsp&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;/war_exploded/LoginServlet&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">  <span class="title class_">Name</span>: &lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt;</span><br><span class="line">    Password: &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;br&gt;</span><br><span class="line">      Checkcode: &lt;input type=&quot;text&quot; name=&quot;checkcode&quot;&gt;&lt;img src=&quot;/Day37_war_exploded/CheckCodeServlet&quot; id=&quot;image1&quot;</span><br><span class="line">alt=&quot;&quot;&gt;&lt;br&gt;</span><br><span class="line">  &lt;input type=&quot;submit&quot; value=&quot;Login&quot;&gt;</span><br><span class="line">    &lt;span style=&quot;color: red&quot;&gt;</span><br><span class="line">      &lt;%</span><br><span class="line">      String error = (String) request.getAttribute(&quot;Error&quot;);</span><br><span class="line">if (error != null) &#123;</span><br><span class="line">  out.write(error);</span><br><span class="line">&#125;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  document.getElementById(&quot;image1&quot;).onclick = function () &#123;</span><br><span class="line">  this.src = &#x27;/Day37_war_exploded/CheckCodeServlet?&#x27; + new Date().getTime();</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">  &lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">  &lt;title&gt;Success&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">  //获取用户信息</span><br><span class="line">  String username = (String) request.getSession().getAttribute(&quot;username&quot;);</span><br><span class="line">if (username != null)&#123;</span><br><span class="line">  out.write(&quot;Welcome ,&quot;+username);</span><br><span class="line">&#125;</span><br><span class="line">%&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>总结<br>概述<br>在一次会话的多次请求之间共享数据，将数据保存到服务器端<br>实现原理<br>基于Cookie技术<br>jsessionid&#x3D;xxxx<br>常用方法<br>获取session<br>request.getSession()<br>使用session<br>setAttribute()<br>getAttribute()<br>remomveAttribute()<br>生命周期<br>何时创建<br>用户第一次执行getSession()方法时，创建<br>用户携带的jssionid与服务器不匹配时，创建<br>何时销毁<br>服务器非正常关闭时<br>session.invalidate()<br>session默认销毁时间30分钟</p>
<p>tomcat目录&#x2F;conf&#x2F;web.xm<br>作用范围<br>一次会话中，多次请求之间<br>特点</p>
<ol>
<li>session在服务器端存储数据</li>
<li>session存储数据格式可以是任意类型</li>
<li>session存储数据没有大小限制（相对于内存）</li>
<li>session存储数据相对安全<br>三个域对象<br>ServletContext<br>创建<br>销毁<br>作用域<br>HttpSession<br>创建<br>销毁<br>作用域<br>HttpServletRequest<br>创建<br>销毁<br>作用域<br>综合案例<br>商品购物车<br>用户登录（验证码）</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/15/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">swzxsyh</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">197</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/swzxsyh" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;swzxsyh" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/swzxsyh" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;swzxsyh" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">swzxsyh</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


</body>
</html>
