<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"swzxsyh.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="swzxsyh">
<meta property="og:url" content="https://swzxsyh.github.io/page/15/index.html">
<meta property="og:site_name" content="swzxsyh">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="swzxsyh">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://swzxsyh.github.io/page/15/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>swzxsyh</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="swzxsyh" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">swzxsyh</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">--笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-rss">

    <a href="/atom.xml" rel="section"><i class="fa fa-rss fa-fw"></i>RSS</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/21/EL-JSTL-MVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/21/EL-JSTL-MVC/" class="post-title-link" itemprop="url">EL & JSTL & MVC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-21 01:23:40" itemprop="dateCreated datePublished" datetime="2020-04-21T01:23:40+08:00">2020-04-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.EL<br>1.1 概述<br>表达式语言(Expression Language)<br>作用:<br>主要用于代替jsp中脚本的功能，简化对java代码对操作<br>语法:<br>${表达式}<br>1.2 使用<br>1.2.1 获取值<br>EL表达式只能从域对象(4个域)中获取数据<br>标准写法	<br>${pageScope.键名}	从page域中获取指定键名对应的值<br>${requestScope.键名}	从request域中获取指定键名对应的值<br>${sessionScope.键名}	从session域中获取指定键名对应的值<br>${applicationScope.键名}	从servletContext域中获取指定键名对应的值<br>简化写法	<br>${键名}	特点:默认从最小域开始找，找到后直接显示，不在继续寻找<br>注意:要求四个域键名唯一</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo01&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h3&gt;EL 表达式基本语法&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    /*模拟Servlet向域中存值*/</span><br><span class="line">    pageContext.setAttribute(&quot;Username&quot;, &quot;Jack&quot;);</span><br><span class="line">    request.setAttribute(&quot;Age&quot;, &quot;50&quot;);</span><br><span class="line">    session.setAttribute(&quot;Gender&quot;, &quot;Male&quot;);</span><br><span class="line">    application.setAttribute(&quot;Address&quot;, &quot;NY&quot;);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;h5&gt;标准语法&lt;/h5&gt;</span><br><span class="line">$&#123;pageScope.Username&#125;&lt;br&gt;&lt;%--不会提示空指针异常--%&gt;</span><br><span class="line">$&#123;requestScope.Age&#125;&lt;br&gt;</span><br><span class="line">$&#123;sessionScope.Gender&#125;&lt;br&gt;</span><br><span class="line">$&#123;applicationScope.Address&#125;&lt;br&gt;</span><br><span class="line">&lt;h5&gt;简化语法&lt;/h5&gt;</span><br><span class="line">$&#123;Username&#125;&lt;br&gt;</span><br><span class="line">$&#123;Age&#125;&lt;br&gt;</span><br><span class="line">$&#123;Gender&#125;&lt;br&gt;</span><br><span class="line">$&#123;Address&#125;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>练习<br>获取字符串	${键名}<br>获取对象(User)	${键名.属性名}<br>获取List(Array)集合	${键名[索引]}<br>获取Map集合	${键名.key}<br>${键名[“key”]}<br>——–	<br>注意	El不会出现null和数组角标越界问题</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">  &lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">  &lt;title&gt;Demo02&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;h3&gt;获取User对象&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  User user = new User(&quot;Jack&quot;, 13, &quot;Male&quot;);</span><br><span class="line">request.setAttribute(&quot;user&quot;,user);</span><br><span class="line">%&gt;</span><br><span class="line">  $&#123;user&#125;&lt;br&gt;&lt;%--执行该对象对toString方法--%&gt;</span><br><span class="line">    $&#123;user.username&#125; ｜$&#123;user.age&#125; ｜$&#123;user.gender&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">      &lt;h3&gt;获取List集合&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">      List&lt;Object&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">list.add(&quot;A&quot;);</span><br><span class="line">list.add(&quot;B&quot;);</span><br><span class="line">list.add(&quot;C&quot;);</span><br><span class="line">list.add(user);</span><br><span class="line">request.setAttribute(&quot;list&quot;,list);</span><br><span class="line"></span><br><span class="line">%&gt;&gt;</span><br><span class="line">  $&#123;list&#125;&lt;br&gt;&lt;%--执行该对象对toString方法--%&gt;</span><br><span class="line">    $&#123;list[0]&#125; ｜ $&#123;list[1]&#125; ｜ $&#123;list[2]&#125; ｜ $&#123;list[3].username&#125; ｜$&#123;list[3].age&#125;&lt;br&gt;</span><br><span class="line">      $&#123;list[3].gender&#125;&lt;%--EL表达式不会出现集合(数组)角标越界异常--%&gt;</span><br><span class="line"></span><br><span class="line">        &lt;h3&gt;获取map集合&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</span><br><span class="line">map.put(&quot;key1&quot;,&quot;A&quot;);</span><br><span class="line">map.put(&quot;key2&quot;,&quot;B&quot;);</span><br><span class="line">map.put(&quot;key3&quot;,&quot;C&quot;);</span><br><span class="line">map.put(&quot;key.4&quot;,user);</span><br><span class="line">request.setAttribute(&quot;map&quot;,map);</span><br><span class="line">%&gt;</span><br><span class="line">  $&#123;map&#125;&lt;br&gt;&lt;%--执行该对象对toString方法--%&gt;</span><br><span class="line">    $&#123;map.get(&quot;key1&quot;)&#125; | $&#123;map.key2&#125; | $&#123;map.key3&#125;&lt;br&gt;</span><br><span class="line">      $&#123;map[&#x27;key.4&#x27;]&#125;&lt;br&gt;</span><br><span class="line">        $&#123;map[&#x27;key.4&#x27;].username&#125; | $&#123;map[&#x27;key.4&#x27;].age&#125; | $&#123;map[&#x27;key.4&#x27;].gender&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>1.2.2 执行运算<br>运算符	语法<br>算数运算符	+ - * &#x2F;(div) %(mod)<br>比较运算符	&gt; &lt; &gt;&#x3D; &lt;&#x3D; &#x3D;&#x3D;(eq) !&#x3D;(ne)<br>逻辑运算符	&amp;&amp;(and)<br>三元运算符	${条件表达式?为真:为假}<br>——–	————————–<br>空运算符	${not empty 对象}<br>功能:<br>可以判断字符串和对象是否为空<br>可以判断一个集合的长度是否为0</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">  &lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">  &lt;title&gt;Demo03&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">  int a = 4;</span><br><span class="line">int b = 3;</span><br><span class="line">request.setAttribute(&quot;a&quot;, a);</span><br><span class="line">request.setAttribute(&quot;b&quot;, b);</span><br><span class="line">%&gt;</span><br><span class="line">  &lt;h5&gt;算数运算符&lt;/h5&gt;</span><br><span class="line">$&#123;a / b&#125; | $&#123;a div b&#125; &lt;br&gt;</span><br><span class="line">  $&#123;a % b&#125; | $&#123;a mod b&#125; &lt;br&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h5&gt;比较运算符&lt;/h5&gt;</span><br><span class="line">$&#123;a == b&#125; | $&#123;a eq b&#125;&lt;br&gt;</span><br><span class="line">  $&#123;a != b&#125; | $&#123;a ne b&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h5&gt;三元运算符&lt;/h5&gt;</span><br><span class="line">$&#123;a==b?&quot;Y&quot;:&quot;N&quot;&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">  &lt;h5&gt;非空判断&lt;/h5&gt;</span><br><span class="line">&lt;%</span><br><span class="line">  User user = new User();</span><br><span class="line">request.setAttribute(&quot;user&quot;, user);</span><br><span class="line"></span><br><span class="line">List list = new ArrayList();</span><br><span class="line">list.add(&quot;aa&quot;);</span><br><span class="line">request.setAttribute(&quot;list&quot;, list);</span><br><span class="line">%&gt;</span><br><span class="line">  $&#123;not empty user&#125;&lt;%--if(user != null)&#123;&#125;--%&gt;</span><br><span class="line">    $&#123;not empty list&#125;&lt;%--if(list != null &amp;&amp; list.size()&gt;0)--%&gt;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">      &lt;h5&gt;空值判断&lt;/h5&gt;</span><br><span class="line">$&#123;empty user&#125;&lt;%--if(user == null)&#123;&#125;--%&gt;</span><br><span class="line">  $&#123;empty list&#125;&lt;%--if(list == null &amp;&amp; list.size()==0)--%&gt;&lt;br&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>1.2.3 隐式对象<br>EL表达式中有11个隐藏对象<br>掌握<br>pageContext<br>cookie<br>对象	作用<br>pageContext	就是jsp九大内置对象之一，可以通过它获得其他八个内置对象<br>cookie	可以获取浏览器指定cookie名称的值</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo04&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;EL隐式对象&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">    $&#123;pageContext.request.contextPath&#125;&lt;%--动态获取:项目名称(虚拟路径)--%&gt;&lt;br&gt;</span><br><span class="line">    $&#123;cookie.JSESSIONID.value&#125;&lt;%--获取指定cookie名称的值--%&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"><span class="number">1.2</span><span class="number">.4</span> 补充</span><br><span class="line">jsp默认支持el表达式</span><br><span class="line">servlet2<span class="number">.3</span>规范中，默认不支持el表达式</span><br><span class="line">忽略el表达式	方法</span><br><span class="line">忽略当前jsp页面中所有的el表达式	isELIgnored=”<span class="literal">true</span>” 属性</span><br><span class="line">忽略单个el表达式	$&#123;表达式&#125;</span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> isELIgnored=<span class="string">&quot;false&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo04&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h3&gt;EL隐式对象&lt;/h3&gt;</span><br><span class="line">    $&#123;pageContext.request.contextPath&#125;&lt;%--动态获取:项目名称(虚拟路径)--%&gt;&lt;br&gt;</span><br><span class="line">    $&#123;cookie.JSESSIONID.value&#125;&lt;br&gt;&lt;%--获取指定cookie名称的值--%&gt;</span><br><span class="line">    \$&#123;cookie.JSESSIONID.value&#125;&lt;%--获取指定cookie名称的值--%&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>1.3 JavaBean<br>实际上是一个普通Java类<br>使用规范<br>所有字段(成员变量)为private<br>提供无参构造方法<br>提供getter,setter和is方法<br>实现Serializable接口<br>例如:如下User类有4个字段(成员变量),有全参和无参构造方法，有一个属性(username)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String Username;</span><br><span class="line">  <span class="keyword">private</span> Integer Age;</span><br><span class="line">  <span class="keyword">private</span> String  Gender;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="type">boolean</span> success;<span class="comment">//是否操作成功</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSuccess</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> success;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setSuccess</span><span class="params">(<span class="type">boolean</span> success)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.success = success;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Username;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">    Username = username;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Integer <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(Integer age)</span> &#123;</span><br><span class="line">    Age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getGender</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> Gender;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGender</span><span class="params">(String gender)</span> &#123;</span><br><span class="line">    Gender = gender;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>二.JSTL<br>2.1 概述<br>Jsp 标准标签库(Jsp Standard Tag Library)，是由Apache组织提供的开源的jsp标签库<br>作用:替换和简化jsp页面中java代码的编写<br>JSTL标准标签库有5个子库，但随着发展，目前常使用的是它的核心库(Core)<br>标签库	标签库的URI	前缀<br>Core	<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/core">http://java.sun.com/jsp/jstl/core</a>	c<br>国际化(几乎不用)	<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/fmt">http://java.sun.com/jsp/jstl/fmt</a>	fmt<br>SQL(过时)	<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/sql">http://java.sun.com/jsp/jstl/sql</a>	sql<br>XML(过时)	<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/xml">http://java.sun.com/jsp/jstl/xml</a>	x<br>Functions(几乎不用)	<a target="_blank" rel="noopener" href="http://java.sun.com/jsp/jstl/functions">http://java.sun.com/jsp/jstl/functions</a>	fn<br>2.2 Core标签使用<br>2.2.1 使用步骤<br>当前Web项目引入第三方jar包<br>当前JSP页面使用taglib指令引入core核心标签</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">  &lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Demo01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>2.2.2 常用标签<br>标签		语法<br>c:if	相当于Java中的if(){}	&lt;c:if test&#x3D;”boolean值&gt;<br>true:显示标签体内容<br>false:隐藏标签体内容<br>注意:此标签没有else功能，需要使用就取反<br>c:forEach	1)普通for循环for(int i&#x3D;1;i&lt;&#x3D;5;i++){i}<br>&lt;c:forEach&gt;<br>begin&#x3D;”1”起始值(包含)<br>end&#x3D;”5”结束值(包含)<br>step&#x3D;”1”步长1<br>var&#x3D;”i” 当前输出临时变量</p>
<ol start="2">
<li>增强for循环 for(User user:list){user}	&lt;c:forEach items&#x3D;”${list}” var&#x3D;”user” varStatus&#x3D;”vs”&gt;<br>${user}<br><br>items&#x3D;”list” 集合<br>var&#x3D;”user” 当前输出的临时变量<br>varStatus&#x3D;”vs” 变量状态<br>index 当前索引 从0开始<br>count 计数器 从1开始<br>c:choose	相当于java中的switch语句	&lt;c:choose&gt;等价于switch<br>&lt;c:when&gt;等价于case+break<br>&lt;c:otherwise&gt;等价于default<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">  &lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Demo01<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    &lt;%</span></span><br><span class="line"><span class="language-xml">    User user = new User();</span></span><br><span class="line"><span class="language-xml">user.setUsername(&quot;Jack&quot;);</span></span><br><span class="line"><span class="language-xml">request.setAttribute(&quot;user&quot;,user);</span></span><br><span class="line"><span class="language-xml">%&gt;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;empty user&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    Welcome ,Please Login</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">c:if</span> <span class="attr">test</span>=<span class="string">&quot;$&#123;not empty user&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  Welcome, $&#123;user.username&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">c:if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">  &lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">    &lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo02&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;普通for循环&lt;/h3&gt;</span><br><span class="line">&lt;c:forEach begin=&quot;1&quot; end=&quot;5&quot; step=&quot;1&quot; var=&quot;i&quot;&gt;    &lt;%--for循环将临时变量存储到pageContext域空间--%&gt;</span><br><span class="line">    $&#123;i&#125;&lt;br&gt;</span><br><span class="line">      &lt;/c:forEach&gt;</span><br><span class="line"></span><br><span class="line">&lt;h3&gt;增强for循环&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">      List list = new ArrayList();</span><br><span class="line">list.add(new User(&quot;A&quot;,1,&quot;F&quot;));</span><br><span class="line">list.add(new User(&quot;B&quot;,1,&quot;F&quot;));</span><br><span class="line">list.add(new User(&quot;C&quot;,1,&quot;M&quot;));</span><br><span class="line">list.add(new User(&quot;D&quot;,1,&quot;M&quot;));</span><br><span class="line">request.setAttribute(&quot;list&quot;,list);</span><br><span class="line">%&gt;&gt;</span><br><span class="line">  $&#123;requestScope.list&#125;</span><br><span class="line"></span><br><span class="line">&lt;c:forEach items=&quot;$&#123;list&#125;&quot; var=&quot;user&quot; varStatus=&quot;vs&quot;&gt;</span><br><span class="line">  索引:$&#123;vs.index&#125;&lt;br&gt;</span><br><span class="line">    计数器:$&#123;vs.count&#125;&lt;br&gt;</span><br><span class="line">      $&#123;user&#125;&lt;br&gt;</span><br><span class="line">        $&#123;user.username&#125;&lt;br&gt;</span><br><span class="line">          &lt;/c:forEach&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">  &lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line">    &lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo03&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h3&gt;Choose标签&lt;/h3&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    Integer money=30000;</span><br><span class="line">request.setAttribute(&quot;money&quot;,money);</span><br><span class="line">%&gt;</span><br><span class="line">  &lt;c:choose&gt;</span><br><span class="line">    &lt;c:when test=&quot;$&#123;money==7000&#125;&quot;&gt;AAA&lt;/c:when&gt;</span><br><span class="line">&lt;c:when test=&quot;$&#123;money==8000&#125;&quot;&gt;BBB&lt;/c:when&gt;</span><br><span class="line">&lt;c:when test=&quot;$&#123;money==9000&#125;&quot;&gt;CCC&lt;/c:when&gt;</span><br><span class="line">&lt;c:when test=&quot;$&#123;money==30000&#125;&quot;&gt;DDD&lt;/c:when&gt;</span><br><span class="line">&lt;c:otherwise&gt;</span><br><span class="line">  ZZZZZZ</span><br><span class="line">&lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
三.三层架构<br>3.1 概述<br>通常意义上的三层架构就是将整个业务应用划分为:表示层、业务逻辑层、数据访问层<br>区分层次的目的为了高聚合低耦合思想<br>表示层:称为web层，与浏览器进行数据交互(控制器合视图)<br>业务逻辑层:又称为service层，处理业务数据(if判断，for循环)<br>数据访问(持久)层:称为Dao层，与数据库进行交互(每一条记录与JavaBean实体产生对应关系)</li>
</ol>
<p>包目录结构	<br>com.xxx	基本包(公司域名倒写)<br>com.xxx.dao	持久层<br>com.xxx.service	业务层<br>com.xxx.web	表示层<br>com.xxx.domain	实体(JavaBean)<br>com.xxx.util	工具<br>3.2 案例:用户信息列表显示<br>需求:MVC模式开发代码，完成用户显示列表功能。<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserDao</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> List&lt;User&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> &#123;</span><br><span class="line">    list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;1&quot;</span>,<span class="string">&quot;A&quot;</span>,<span class="string">&quot;Male&quot;</span>,<span class="number">18</span>,<span class="string">&quot;NY&quot;</span>,<span class="string">&quot;123&quot;</span>,<span class="string">&quot;sd@qq.com&quot;</span>));</span><br><span class="line">    list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;2&quot;</span>,<span class="string">&quot;B&quot;</span>,<span class="string">&quot;Female&quot;</span>,<span class="number">18</span>,<span class="string">&quot;NY&quot;</span>,<span class="string">&quot;234&quot;</span>,<span class="string">&quot;ad@qq.com&quot;</span>));</span><br><span class="line">    list.add(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;3&quot;</span>,<span class="string">&quot;C&quot;</span>,<span class="string">&quot;Male&quot;</span>,<span class="number">18</span>,<span class="string">&quot;NY&quot;</span>,<span class="string">&quot;345&quot;</span>,<span class="string">&quot;sv@qq.com&quot;</span>));</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> list;</span><br><span class="line">  &#125;&#125;<span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String SID;</span><br><span class="line">  <span class="keyword">private</span> String Name;</span><br><span class="line">  <span class="keyword">private</span> String Gender;</span><br><span class="line">  <span class="keyword">private</span> Integer Age;</span><br><span class="line">  <span class="keyword">private</span> String Address;</span><br><span class="line">  <span class="keyword">private</span> String QQ;</span><br><span class="line">  <span class="keyword">private</span> String EMAIL;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//此处省略无参、全参、toString，set/get</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">findAll</span><span class="params">()</span> &#123;</span><br><span class="line">      <span class="comment">//调用DAO，查询</span></span><br><span class="line">      <span class="type">UserDao</span> <span class="variable">userDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserDao</span>();</span><br><span class="line">      List&lt;User&gt; list = userDao.findAll();</span><br><span class="line">      <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@WebServlet(&quot;/FindAllServlet&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FindAllServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">      <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">      <span class="comment">//调用Service查询</span></span><br><span class="line">      <span class="type">UserService</span> <span class="variable">userService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserService</span>();</span><br><span class="line">      List&lt;User&gt; list=userService.findAll();</span><br><span class="line">      <span class="comment">//将list存储到request域</span></span><br><span class="line">      req.setAttribute(<span class="string">&quot;list&quot;</span>,list);</span><br><span class="line">      <span class="comment">//转发list.jsp</span></span><br><span class="line">      req.getRequestDispatcher(<span class="string">&quot;/list.jsp&quot;</span>).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%@ taglib prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;List&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;table border=<span class="string">&quot;1&quot;</span> cellpadding=<span class="string">&quot;0&quot;</span> cellspacing=<span class="string">&quot;0&quot;</span> width=<span class="string">&quot;500px&quot;</span> align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;编号&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;姓名&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;性别&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;年龄&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;地址&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;QQ&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;邮箱&lt;/th&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line">      &lt;c:forEach items=<span class="string">&quot;$&#123;list&#125;&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;user&quot;</span>&gt;</span><br><span class="line">        &lt;tr align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.SID&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.name&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.gender&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.age&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.address&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.QQ&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;user.EMAIL&#125;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/c:forEach&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/18/Java-Web-Session/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/18/Java-Web-Session/" class="post-title-link" itemprop="url">Java Web - Session</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-18 01:22:35" itemprop="dateCreated datePublished" datetime="2020-04-18T01:22:35+08:00">2020-04-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.Session<br>1.1 概述<br>1.2 快速入门<br>HttpSession也是一个对象</p>
<p>说明	API<br>存储数据	void setAttribute(String name,Object value)<br>获取数据	Object getAttribute(String name)<br>删除数据	void removeAttribute(String name)<br>步骤分析</p>
<p>将数据存储到session中</p>
<p>说明	API<br>通过request对象，获取session对象	HttpSession session &#x3D; req.getSession();<br>操作session的API，存储数据	session.setAttribute(“username”,”AAABBBCCCC”);<br>从session中获取数据<br>说明	API<br>通过request对象，获取session对象	HttpSession session &#x3D; req.getSession();<br>操作session的API，获取数据	session.getAttribute(“username”);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/SetSession&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetSession</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//通过request对象，获取session对象</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="comment">//操作session的API，存储数据</span></span><br><span class="line">    session.setAttribute(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;AAABBBCCCC&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/GetSession&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetSession</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//通过request对象，获取session对象</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="comment">//操作session的API，获取数据</span></span><br><span class="line">    <span class="type">String</span>  <span class="variable">username</span> <span class="operator">=</span> (String) session.getAttribute(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;GetSession:&quot;</span>+username);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1.3 工作原理<br>Session基于Cookie技术实现<br>HttpSession session &#x3D; req.getSession();<br>如果用户是第一次访问:表示创建Session对象，生成编号<br>如果用户是第N次访问，根据浏览器携带编号找session对象</p>
<p>1.4 Session细节<br>1.4.1 客户端关闭，服务器不关闭，两次获取的Session数据是否相同<br>默认情况下，浏览器关闭再打开，两次获取的Session不同(基于cookie实现，浏览器关闭，cookie销毁)<br>设置cookie的存活时间(JESSIONID)，代替服务器，覆盖JESSIONID，指定持久化时间</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/SessionDemo01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SessionDemo01</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//指定JESSIONID时间</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//获取session对象</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="comment">//向session中存数据</span></span><br><span class="line">    session.setAttribute(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;zZZ&quot;</span>);</span><br><span class="line">    <span class="comment">//获取SESSION 的唯一编号</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> session.getId();</span><br><span class="line">    <span class="comment">//设置cookie时长</span></span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;JESSIONID&quot;</span>, id);</span><br><span class="line">    <span class="comment">//设置存活时间</span></span><br><span class="line">    cookie.setMaxAge(<span class="number">60</span>*<span class="number">2</span>);</span><br><span class="line">    <span class="comment">//当前项目下共享</span></span><br><span class="line">    cookie.setPath(req.getContextPath());</span><br><span class="line">    <span class="comment">//response响应cookie</span></span><br><span class="line">    resp.addCookie(cookie);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1.4.2 客户端不关闭，服务器关闭，两次获取的Session数据是否相同<br>当服务器正常关闭，重启后，两次获取的session数据一样<br>Tomcat实现了以下功能<br>钝化(序列化):当服务器正常关闭时,session中当数据，会序列化到磁盘<br>活化(反序列化):当服务器开启后，从磁盘中读取文件，反序列化到内存中<br>1.4.3 生命周期<br>何时创建</p>
<p>用户第一次调用req.getAttribute()时，创建<br>何时销毁</p>
<p>服务器非正常关闭<br>非活跃状态30分钟后销毁(tomcat&#x2F;conf&#x2F;web.xml官方已配置)<br>session.invalidate();立即销毁<br>作用范围</p>
<p>一次会话中，多次请求之间<br>注意:每一个浏览器和服务器之间都是独立的会话<br>1.4.4 URL重写<br>Session基于Cookie技术实现；浏览器Cookie可以禁用，一旦禁用，Session会出现问题<br>开发中，一般不考虑禁用Cookie用户</p>
<p>如果真要处理，可以使用URL重写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/SessionDemo02&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SessionDemo02</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//获取session对象</span></span><br><span class="line">    <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> req.getSession();</span><br><span class="line">    <span class="comment">//向session中存数据</span></span><br><span class="line">    session.setAttribute(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;SIODJOISDJSO&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//定义URL</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;/Day37_war_exploded/GetSession&quot;</span>;</span><br><span class="line">    <span class="comment">//重写URL，拼接JESSIONID</span></span><br><span class="line">    url = resp.encodeURL(url);</span><br><span class="line"></span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;&lt;a href&#x27;&quot;</span> + url + <span class="string">&quot;&#x27;&gt;Direct to get Session&lt;/a&gt;&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1.5 Session特点<br>session存储数据在服务器<br>session存储类型任意(Object)<br>session存储大小和数据没有限制(相对于内存)<br>session存储数据相对安全<br>cookie和session的选择</p>
<p>cookie将数据保存在浏览器端，数据相对不安全，建议敏感数据不要放在cookie中，且数据大小有限制<br>成本低，对服务器要求不高<br>浏览器为了解决该不足，前端使用了localStroage</p>
<p>session将数据保存在服务器端，数据相对安全，数据大小比cookie中灵活<br>成本较高，对服务器压力大</p>
<p>二. 三大域对象总结<br>request,session,ServletContext</p>
<p>2.1 API<br>设置数据	void setAttribute(String name,Object o)<br>获取数据	Object getAttribute(String name)<br>删除数据	void removeAttribute(String name)<br>2.2 生命周期<br>2.2.1 ServleetContext域对象<br>何时创建	服务器正常启动，项目加载时创建<br>何时销毁	服务器关闭或项目卸载时，卸载<br>作用范围	整个web项目(共享数据)<br>2.2.2 HttpSession域对象<br>何时创建	用户第一次调用req.getSession() 方法时创建<br>用户访问携带的JESSIONID与服务器不匹配时创建<br>何时销毁	服务器非正常关闭时<br>未活跃时间30 min<br>session.invalidate();立即销毁<br>作用范围	一次会话中，多次请求间(共享数据)<br>2.2.3 HttpServletRequest域对象<br>何时创建	用户发送请求时创建<br>何时销毁	服务器做出响应后销毁<br>作用范围	一次请求中，多次转发间(共享数据)<br>2.3 小结<br>能用小的不用大的:request&lt;session&lt;servletContext</p>
<p>常用场景</p>
<p>request	一次查询的结果 (servlet转发jsp)<br>session	存放当前会话的私有数据<br>(验证码、购物车、等)<br>servletContext:若需要所有的Servlet都能访问到，才使用这个域对象</p>
<p>三.综合案例<br>3.1 商品购物车<br>3.1.1 需求分析<br>addCatrSetvlet</p>
<p>1.获取请求参数name(product)<br>2.返回:product 商品已加入购物车<br>3.从session中获取购物车<br>4.如果购物车为空，创建cart &#x3D; new HashMap()<br>5.判断，此商品是否存在于购物车<br>6.不存在，添加商品数量1<br>7.存在，在原商品基础上+1<br>8.将购物车重写到session中</p>
<p>cart.jsp</p>
<p>1.从session中获取购物车对象<br>2.判断是否为空<br>3.如果空，显示购物车空<br>4.如果不为空，遍历展示商品和数量</p>
<p>3.1.2 代码实现<br>goods.jsp<br>addCartServlet<br>cart.jsp</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;Goods&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">  &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;h3&gt;商品列表&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">    &lt;a href=<span class="string">&quot;/Day37_war_exploded/AddCartServlet?name=TV&quot;</span>&gt;TV,add to cart&lt;/a&gt;&lt;br&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;/Day37_war_exploded/AddCartServlet?name=PC&quot;</span>&gt;PC,add to cart&lt;/a&gt;&lt;br&gt;</span><br><span class="line">    &lt;a href=<span class="string">&quot;/Day37_war_exploded/AddCartServlet?name=Phone&quot;</span>&gt;Phone,add to cart&lt;/a&gt;&lt;br&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/AddCartServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AddCartServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//设置编码</span></span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取请求参数</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">product</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    resp.getWriter().write(product + <span class="string">&quot;, has add to Cart&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//从session中获取购物车</span></span><br><span class="line">    Map&lt;String, Integer&gt; cart = (Map&lt;String, Integer&gt;) req.getSession().getAttribute(<span class="string">&quot;cart&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断购物车是否为空</span></span><br><span class="line">    <span class="keyword">if</span> (cart == <span class="literal">null</span>) &#123;</span><br><span class="line">      cart = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断购物车中是否包含本次商品</span></span><br><span class="line">    <span class="keyword">if</span> (cart.containsKey(product)) &#123;</span><br><span class="line">      <span class="comment">//存在,product++</span></span><br><span class="line">      <span class="type">Integer</span> <span class="variable">oldCount</span> <span class="operator">=</span> cart.get(product);<span class="comment">//之前的数量</span></span><br><span class="line">      cart.put(product, ++oldCount);<span class="comment">//数量加一</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//不存在 ,加入购物车</span></span><br><span class="line">      cart.put(product, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//重新将购物车写入到session中</span></span><br><span class="line">    req.getSession().setAttribute(<span class="string">&quot;cart&quot;</span>, cart);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//继续浏览</span></span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;&lt;br&gt;&lt;a href=&#x27;/Day37_war_exploded/goods.jsp&#x27;&gt;Continue View&lt;/a&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">    <span class="comment">//查看购物车</span></span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;&lt;br&gt;&lt;a href=&#x27;/Day37_war_exploded/cart.jsp&#x27;&gt;Check Shopping Cart&lt;/a&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span> <span class="attr">width</span>=<span class="string">&quot;200px&quot;</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>Product<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">th</span>&gt;</span>Quantity<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  &lt;%</span><br><span class="line">     //从session中获取购物车</span><br><span class="line">     Map&lt;String, Integer&gt; cart = (Map&lt;String, Integer&gt;) request.getSession().getAttribute(&quot;cart&quot;);</span><br><span class="line">  //判断是否为空</span><br><span class="line">  if (cart == null) &#123;</span><br><span class="line">  out.write(&quot;No Product here<span class="tag">&lt;<span class="name">br</span>&gt;</span>&quot;);</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">  for (String product : cart.keySet()) &#123;</span><br><span class="line">  out.write(&quot;<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>&quot; + product + &quot;<span class="tag">&lt;/<span class="name">td</span>&gt;</span>  <span class="tag">&lt;<span class="name">td</span>&gt;</span>&quot; + cart.get(product) + &quot;<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>/&gt;</span>&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  %&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;/Day37_war_exploded/goods.jsp&#x27;</span>&gt;</span>Continue View<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>3.2 用户登陆(验证码)<br>3.2.1 需求分析<br>3.2.2 代码实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/LoginServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//课下作业实现非空判断</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">    <span class="comment">//获取用户输入验证码</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">checkcode</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;checkcode&quot;</span>);</span><br><span class="line">    <span class="comment">//获取session验证码</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">codeSession</span> <span class="operator">=</span> (String) req.getSession().getAttribute(<span class="string">&quot;code_session&quot;</span>);</span><br><span class="line">    <span class="comment">//校验匹配</span></span><br><span class="line">    <span class="keyword">if</span> (!checkcode.equalsIgnoreCase(codeSession)) &#123;</span><br><span class="line">      <span class="comment">//验证码不匹配提示</span></span><br><span class="line">      req.setAttribute(<span class="string">&quot;Error&quot;</span>, <span class="string">&quot;Check Code Wrong&quot;</span>);</span><br><span class="line">      <span class="comment">//转发到login.jsp</span></span><br><span class="line">      req.getRequestDispatcher(<span class="string">&quot;/login.jsp&quot;</span>).forward(req, resp);</span><br><span class="line">      <span class="comment">//代码不再向下执行</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取用户输入到用户名和密码</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断用户名密码</span></span><br><span class="line">    <span class="keyword">if</span> (!(<span class="string">&quot;jack&quot;</span>.equals(username) &amp;&amp; <span class="string">&quot;123&quot;</span>.equals(password))) &#123;</span><br><span class="line">      <span class="comment">//用户名密码不匹配提示</span></span><br><span class="line">      req.setAttribute(<span class="string">&quot;Error&quot;</span>, <span class="string">&quot;Username or Password Wrong&quot;</span>);</span><br><span class="line">      <span class="comment">//转发到login.jsp</span></span><br><span class="line">      req.getRequestDispatcher(<span class="string">&quot;/login.jsp&quot;</span>).forward(req, resp);</span><br><span class="line">      <span class="comment">//代码不再向下执行</span></span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将用户名存入session</span></span><br><span class="line">    req.getSession().setAttribute(<span class="string">&quot;username&quot;</span>, username);</span><br><span class="line">    <span class="comment">//重定向到Succes.jsp</span></span><br><span class="line">    resp.sendRedirect(req.getContextPath() + <span class="string">&quot;/success.jsp&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=<span class="string">&quot;/war_exploded/LoginServlet&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">  <span class="title class_">Name</span>: &lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;br&gt;</span><br><span class="line">    Password: &lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;br&gt;</span><br><span class="line">      Checkcode: &lt;input type=&quot;text&quot; name=&quot;checkcode&quot;&gt;&lt;img src=&quot;/Day37_war_exploded/CheckCodeServlet&quot; id=&quot;image1&quot;</span><br><span class="line">alt=&quot;&quot;&gt;&lt;br&gt;</span><br><span class="line">  &lt;input type=&quot;submit&quot; value=&quot;Login&quot;&gt;</span><br><span class="line">    &lt;span style=&quot;color: red&quot;&gt;</span><br><span class="line">      &lt;%</span><br><span class="line">      String error = (String) request.getAttribute(&quot;Error&quot;);</span><br><span class="line">if (error != null) &#123;</span><br><span class="line">  out.write(error);</span><br><span class="line">&#125;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  document.getElementById(&quot;image1&quot;).onclick = function () &#123;</span><br><span class="line">  this.src = &#x27;/Day37_war_exploded/CheckCodeServlet?&#x27; + new Date().getTime();</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">  &lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">  &lt;title&gt;Success&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">  //获取用户信息</span><br><span class="line">  String username = (String) request.getSession().getAttribute(&quot;username&quot;);</span><br><span class="line">if (username != null)&#123;</span><br><span class="line">  out.write(&quot;Welcome ,&quot;+username);</span><br><span class="line">&#125;</span><br><span class="line">%&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>总结<br>概述<br>在一次会话的多次请求之间共享数据，将数据保存到服务器端<br>实现原理<br>基于Cookie技术<br>jsessionid&#x3D;xxxx<br>常用方法<br>获取session<br>request.getSession()<br>使用session<br>setAttribute()<br>getAttribute()<br>remomveAttribute()<br>生命周期<br>何时创建<br>用户第一次执行getSession()方法时，创建<br>用户携带的jssionid与服务器不匹配时，创建<br>何时销毁<br>服务器非正常关闭时<br>session.invalidate()<br>session默认销毁时间30分钟</p>
<p>tomcat目录&#x2F;conf&#x2F;web.xm<br>作用范围<br>一次会话中，多次请求之间<br>特点</p>
<ol>
<li>session在服务器端存储数据</li>
<li>session存储数据格式可以是任意类型</li>
<li>session存储数据没有大小限制（相对于内存）</li>
<li>session存储数据相对安全<br>三个域对象<br>ServletContext<br>创建<br>销毁<br>作用域<br>HttpSession<br>创建<br>销毁<br>作用域<br>HttpServletRequest<br>创建<br>销毁<br>作用域<br>综合案例<br>商品购物车<br>用户登录（验证码）</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/18/Cookie/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/18/Cookie/" class="post-title-link" itemprop="url">Cookie</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-18 01:21:57" itemprop="dateCreated datePublished" datetime="2020-04-18T01:21:57+08:00">2020-04-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.会话概述<br>1.1 什么是会话<br>http协议是一个无状态协议，同一会话的多次请求相互独立，会话负责存储浏览器和服务器多次请求之间的数据</p>
<p>1.2 会话技术<br>客户端会话技术:Cookie<br>服务端会话技术:Session</p>
<p>二.Cookie<br>2.1 概述<br>作用:在一次会话的多个请求之间共享数据,将数据保存到客户端</p>
<p>2.2 快速入门<br>2.2.1 设置数据到Cookie中<br>创建cookie对象，设置数据<br>Cookie cookie &#x3D; new Cookie(String name,String value);<br>通过response,响应(返回)cookie<br>response.addCookie(cookie);<br>2.2.2 从cookie中获取数据<br>通过request对象，接收cookie数组<br>Cookie[] cookies &#x3D; request.getCookies()<br>遍历数组<br>for(Cookie cookie:cookies){<br>}</p>
<p>浏览器具有自动存储cookie的能力，也有请求携带cookie的能力</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/SetServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;jack&quot;</span>);</span><br><span class="line">    resp.addCookie(cookie);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/GetServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//通过request对象，接收cookie数组</span></span><br><span class="line">    Cookie[] cookies = req.getCookies();</span><br><span class="line">    <span class="keyword">if</span> (cookies != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">//遍历数组</span></span><br><span class="line">      <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> cookie.getName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> cookie.getValue();</span><br><span class="line">        System.out.println(name+<span class="string">&quot;=&quot;</span>+value);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.3 工作原理<br>基于HTTP协议:请求头cookie和响应头set-cookie</p>
<p>2.4 Cookie细节<br>2.4.1 服务器如何发送多个Cookie<br>创建多个cookie对象<br>Cookie cookie1 &#x3D; new Cookie(“name”,”rose”);<br>Cookie cookie2 &#x3D; new Cookie(“age”,”18”);</p>
<p>通过response响应多个cookie<br>response.addCookie(cookie1);<br>response.addCookie(cookie2);</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/MultipleCookie&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MultipleCookie</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;name&quot;</span>, <span class="string">&quot;rose&quot;</span>);</span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">age</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;age&quot;</span>, <span class="string">&quot;18&quot;</span>);</span><br><span class="line">    resp.addCookie(cookie);</span><br><span class="line">    resp.addCookie(age);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>}<br>2.4.2 Cookie在浏览器的保存时间<br>默认情况下，浏览器关闭(会话结束),cookie销毁(浏览器内存中存储)<br>设置Cookie的存活时间<br>cookie.setMaxAge(int second);<br>正数:指定存活时间，持久化浏览器的磁盘中，到期后自动销毁<br>负数:默认浏览器关闭，cookie销毁<br>零:立即销毁</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/MaxAgeCookie&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MaxAgeCookie</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//创建Cookie对象</span></span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;product&quot;</span>, <span class="string">&quot;MI&quot;</span>);</span><br><span class="line">    <span class="comment">//设置Cookie的存活时间,默认值-1，关闭自动销毁</span></span><br><span class="line">    <span class="comment">//        cookie.setMaxAge(-1);</span></span><br><span class="line">    <span class="comment">//设定30s，自动销毁</span></span><br><span class="line">    <span class="comment">//        cookie.setMaxAge(30);</span></span><br><span class="line">    <span class="comment">//立即销毁</span></span><br><span class="line">    cookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//resp响应Cookie</span></span><br><span class="line">    resp.addCookie(cookie);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.4.3 Cookie是否支持中文存储<br>Tomcat 8版本开始支持中文</p>
<p>但是不支持部分特殊字符，如:分号，空格，逗号等，会触发Rfc6265 CookieProcessor规范错误</p>
<p>建议使用通用方法存储字符<br>URLEncoder 编码<br>URLDecoder 解码</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/EncodeCookie&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncodeCookie</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="type">String</span> <span class="variable">product</span> <span class="operator">=</span> (<span class="string">&quot;华为 30X,&quot;</span>);</span><br><span class="line">    product= URLEncoder.encode(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;Brand&quot;</span>, <span class="string">&quot;苹果&quot;</span>);</span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;product&quot;</span>, product);</span><br><span class="line">    resp.addCookie(cookie);</span><br><span class="line">  &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/GetServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GetServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//通过request对象，接收cookie数组</span></span><br><span class="line">    Cookie[] cookies = req.getCookies();</span><br><span class="line">    <span class="keyword">if</span> (cookies != <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">//遍历数组</span></span><br><span class="line">      <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> cookie.getName();</span><br><span class="line">        <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> cookie.getValue();</span><br><span class="line">        <span class="comment">//解码</span></span><br><span class="line">        value = URLDecoder.decode(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        System.out.println(name + <span class="string">&quot;=&quot;</span> + value);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>2.4.4 Cookie共享数据的范围<br>2.4.4.1 同一个Tomcat服务器中，部署多个web项目，能否共享Cookie<br>默认情况下不可以<br>默认Cookie的携带路径，是当前设置cookie的servlet父路径</p>
<p>设置Cookie:<a target="_blank" rel="noopener" href="http://localhost:8080/Day36_war_exploded/EncodeCookie">http://localhost:8080/Day36_war_exploded/EncodeCookie</a><br>默认携带路径:<a target="_blank" rel="noopener" href="http://localhost:8080/Day36_war_exploded/">http://localhost:8080/Day36_war_exploded/</a></p>
<p>指定Cookie携带路径<br>cookie.setPath(String Path);<br>例:cookie.setPath(“&#x2F;“);</p>
<p>&#x2F; 相当于<a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080/</a></p>
<p>此cookie携带路径</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080/</a></p>
<p>访问:</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8080/Day36_war_exploded/">http://localhost:8080/Day36_war_exploded/</a><br><a target="_blank" rel="noopener" href="http://localhost:8080/Day35_war_exploded/">http://localhost:8080/Day35_war_exploded/</a></p>
<p>携带路径不同，可以存储同名的cookie</p>
<p>在当前项目下共享cookie方法<br>cookie.setPath(“&#x2F;项目名”);</p>
<p>2.4.4.2 不同Tomcat服务器之间的Cookie能否共享<br>默认情况下不可以<br>多个服务器之间的数据共享cookie，需要在同一个一级域名下<br>cookie.setDomain(“.xx.com”)<br>2.5 Cookie特点<br>Cookie存储的数据都在客户端<br>Cookie存储的数据只能是字符串<br>Cookie单个大学不能超过4kb<br>同一个域名下Cookie的数量不能超过50个<br>Cookie路径不同，可以重名出现<br>Cookie存储数据不太安全<br>三.综合案例<br>3.1 用户上次访问记录<br>需求:访问一个Servlet，如果是第一次访问，则提示:”您好”，如果不是，则提示”上次访问时间”</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookieUtils</span> &#123;</span><br><span class="line">  <span class="comment">//根据指定名称，查找cookie对象</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Cookie <span class="title function_">findByName</span><span class="params">(String name, Cookie[] cookies)</span> &#123;</span><br><span class="line">    <span class="comment">//非空判断</span></span><br><span class="line">    <span class="keyword">if</span> (cookies != <span class="literal">null</span> &amp;&amp; cookies.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">//遍历</span></span><br><span class="line">      <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">        <span class="comment">//判断是否有指定名称的cookie</span></span><br><span class="line">        <span class="keyword">if</span> (name.equals(cookie.getName())) &#123;</span><br><span class="line">          <span class="keyword">return</span> cookie;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/LastTimeServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LastTimeServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">    <span class="comment">//接收cookie数组，取出指定名称cookie对象</span></span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> CookieUtils.findByName(<span class="string">&quot;last_time&quot;</span>, req.getCookies());</span><br><span class="line">    <span class="comment">//判断</span></span><br><span class="line">    <span class="keyword">if</span> (cookie == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">//不存在</span></span><br><span class="line">      resp.getWriter().write(<span class="string">&quot;Welcome&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//存在</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> cookie.getValue();</span><br><span class="line">      resp.getWriter().write(<span class="string">&quot;Welcome Back,Last Visit Time:&quot;</span> + value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//创建cookie对象,记录本次访问时间</span></span><br><span class="line">    <span class="type">SimpleDateFormat</span> <span class="variable">simpleDateFormat</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMdd-HH:mm:ss&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">currentTime</span> <span class="operator">=</span> simpleDateFormat.format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    cookie = <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;last_time&quot;</span>, currentTime);</span><br><span class="line">    <span class="comment">//设置cookie存活1年</span></span><br><span class="line">    cookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">365</span>);</span><br><span class="line">    <span class="comment">//resp响应cookie</span></span><br><span class="line">    resp.addCookie(cookie);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>3.2 JSP初体验<br>Java服务端页面<br>简单来说:一个特殊的页面，即可定义html标签，又可定义Java代码<br>作用:简化书写，展示动态页面<br>本质:Servlet<br>脚本:JSP通过脚本方式来定义Java代码<br>&lt;% Java代码 %&gt; 就相当于Servlet中service方法</p>
<p>内置对象:在JSP页面中不需要获取和创建，可以直接使用对象<br>request<br>response<br>out<br>在JSP中响应内容，使用out<br>tomcat优先解析response缓冲区内容，再解析out缓冲区内容</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;Demo&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;h3&gt;I am Title&lt;/h3&gt;</span><br><span class="line">&lt;table border=<span class="string">&quot;1&quot;</span> width=<span class="string">&quot;300&quot;</span> align=<span class="string">&quot;center&quot;</span>&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;I am <span class="keyword">static</span> resource&lt;/td&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;%</span><br><span class="line"><span class="comment">//    response.getWriter().write(&quot;I am JSP&quot;);</span></span><br><span class="line">    System.out.println(<span class="string">&quot;I am jsp&quot;</span>);</span><br><span class="line">    out.write(<span class="string">&quot;Out&quot;</span>);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>3.3 商品浏览记录</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">  &lt;h3&gt;List&lt;/h3&gt;</span><br><span class="line"></span><br><span class="line">  &lt;a href=<span class="string">&quot;/Day36_war_exploded/GoodsInfoServlet?name=MI&quot;</span>&gt;MI&lt;/a&gt;&lt;br&gt;</span><br><span class="line">  &lt;a href=<span class="string">&quot;/Day36_war_exploded/GoodsInfoServlet?name=HW&quot;</span>&gt;HW&lt;/a&gt;&lt;br&gt;</span><br><span class="line">  &lt;a href=<span class="string">&quot;/Day36_war_exploded/GoodsInfoServlet?name=Apple&quot;</span>&gt;Apple&lt;/a&gt;&lt;br&gt;</span><br><span class="line">  &lt;a href=<span class="string">&quot;/Day36_war_exploded/GoodsInfoServlet?name=TCL&quot;</span>&gt;TCL&lt;/a&gt;&lt;br&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">  <span class="comment">//Java Code</span></span><br><span class="line">  <span class="comment">//获取指定名称的Cookie对象</span></span><br><span class="line">  <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> CookieUtils.findByName(<span class="string">&quot;goods_name&quot;</span>, request.getCookies());</span><br><span class="line">  <span class="comment">//判断是否存在浏览记录</span></span><br><span class="line">  <span class="keyword">if</span> (cookie == <span class="literal">null</span>) &#123;</span><br><span class="line">    out.write(<span class="string">&quot;No History&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//格式:MI-Apple..</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> cookie.getValue();</span><br><span class="line">    <span class="keyword">for</span> (String product : value.split(<span class="string">&quot;-&quot;</span>)) &#123;</span><br><span class="line">      out.write(product + <span class="string">&quot;&lt;br/&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  %&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/GoodsInfoServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GoodsInfoServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//设置请求的解码方式</span></span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;utf-8&quot;</span>);</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">    <span class="comment">//获取请求参数name</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">product</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    <span class="comment">//展示当前商品详情</span></span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;It&#x27;s &quot;</span> + product);</span><br><span class="line">    <span class="comment">//获取指定名称的Cookie对象</span></span><br><span class="line">    <span class="type">Cookie</span> <span class="variable">cookie</span> <span class="operator">=</span> CookieUtils.findByName(<span class="string">&quot;goods_name&quot;</span>, req.getCookies());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (cookie == <span class="literal">null</span>) &#123;</span><br><span class="line">      <span class="comment">//如果不存在，将当前商品设置到cookie中</span></span><br><span class="line">      cookie = <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;goods_name&quot;</span>, product);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">//如果存在，将浏览记录取出</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> cookie.getValue();</span><br><span class="line">      <span class="comment">//判断当前商品是否在此Cookie中</span></span><br><span class="line">      List&lt;String&gt; list = Arrays.asList(value.split(<span class="string">&quot;-&quot;</span>));</span><br><span class="line">      <span class="comment">//如果不包含，追加，如果包含，不操作</span></span><br><span class="line">      <span class="keyword">if</span> (!list.contains(product)) &#123;</span><br><span class="line">        value=value+<span class="string">&quot;-&quot;</span>+product;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//将value重置到Cookie中</span></span><br><span class="line">      cookie = <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;goods_name&quot;</span>, value);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//通过response响应到浏览器</span></span><br><span class="line">    cookie.setMaxAge(<span class="number">10</span>);</span><br><span class="line">    resp.addCookie(cookie);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//制作a标签，实现继续浏览商品功能</span></span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;&lt;br/&gt;&lt;a href=&#x27;/Day36_war_exploded/goods.html&#x27;&gt;Continue View&lt;/a&gt;&lt;br/&gt;&quot;</span>);</span><br><span class="line">    <span class="comment">//制作a标签，实现查看浏览记录功能</span></span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;&lt;a href=&#x27;/Day36_war_exploded/history.jsp&#x27;&gt;History&lt;/a&gt;&lt;br/&gt;&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/16/Java-Web-ServletContext-Response/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/16/Java-Web-ServletContext-Response/" class="post-title-link" itemprop="url">Java Web - ServletContext & Response</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-16 01:19:47" itemprop="dateCreated datePublished" datetime="2020-04-16T01:19:47+08:00">2020-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.ServletContext<br>1.1 概述<br>ServletContext是一个容器(域对象)可以存储键值对数据(String key,Object value)，保存在ServletContext中的 数据不仅可以提供给所有的servlet使用，而且可以在整个项目范围内使用。</p>
<p>它的主要作用有3个:<br>作为域对象<br>可以获取当前应用下任何路径下的任何资源<br>获取初始化参数<br>获取文件MIME类型</p>
<p>1.2 域对象<br>说明	API<br>往servletcontext容器中存入数据，name为数据名称，object为数据的值	void setAttribute(String name,Object object)<br>从ServletContext中获取数据，根据指定的数据名称	Object getAttribute(String name)<br>从ServletContext中移除数据，根据指定的数据名称	void removeAttribute(String name)<br>生命周期<br>何时创建:项目加载时创建<br>何时销毁:项目卸载时销毁<br>作用范围:整个项目(多个Servlet都可以使用它)<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>@WebServlet(“&#x2F;OneServlet”)<br>public class OneServlet extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    //向ServletContext域存储数据
    ServletContext sc1 = req.getServletContext();
    ServletContext sc2 = getServletContext();
    sc1.setAttribute(&quot;user&quot;,&quot;jack&quot;);
    resp.getWriter().write(&quot;Set Message&quot;);
&#125;
</code></pre>
<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>@WebServlet(“&#x2F;TwoServlet”)<br>public class TwoServlet extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    //从ServletContext域存储数据
    String user = (String) req.getServletContext().getAttribute(&quot;user&quot;);
    resp.getWriter().write(&quot;Get Message:&quot;+user);
&#125;
</code></pre>
<p>}<br>1.3 获取资源在服务器的真实地址<br>可以实现Web项目的移植性，动态获取文件真实路径<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>@WebServlet(“&#x2F;RealPath”)<br>public class RealPath extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    //获取web.xml文件真实路径
    String realPath = req.getServletContext().getRealPath(&quot;/WEB-INF/web.xml&quot;);
    resp.getWriter().write(realPath);
&#125;
</code></pre>
<p>}<br>1.4 获取全局的配置函数<br>读取web.xml配置文件中<context-param>标签,实现参数和代码的解耦(多个Servlet可以获取)<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>@WebServlet(“&#x2F;ContextPath”)<br>public class ContextPath extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</context-param></p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    //获取全局参数
    String value = req.getServletContext().getInitParameter(&quot;encode&quot;);
    System.out.println(value);
    resp.getWriter().write(value);
&#125;
</code></pre>
<p>}<br>1<br>2<br>3<br>4<br>5</p>
<!--   全局配置参数：所有Servlet都可以读取    -->
<context-param>
    <param-name>encode</param-name>
    <param-value>UTF-8</param-value>
</context-param>
1.5 获取文件MIME类型
互联网通信中的一种数据类型
格式:大类型/小类型
例如:text/html image/jpeg

<p>1<br><a href="/Day35_war_exploded/MIMEServlet?filename=a.jpeg">Get MIME</a><br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>@WebServlet(“&#x2F;MIMEServlet”)<br>public class MIMEServlet extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    //获取请求参数
    String filename = req.getParameter(&quot;filename&quot;);
    //获取指定文件的mime类型
    String mimeType = req.getServletContext().getMimeType(filename);
    resp.getWriter().write(filename+&quot;=&quot;+mimeType);
&#125;
</code></pre>
<p>}<br>1.6 案例:统计网站的访问次数<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>@WebServlet(value &#x3D; “&#x2F;CountServlet”,loadOnStartup &#x3D; 4)&#x2F;&#x2F;服务器启动时，创建此servlet对象<br>public class CountServlet extends HttpServlet {<br>    @Override<br>    public void init() throws ServletException {<br>        getServletContext().setAttribute(“count”,0);<br>    }</p>
<pre><code>@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    this.doPost(req, resp);
&#125;

@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    //设置response响应编码
    resp.setContentType(&quot;text/html;charset=utf-8&quot;);
    resp.getWriter().write(&quot;&lt;h1&gt;Welcome&lt;/h1&gt;&quot;);

    //用户每次访问,从域中取出，++再存入
    Integer count = (Integer) req.getServletContext().getAttribute(&quot;count&quot;);
    count++;
    getServletContext().setAttribute(&quot;count&quot;, count);

    resp.getWriter().write(&quot;&lt;div&gt;You are the &quot;+count+&quot; visitor&lt;/div&gt;&quot;);
&#125;
</code></pre>
<p>}<br>二.Response<br>2.1 概述<br>response对象表示web服务器给浏览器返回的响应信息</p>
<p>作用:开发人员可以使用response对象方法,设置要返回给浏览器的响应信息</p>
<p>Response体系结构</p>
<p>ServletResponse<br>⬆<br>HttpServletResponse<br>⬆<br>org.apache.catalina.connector.ResponseFacade 实现类(由Tomcat提供)<br>2.2 设置Http响应消息<br>2.2.1 响应行<br>格式<br>协议&#x2F;版本号 状态码<br>例如<br>HTTP&#x2F;1.1 200<br>API<br>说明	API<br>设置状态码	void setStatus()<br>2.2.2 响应头<br>格式<br>响应头名称:响应头的值<br>例如<br>Location:<a target="_blank" rel="noopener" href="http://www.oracle.com/">http://www.oracle.com</a><br>API<br>说明	API<br>设置指定头名称和对应的值	void setHeader(String name,String vale);<br>2.2.3 响应体<br>API(输出流对象)<br>说明	API<br>字符输出流	PrintWriter getWriter()<br>字节输出流	ServletOutputStream getOutputStream()<br>注意:在同一个Servlet中，不能同时存在两种流，互斥</p>
<p>2.3 响应重定向<br>2.3.1 重定向特点<br>地址栏会发生改变<br>重定向是二次请求<br>重定向是客户端(浏览器)行为,可以跳转到服务器外部资源<br>不能使用request域共享数据<br>2.3.2 方式一<br>说明	API<br>设置状态码	response.setStatus(302)<br>设置响应头Location	response.setHeader(“Location”,”重定向网络地址”);<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>@WebServlet(“&#x2F;AServlet”)<br>public class AServlet extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    System.out.println(&quot;AServlet Run&quot;);
   resp.setStatus(302);
   resp.setHeader(&quot;Location&quot;,&quot;/Day35_war_exploded/BServlet&quot;);
&#125;
</code></pre>
<p>}<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>@WebServlet(“&#x2F;BServlet”)<br>public class BServlet extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    System.out.println(&quot;Bservlet Run&quot;);
&#125;
</code></pre>
<p>}<br>2.3.3 方式二<br>说明	API<br>response专门处理重定向的方法	response.sendRedirect(“重定向网络地址”)<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>@WebServlet(“&#x2F;AServlet”)<br>public class AServlet extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    System.out.println(&quot;AServlet Run&quot;);
    resp.sendRedirect(&quot;http://www.baidu.com&quot;);
&#125;
</code></pre>
<p>}<br>2.3.4 转发与重定向区别<br>哪个对象<br>API<br>转发(request对象的方法)	request.getRequestDispatcher(“&#x2F;bServlet”).forward(request,response);<br>重定向(response对象的方法)	response.sendRedirect(“&#x2F;Day35_war_exploded&#x2F;bServlet”);<br>几次请求<br>转发	重定向<br>地址栏	没有改变	发生了改变<br>浏览器	发了一次请求	发了两次请求<br>服务器	只有一对请求和响应对象	有两对请求和响应对象<br>发生的位置	服务器	浏览器<br>小结<br>写法	说明<br>转发	(“&#x2F;servlet资源路径”) 服务器内部行为<br>重定向	(“&#x2F;虚拟路径(项目名)&#x2F;servlet资源路径”) 浏览器外部行为<br>使用场景</p>
<p>使用场景	说明<br>如果需要传递数据(request域)	使用转发<br>如果不需要传递数据(request域)	使用重定向<br>2.4 响应定时刷新<br>说明	API<br>通过response设置响应头Refresh	response.setHeader(“Refresh”,”间隔时间(秒);跳转页面”)<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>@WebServlet(“&#x2F;RefreshServlet”)<br>public class RefreshServlet extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    resp.setHeader(&quot;Refresh&quot;,&quot;3;http://www.baidu.com&quot;);
    resp.setContentType(&quot;text/html;charset=utf-8&quot;);
    resp.getWriter().write(&quot;Success,Redirect After 3 seconds&quot;);
&#125;
</code></pre>
<p>}<br>2.5 响应中文<br>步骤:</p>
<p>说明	API<br>统一服务器编码:指定服务器响应编码方式	resp.setContentType(“text&#x2F;html;charset&#x3D;utf-8”);<br>通过response获取字符输出流	PrintWriter pw &#x3D; response.getWriter();<br>通过字符输出流输出文本	pw.write()<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>@WebServlet(“&#x2F;EncodeServlet”)<br>public class EncodeServlet extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    //可以解决客户端中文乱码，但是编码不统一
</code></pre>
<p>&#x2F;&#x2F;        resp.setCharacterEncoding(“GBK”);<br>        resp.setContentType(“text&#x2F;html;charset&#x3D;utf-8”);<br>&#x2F;&#x2F;        PrintWriter pw &#x3D; resp.getWriter();<br>&#x2F;&#x2F;        pw.write(“中文”);</p>
<pre><code>    //链式编程
    resp.getWriter().write(&quot;中文&quot;);
&#125;
</code></pre>
<p>}<br>综合案例<br>3.1 点击切换验证码<br>在页面展示登陆验证码，点击可以更换新验证码<br>作用:防止表单的恶意提交<br>本质:图片<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br><img src="/2020/04/16/Java-Web-ServletContext-Response/CheckCodeServlet" alt id="image1"></p>
<script>
    document.getElementById("image1").onclick = function () {
        //reset src path
        // new Date().getTime()为了欺骗浏览器使用不同src，强制刷新
        this.src = '/Day35_war_exploded/CheckCodeServlet?' + new Date().getTime();
    }
</script>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>@WebServlet(“&#x2F;CheckCodeServlet”)<br>public class CheckCodeServlet extends HttpServlet {<br>    private static final long serialVersionUID &#x3D; 1L;<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
</code></pre>
<p>&#x2F;&#x2F;  创建画布<br>        int width &#x3D; 120;<br>        int height &#x3D; 40;<br>        BufferedImage bufferedImage &#x3D; new BufferedImage(width, height, BufferedImage.TYPE_INT_RGB);<br>        &#x2F;&#x2F;  获得画笔<br>        Graphics g &#x3D; bufferedImage.getGraphics();<br>        &#x2F;&#x2F;  填充背景颜色<br>        g.setColor(Color.white);<br>        g.fillRect(0, 0, width, height);<br>        &#x2F;&#x2F;  绘制边框<br>        g.setColor(Color.red);<br>        g.drawRect(0, 0, width - 1, height - 1);<br>        &#x2F;&#x2F;  生成随机字符<br>        &#x2F;&#x2F;  准备数据<br>        String data &#x3D; “ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890”;<br>        &#x2F;&#x2F;  准备随机对象<br>        Random r &#x3D; new Random();<br>        &#x2F;&#x2F;  声明一个变量 保存验证码<br>        String code &#x3D; “”;<br>        &#x2F;&#x2F;  书写4个随机字符<br>        for (int i &#x3D; 0; i &lt; 4; i++) {<br>            &#x2F;&#x2F;  设置字体<br>            g.setFont(new Font(“宋体”, Font.BOLD, 28));<br>            &#x2F;&#x2F;  设置随机颜色<br>            g.setColor(new Color(r.nextInt(255), r.nextInt(255), r.nextInt(255)));</p>
<pre><code>        String str = data.charAt(r.nextInt(data.length())) + &quot;&quot;;
        g.drawString(str, 10 + i * 28, 30);

        //  将新的字符 保存到验证码中
        code = code + str;
    &#125;
    //  绘制干扰线
    for (int i = 0; i &lt; 6; i++) &#123;
        //  设置随机颜色
        g.setColor(new Color(r.nextInt(255), r.nextInt(255), r.nextInt(255)));

        g.drawLine(r.nextInt(width), r.nextInt(height), r.nextInt(width), r.nextInt(height));
    &#125;

    //  将验证码 打印到控制台
    System.out.println(code);

    //  将验证码放到session中
    req.getSession().setAttribute(&quot;code_session&quot;, code);

    //  将画布显示在浏览器中
    ImageIO.write(bufferedImage, &quot;jpg&quot;, resp.getOutputStream());
&#125;
</code></pre>
<p>}<br>3.2 文件下载<br>用户点击页面的链接，浏览器开始下载文件。<br>3.2.1 使用链接下载文件<br>1<br><a href="/Day35_war_exploded/download/web.xml">Download_XML</a><br><br>缺点<br>浏览器可识别的媒体类型，是直接打开而不是下载<br>不能判断用户是否登录(vip)，进行限制</p>
<p>3.2.2 使用Servlet下载文件<br>二个响应头二个字节流</p>
<p>说明	API<br>被下载文件的字节输入流	FileInputStream<br>response字节输出流	response字节输出流<br>告知客户端下载文件的MIME类型	Content-Type:MIME类型<br>告知浏览器以附件的方式保存	Content-Disposition:attachment;filename&#x3D;文件名<br>1<br><a href="/Day35_war_exploded/DownloadServlet?filename=web.xml">Download_XML</a><br><br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>@WebServlet(“&#x2F;DownloadServlet”)<br>public class DownloadServlet extends HttpServlet {<br>    @Override<br>    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {<br>        this.doPost(req, resp);<br>    }</p>
<pre><code>@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;
    //获取文件名
    String filename = req.getParameter(&quot;filename&quot;);
    //获取文件真实路径，封装字节输入流
    ServletContext servletContext = req.getServletContext();
    String realPath = servletContext.getRealPath(&quot;/download/&quot; + filename);
    FileInputStream in = new FileInputStream(realPath);

    //告诉浏览器下载文件MIME类型 Content-Type
    String mimeType = servletContext.getMimeType(filename);
    resp.setContentType(mimeType);

    //告知浏览器以附件的方式保存 Content-Disposition:attachment;filename=文件名
    //解决中文乱码和浏览器兼容性
    String userAgent = req.getHeader(&quot;user-agent&quot;);
    //调用工具处理
    filename=DownLoadUtils.getName(userAgent,filename);
    resp.setHeader(&quot;content-disposition&quot;, &quot;attachment;filename=&quot; + filename);
</code></pre>
<p>&#x2F;&#x2F;        resp.setHeader(“Content-Disposition”, “attachment;filename&#x3D;” + filename);<br>        &#x2F;&#x2F;获取response的字节输出流<br>        ServletOutputStream out &#x3D; resp.getOutputStream();<br>        &#x2F;&#x2F;IO流Copy<br>&#x2F;&#x2F;        byte[] bys &#x3D; new byte[1024];<br>&#x2F;&#x2F;        int len &#x3D; 0;<br>&#x2F;&#x2F;        while ((len &#x3D; in.read(bys)) !&#x3D; -1) {<br>&#x2F;&#x2F;            out.write(bys, 0, len);<br>&#x2F;&#x2F;        }<br>        IoUtil.copy(in,out);<br>        &#x2F;&#x2F;释放资源<br>        out.close();&#x2F;&#x2F;可以交给Tomcat关闭<br>        in.close();<br>    }<br>}<br>中文乱码问题<br>如果该下载文件名是中文的话，会出现乱码…<br>谷歌和绝大多数的浏览器是通过 url编码<br>URLEncode() 编码<br>URLDecode() 解码<br>火狐浏览器 base64编码<br>如下工具包解决乱码问题:<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>public class DownLoadUtils {</p>
<pre><code>public static String getName(String agent, String filename) throws UnsupportedEncodingException &#123;
    if (agent.contains(&quot;Firefox&quot;)) &#123;
        // 火狐浏览器
        BASE64Encoder base64Encoder = new BASE64Encoder();
        filename = &quot;=?utf-8?B?&quot; + base64Encoder.encode(filename.getBytes(&quot;utf-8&quot;)) + &quot;?=&quot;;
    &#125; else &#123;
        // 其它浏览器
        filename = URLEncoder.encode(filename, &quot;utf-8&quot;);
    &#125;
    return filename;
&#125;
</code></pre>
<p>}<br>3.2.2.1 hutool工具包<br>官网:<a target="_blank" rel="noopener" href="https://www.hutool.cn/">https://www.hutool.cn/</a></p>
<p>hutool-all-5.2.3.jar<br>总结<br>一 ServletContext<br>概述<br>代表当前web项目对象<br>主要作用<br>共享数据（域对象）</p>
<p>获取资源文件在服务器上真实路径</p>
<p>获取全局的配置参数</p>
<p>web.xml中配置<br>获取文件MIME类型</p>
<p>互联网传输数据时，识别文件的类型<br>案例：统计网站的访问次数<br>二 Response<br>概述<br>开发人员可以使用response对象的方法，设置要返回给浏览器的响应信息<br>Response设置响应消息<br>设置响应行</p>
<p>void setStatus(int sc)<br>设置响应头</p>
<p>void setHeader(String name, String value)<br>设置响应体</p>
<p>ServletOutputStream getOutputStream() 字节输出流<br>PrintWriter getWriter() 字符输出流<br>响应重定向<br>转发与重定向的区别</p>
<p>转发</p>
<p>地址栏： 没有改变<br>浏览器： 发了一次请求<br>服务器： 只有一对请求和响应对象<br>发生的位置： 服务器<br>重定向</p>
<p>地址栏： 发生了改变<br>浏览器： 发了两次请求<br>服务器： 有两对请求和响应对象<br>发生的位置： 浏览器<br>响应定时刷新<br>响应中文<br>response.setContentType(“text&#x2F;html;charset&#x3D;utf-8”);<br>三 综合案例<br>点击切换验证码<br>随机数欺骗浏览器<br>文件下载<br>解决了中文编码<br>hutool工具包</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/15/Java-Web-Request/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/15/Java-Web-Request/" class="post-title-link" itemprop="url">Java Web - Request</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-15 01:19:16" itemprop="dateCreated datePublished" datetime="2020-04-15T01:19:16+08:00">2020-04-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.Request概述<br>用户通过浏览器访问服务器时,Tomcat将HTTP请求中所有信息封装在Request对象中<br>作用:开发人员可以通过Request对象方法，来获取浏览器发送的所有信息</p>
<p>Request体系结构</p>
<p>ServletRequest<br>⬆<br>HttpServletRequest<br>⬆<br>org.apache.catalina.connector.RequestFacade(由tomcat厂商提供实现类)<br>二.Request获取Http请求信息<br>2.1 获取请求行信息<br>例如:<br>GET &#x2F;Day34_Request_war_exploded&#x2F;RequestDemo01 HTTP&#x2F;1.1<br>相关API:<br>说明<br>API<br>获取请求方式	String getMethod()<br>获取项目虚拟路径名	String getContextPath()<br>获取URI<br>(统一资源标识符)	String getRequestURI()<br>获取URL<br>(统一资源定位符)	StringBuffer getRequestURL()<br>获取协议和版本号	String getProtocol()<br>获取客户端IP	String getRemoteAddr()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/RequestDemo01&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo01</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//        System.out.println(req);</span></span><br><span class="line">    <span class="comment">//1.获取请求方式</span></span><br><span class="line">    System.out.println(<span class="string">&quot;Request Method &quot;</span>+req.getMethod());</span><br><span class="line">    <span class="comment">//2.获取项目路径</span></span><br><span class="line">    System.out.println(<span class="string">&quot;Project Path &quot;</span>+req.getContextPath());</span><br><span class="line">    <span class="comment">//3.获取URI</span></span><br><span class="line">    System.out.println(<span class="string">&quot;URI &quot;</span>+req.getRequestURI());</span><br><span class="line">    <span class="comment">//4.获取URL</span></span><br><span class="line">    System.out.println(<span class="string">&quot;URI &quot;</span>+req.getRequestURL());</span><br><span class="line">    <span class="comment">//5.协议和版本</span></span><br><span class="line">    System.out.println(<span class="string">&quot;Protocol &amp; Version &quot;</span>+ req.getProtocol());</span><br><span class="line">    <span class="comment">//6.客户端IP</span></span><br><span class="line">    System.out.println(<span class="string">&quot;IP &quot;</span>+ req.getRemoteAddr());&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>&#x2F;&#x2F;输出<br>Request Method: GET<br>Project Path: &#x2F;Day34_Request_war_exploded<br>URI: &#x2F;Day34_Request_war_exploded&#x2F;RequestDemo01<br>URL: <a target="_blank" rel="noopener" href="http://127.0.0.1:8080/Day34_Request_war_exploded/RequestDemo01">http://127.0.0.1:8080/Day34_Request_war_exploded/RequestDemo01</a><br>Protocol &amp; Version: HTTP&#x2F;1.1<br>IP: 127.0.0.1<br>2.2 获取请求头信息<br>例如:</p>
<p>Host:locaohost:8080</p>
<p>相关API</p>
<p>说明<br>API<br>获取请求头名称对应的值	String getHeader(String name)<br>获取所有请求头的名称	Enumeration getHeaderNames()</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/RequestDemo02&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo02</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//获取所有请求头名称</span></span><br><span class="line">    Enumeration&lt;String&gt; headerNames = req.getHeaderNames();</span><br><span class="line">    <span class="comment">//遍历</span></span><br><span class="line">    <span class="keyword">while</span> (headerNames.hasMoreElements())&#123;</span><br><span class="line">      <span class="comment">//取出元素名(请求头名称)</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> headerNames.nextElement();</span><br><span class="line">      <span class="comment">//根据名称获取值</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">value</span> <span class="operator">=</span> req.getHeader(name);</span><br><span class="line">      System.out.println(value);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>案例:模拟视频防盗链</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/RefereRequest&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RefereRequest</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//0.设置编码，让中文不乱码</span></span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">    <span class="comment">//1.获取请求来源(如果是浏览器地址栏直接访问，referer是Null)</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">referer</span> <span class="operator">=</span> req.getHeader(<span class="string">&quot;referer&quot;</span>);</span><br><span class="line">    <span class="comment">//2.判断是否自己网站发起的请求</span></span><br><span class="line">    <span class="keyword">if</span>(referer != <span class="literal">null</span> &amp;&amp; referer.startsWith(<span class="string">&quot;http://127.0.0.1:8080&quot;</span>))&#123;</span><br><span class="line">      resp.getWriter().write(<span class="string">&quot;Play Video&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      resp.getWriter().write(<span class="string">&quot;Permission Denied&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>案例:浏览器兼容性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/UserAgentRequest&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserAgentRequest</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//0.设置语言编码</span></span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">    <span class="comment">//1.获取浏览器版本信息</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">useragent</span> <span class="operator">=</span> req.getHeader(<span class="string">&quot;user-agent&quot;</span>);</span><br><span class="line">    <span class="comment">//2.判断浏览器版本</span></span><br><span class="line">    System.out.println(useragent);</span><br><span class="line">    <span class="keyword">if</span> (useragent.contains(<span class="string">&quot;Chrome&quot;</span>))&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Chrome&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (useragent.contains(<span class="string">&quot;Firefox&quot;</span>))&#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Firefox&quot;</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">&quot;Others&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>2.3 获取请求参数(请求体)<br>不论是get还是post请求方式,都可以使用下列方式来获取请求参数<br>参数:<br>username&#x3D;jack&amp;password&#x3D;123<br>说明<br>API<br>获取指定参数名的值	String getParameter(String name);<br>获取指定参数名的值数组	String[] getParameterValues(String name);<br>获取所有参数名和对应值数组	Map&lt;String,String[]&gt; getParameterMap()<br>中文乱码<br>get:在Tomcat 8 及以上版本，内部URL编码(UTF-8)<br>post:编码解码不一致，造成乱码现象<br>客户端(浏览器)编码UTF-8<br>服务器默认解码:ISO-8859-1<br>指定解码:void setCharacterEncoding(String env)<br>注意:指定解码必须在行首</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/RequestDemo03&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo03</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//Get manually</span></span><br><span class="line">    <span class="comment">//        String username = req.getParameter(&quot;username&quot;);</span></span><br><span class="line">    <span class="comment">//        System.out.println(username);</span></span><br><span class="line">    <span class="comment">//        String password = req.getParameter(&quot;password&quot;);</span></span><br><span class="line">    <span class="comment">//        System.out.println(password);</span></span><br><span class="line">    <span class="comment">//        String[] hobbies = req.getParameterValues(&quot;hobby&quot;);</span></span><br><span class="line">    <span class="comment">//        System.out.println(Arrays.toString(hobbies));</span></span><br><span class="line">    <span class="comment">//Automatic acquisition</span></span><br><span class="line">    Map&lt;String, String[]&gt; parameterMap = req.getParameterMap();</span><br><span class="line">    parameterMap.forEach((k, v) -&gt; &#123;</span><br><span class="line">      System.out.println(k + <span class="string">&quot;&quot;</span> + Arrays.toString(v));</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    <span class="comment">//使用方法一样，可以直接调用get方法</span></span><br><span class="line">    <span class="built_in">this</span>.doGet(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.4 BeanUtils<br>Apache提供的工具类，简化参数封装，即将前端数据直接封装到想要的JavaBean中</p>
<p>导入Jar包</p>
<p>使用工具类封装数据(要求:map集合的key,必须为JavaBean属性名)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String username;</span><br><span class="line">  <span class="keyword">private</span> String password;</span><br><span class="line">  <span class="keyword">private</span> String[] hobby;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 此处省略getter setter toString</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@WebServlet(&quot;/RequestDemo04&quot;)</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo04</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">      <span class="comment">//Get manually</span></span><br><span class="line">      <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">      System.out.println(username);</span><br><span class="line">      <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">      System.out.println(password);</span><br><span class="line">      String[] hobbies = req.getParameterValues(<span class="string">&quot;hobby&quot;</span>);</span><br><span class="line">      <span class="comment">//Automatic acquisition</span></span><br><span class="line">      Map&lt;String, String[]&gt; parameterMap = req.getParameterMap();</span><br><span class="line">      parameterMap.forEach((k, v) -&gt; &#123;</span><br><span class="line">        System.out.println(k + <span class="string">&quot;&quot;</span> + Arrays.toString(v));</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">//将前端表单数据赋值到user对象中,保存到数据库</span></span><br><span class="line">      <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">      user.setUsername(username);</span><br><span class="line">      user.setPassword(password);</span><br><span class="line">      user.setHobby(hobbies);</span><br><span class="line">      System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">      req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">      <span class="comment">//使用方法一样，可以直接调用get方法</span></span><br><span class="line">      <span class="built_in">this</span>.doGet(req, resp);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//使用BeanUtils快速封装数据到User对象中</span></span><br><span class="line">      <span class="comment">//map集合的key,必须为JavaBean属性名</span></span><br><span class="line">      Map&lt;String, String[]&gt; parameterMap = req.getParameterMap();</span><br><span class="line">      <span class="comment">//</span></span><br><span class="line">      <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        BeanUtils.populate(user, parameterMap);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">      System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>Bean Utils:<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/Day34_Request_war_exploded/RequestDemo04&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">  Name:</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  Password:</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  Hobby:</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;smoke&quot;</span>&gt;</span>smoke</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;drink&quot;</span>&gt;</span>drink</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;perm&quot;</span>&gt;</span>perm<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Post Submit Method&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.4.1 变量名是否等于属性</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//成员变量名username</span></span><br><span class="line"><span class="keyword">private</span> String username;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//属性Username，是方法的命名</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> username;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//属性是getter/setter方法截取之后的产物</span></span><br><span class="line"><span class="comment">//通常情况下,使用IDEA自动生成getter&amp;setter时，变量名 equals 属性</span></span><br><span class="line">getUsername-Username-username</span><br><span class="line"></span><br><span class="line">  <span class="comment">//不一样的情况</span></span><br><span class="line">  <span class="comment">//成员变量名</span></span><br><span class="line">  <span class="keyword">private</span> String user;</span><br><span class="line"><span class="comment">//属性名</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>三.Request其他功能<br>3.1 请求转发<br>一种在服务器内部的资源跳转方式<br>说明<br>API<br>通过request对象，获得转发器对象	RequestDispatcher getRequestDispatcher(String path);<br>通过转发器对象，实现转发功能	void forward(ServletRequest request,ServletResponse response);<br>请求转发的特点:<br>浏览器:只发了一次请求<br>地址栏:没有改变<br>只能转发到服务器内部资源</p>
<p>链式编程<br>request.getRequestDispatcher(“&#x2F;bServlet”).forward(reqeust,response)<br>3.2 域对象(共享数据)<br>域对象:一个有作用访问的对象，可以在范围内共享数据</p>
<p>request域:代表一次请求范围,一般用于一次请求中转发的多个资源中共享数据</p>
<p>说明<br>API<br>设置数据	void setAttribute(String name,Object o);<br>获取数据	Object getAttribute(String name)<br>删除数据	void removeAttribute(String name)<br>生命周期</p>
<p>创建时间	用户发送请求时，发送request<br>销毁时间	服务器返回响应时，销毁request<br>作用范围	一次请求，包含多次转发</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/AServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//转发到BServlet</span></span><br><span class="line">    <span class="comment">//1.获取转发器对象 path=@WebServlet(&quot;/BServlet&quot;)</span></span><br><span class="line">    <span class="comment">//        RequestDispatcher requestDispatcher = req.getRequestDispatcher(&quot;/BServlet&quot;);</span></span><br><span class="line">    <span class="comment">//2.实现转发功能</span></span><br><span class="line">    <span class="comment">//        requestDispatcher.forward(req,resp);</span></span><br><span class="line">    <span class="comment">//AServlet存一个数据</span></span><br><span class="line">    req.setAttribute(<span class="string">&quot;name&quot;</span>,<span class="string">&quot;This is A Object&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//链式编程</span></span><br><span class="line">    req.getRequestDispatcher(<span class="string">&quot;/BServlet&quot;</span>).forward(req,resp);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/BServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req,resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;B&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> (String) req.getAttribute(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    resp.getWriter().write(name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3.3 获取ServletContext对象<br>应用上下文对象，表示一个web项目<br>通过request，可以获取ServletContext对象<br>public ServletContext getServletContext();</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/RequestDemo05&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestDemo05</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//获取当前web项目对象</span></span><br><span class="line">    <span class="type">ServletContext</span> <span class="variable">servletContext</span> <span class="operator">=</span> req.getServletContext();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>四.用户登陆案例<br>实现用户的登录功能<br>登录成功跳转到SuccessServlet展示:登录成功!xxx,欢迎您<br>登录失败跳转到FailServlet展示:登录失败，用户名或密码错误</p>
<p>创建web项目，导入BeanUtils(工具类)<br>编写index.html<br>User实体类<br>创建LoginServlet,SuccessServlet，FailedServlet</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/Day34_Request_war_exploded/loginServlet&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span>Login</span><br><span class="line">  Name:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  Password:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Login Submit&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> String username;</span><br><span class="line">  <span class="keyword">private</span> String password;</span><br><span class="line">  <span class="comment">//此处getter &amp; setter ，toString省略</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/loginServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//1.设置request解码方式</span></span><br><span class="line">    req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">    <span class="comment">//2.获取浏览器参数，map集合</span></span><br><span class="line">    Map&lt;String, String[]&gt; parameterMap = req.getParameterMap();</span><br><span class="line">    <span class="comment">//3.使用BeanUtils工具类，封装到User中</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      BeanUtils.populate(user, parameterMap);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IllegalAccessException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InvocationTargetException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//4.判断(写一个file文件，存储真实到用户名密码，判断)</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">&quot;jack&quot;</span>.equals(user.getUsername()) &amp;&amp; <span class="string">&quot;123&quot;</span>.equals(user.getPassword()))&#123;</span><br><span class="line">      req.setAttribute(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line">      req.getRequestDispatcher(<span class="string">&quot;/successServlet&quot;</span>).forward(req, resp);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      req.getRequestDispatcher(<span class="string">&quot;/failedServlet&quot;</span>).forward(req, resp);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/successServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SuccessServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//1.从request域获取user对象</span></span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) req.getAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">    <span class="comment">//2.提示</span></span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">    resp.getWriter().write(user.getUsername()+<span class="string">&quot;Successful&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/failedServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FailedServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">this</span>.doPost(req, resp);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.setContentType(<span class="string">&quot;text/html;charset=utf-8&quot;</span>);</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;Login Failed,Wrong Username or Password&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>附录:Servlet模版设置<br>IDEA-Settings-Editor-File and Code Templates-Other-Web&gt;Jaava code templates&gt;Servlet Annotated Class.java<br>更改为如下代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">if</span> ($&#123;PACKAGE_NAME&#125; &amp;&amp; $&#123;PACKAGE_NAME&#125; != <span class="string">&quot;&quot;</span>)<span class="keyword">package</span> $&#123;PACKAGE_NAME&#125;;#end #parse(<span class="string">&quot;File Header.java&quot;</span>) <span class="meta">@javax</span>.servlet.annotation.WebServlet(<span class="string">&quot;/$&#123;Class_Name&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">$</span>&#123;Class_Name&#125; <span class="keyword">extends</span> <span class="title class_">javax</span>.servlet.http.HttpServlet &#123;</span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException &#123;</span><br><span class="line"><span class="built_in">this</span>.doPost(request,response); &#125;</span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(javax.servlet.http.HttpServletRequest request, javax.servlet.http.HttpServletResponse response)</span> <span class="keyword">throws</span> javax.servlet.ServletException, java.io.IOException &#123;</span><br><span class="line"></span><br><span class="line">&#125; &#125;</span><br></pre></td></tr></table></figure>


<p>总结<br>一 Request概述<br>开发人员可以通过request对象方法，来获取浏览器发送的所有信息.<br>二 Request获取Http请求信息<br>行<br>getMethod()</p>
<p>请求方式</p>
<p>get<br>post<br>getContextPath()</p>
<p>项目名（虚拟路径）<br>getRemoteAddr()</p>
<p>客户端的ip地址<br>头<br>getHeader(String key)</p>
<p>Referer</p>
<p>防盗链<br>User-Agent</p>
<p>浏览器兼容器<br>getHeaderNames()</p>
<p>参数（体）<br>api</p>
<p>getParameter()<br>getParameterValues()<br>getParameterMap()<br>BeanUtils工具类</p>
<p>中文乱码</p>
<p>get：tomcat8及以上版本，解决了get方式乱码问题<br>post：request.setCharacterEncoding(“utf-8”);<br>三 Request其他功能<br>请求转发<br>一种在服务器内部的资源跳转方式</p>
<p>request.getRequestDispatcher(“&#x2F;内部资源”).forward(request,response);</p>
<p>特点</p>
<p>转发是一次请求<br>浏览器地址栏不发生变化<br>只能跳转到服务器内部资源<br>域对象（共享数据）<br>api</p>
<p>void setAttribute(String name, Object o)<br>Object getAttribute(String name)<br>void removeAttribute(String name)<br>生命周期</p>
<p>何时创建</p>
<p>用户发送请求时<br>何时销毁</p>
<p>服务器做出响应后<br>作用范围</p>
<p>一次请求转发中<br>获取ServletContext<br>api</p>
<p>ServletContext getServletContext()</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/13/Java-Web-Servlet%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/13/Java-Web-Servlet%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">Java Web - Servlet入门</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-13 01:18:43" itemprop="dateCreated datePublished" datetime="2020-04-13T01:18:43+08:00">2020-04-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.Servlet概述<br>Servlet 运行在服务端的Java小程序，是sun公司提供一套规范，用来处理客户端请求、响应给浏览器的动态资源。<br>但servlet的实质就是java代码，通过java的API动态的向客户端输出内容</p>
<p>servlet&#x3D; server+applet 运行在服务器端的java程序。<br>Servlet是一个接口，一个类要想通过浏览器被访问到,那么这个类就必须直接或间接的实现Servlet接口<br>二.Servlet快速入门<br>2.1 代码编写<br>创建web项目</p>
<p>编写普通java类,实现Servlet接口<br>写抽象方法(service方法)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickServlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//对外提供服务</span></span><br><span class="line">  <span class="comment">/*</span></span><br><span class="line"><span class="comment">request:代表请求</span></span><br><span class="line"><span class="comment">response:代表响应</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//向浏览器写一句话</span></span><br><span class="line">    servletResponse.getWriter().write(<span class="string">&quot;QuickServlet&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//表示当前Servlet对象的描述信息</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;快速入门&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>配置web.xml<br>配置servlet网络访问路径</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;3.1&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">把QuickServlet交给tomcat管理</span></span><br><span class="line"><span class="comment">servlet-name:当前servlet的别名(使用类名即可)</span></span><br><span class="line"><span class="comment">servlet-class:全限定类名</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>QuickServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>Project.QuickServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">给servlet社长一个网络访问地址(路径)</span></span><br><span class="line"><span class="comment">servlet-name:给指定别名的servlet配置映射</span></span><br><span class="line"><span class="comment">url-pattern:网络访问地址(注意:必须以&quot;/&quot;开头)</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>QuickServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/QuickServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>部署web项目<br>启动测试<br>2.2 执行原理<br>步骤:<br>Step 1: Browser通过 Domain 在网络中Request到该 Server(Tomcat)<br>Step 2: 找到该Server后，通过Project Name查找项目(Day32_Servlet_XML)<br>Step 3: 通过Source Name(QuickServlet)查找web.xml中同名的url-pattern标签<br>Step 4: 找到url-pattern同名标签后，查找其映射的servlet-name<br>Step 5: 通过servlet-name寻找servlet-class<br>Step 6: 通过反射机制创建QuickServlet<br>Step 7: 创建后，自动调用service方法,Response to Browser</p>
<p>三.Servlet相关API<br>3.1 生命周期相关<br>3.1.1 思想介绍<br>生命周期:指的是一个对象从创建到销毁到过程</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//servlet对象创建时,调用此方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;LifeServlet Created&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//用户访问servlet时,调用此方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;LifeServlet carried out&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//servlet对象销毁时,调用此方法</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">  System.out.println(<span class="string">&quot;LifeServlet destroy&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>创建</p>
<p>1)默认<br>用户第一次访问时,创建servlet,执行init方法<br>2）修改servlet创建时机<br><load-on-startup></load-on-startup></p>
<p>值	说明<br>正数	服务器启动时创建<br>(Tomcat默认1-3，建议4开始)<br>负数(默认值):-1	用户第一次访问时创建<br>运行</p>
<p>第二次开始，都调用执行service方法</p>
<p>销毁</p>
<p>服务器正常关闭时,销毁servlet，执行destroy方法</p>
<p>3.1.2 代码演示<br>LifeServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LifeServlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;LifeServlet Created&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;LifeServlet carried out&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;LifeServlet destroy&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">servlet生命周期</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LifeServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>Project.Demo02.LifeServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>4<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>LifeServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/LifeServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>3.2 拓展:ServletConfig接口<br>Tomcat在Servlet对象创建时,执行init()方法，并创建一个ServletConfig配置对象</p>
<p>主要作用:读取web.xml配置文件Servlet中信息,实现参数和代码的解耦</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EncodingServlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">  <span class="comment">//定义全局变量</span></span><br><span class="line">  <span class="keyword">private</span> ServletConfig servletConfig;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    <span class="built_in">this</span>.servletConfig = servletConfig;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> servletConfig;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//用户访问,执行service方法</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="comment">//        String encode = &quot;UTF-8&quot;;</span></span><br><span class="line">    <span class="comment">//        servletResponse.getWriter().write(encode);</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">encode</span> <span class="operator">=</span> getServletConfig().getInitParameter(<span class="string">&quot;encode&quot;</span>);</span><br><span class="line">    servletResponse.getWriter().write(encode);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--servlet配置对象--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>EncodingServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>Project.Demo02.EncodingServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encode<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>EncodingServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/EncodingServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>四.Servlet体系结构<br>Servlet<br>顶级接口,提供了5个抽象方法<br>⬆	<br>GenericServlet	抽象类,重写绝大多数的抽象方法，只需要开发者重写service方法<br>⬆	<br>HttpServlet	抽象类，处理Http协议的交互信息(请求，响应),根据不同的请求方式作出不同的处理<br>4.1 GenericServlet<br>编写普通Java类继承GenericServlet抽象类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo01</span> <span class="keyword">extends</span> <span class="title class_">GenericServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ServletDemo01 Created&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    <span class="built_in">super</span>.getServletConfig();<span class="comment">//调用父类的配置对象</span></span><br><span class="line">    servletResponse.getWriter().write(<span class="string">&quot;ServletDemo01 extends GenericServlet&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;ServletDemo01 Destroyed&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--servlet继承GenericServlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>Project.Demo03_inherit.ServletDemo01<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encode<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo01<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/ServletDemo01<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>4.2 HttpServlet<br>编写前端HTML页面提交表单</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/Day33_Servlet_war_exploded/ServletDemo02&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Update Form&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>编写普通java类，继承HttpServlet抽象类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo02</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;Get&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;Post&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>配置web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--servlet继承HttpServlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo02<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>Project.Demo03_inherit.ServletDemo02<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo02<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/ServletDemo02<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>4.3 Http错误<br>响应状态码405<br>方法没有重写，父类抛出405<br>例:<br>ServletDemo02 extends HttpServlet 没有重写get方法，而form使用get方法，则抛出父类405错误</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父类方法</span></span><br><span class="line"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">  <span class="type">String</span> <span class="variable">protocol</span> <span class="operator">=</span> req.getProtocol();</span><br><span class="line">  <span class="type">String</span> <span class="variable">msg</span> <span class="operator">=</span> lStrings.getString(<span class="string">&quot;http.method_get_not_supported&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (protocol.endsWith(<span class="string">&quot;1.1&quot;</span>)) &#123;</span><br><span class="line">    resp.sendError(<span class="number">405</span>, msg);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    resp.sendError(<span class="number">400</span>, msg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>响应状态码500<br>Java代码写错了</p>
<p>五.Servlet路径<br>5.1 url-patterns<br>作用:讲一个请求的网络地址和servlet建立一个映射关系</p>
<p>5.1.1 Servlet映射多个路径</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo03</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;ServletDemo3 Get Method Run&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;ServletDemo3 Post Method Run&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--    一个Servlet类可以映射多个网络访问地址        --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo03<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>Project.Demo04_URL_Partten.ServletDemo03<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    映射地址一   --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo03<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/ServletDemo03<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    映射地址二    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo03<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/Demo03<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>5.1.2 url映射模式<br>配置<url-pattern>url地址取值可以是:</url-pattern></p>
<p>精确匹配</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo04</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;ServletDemo4 Get Method Run&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;ServletDemo4 Post Method Run&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--目录的匹配规则</span></span><br><span class="line"><span class="comment">只要浏览器符合规则:/aa/xxx</span></span><br><span class="line"><span class="comment">都访问ServletDemo04</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo04<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.test.Demo04_URL_Partten.ServletDemo04<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo04<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/aa/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>后缀匹配<br>*.xxx</p>
<p>例如:*.do</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletDemo05</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;ServletDemo5 Get Method Run&quot;</span>);</span><br><span class="line">  &#125;<span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;ServletDemo5 Post Method Run&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 只要浏览器符合后缀匹配规则，都可以访问到这个servlet--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo05<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.test.Demo04_URL_Partten.ServletDemo05<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>ServletDemo05<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>5.2 相对&#x2F;绝对路径<br>浏览器的地址栏<br>a标签的href属性<br>form表单的action属性<br>js的location.href属性<br>ajax请求地址</p>
<p>&#x2F;&#x2F;访问地址：<a target="_blank" rel="noopener" href="http://localhost:8080/projectname/static/Path.html">http://localhost:8080/projectname/static/Path.html</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Path<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>Text Interview Path<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>绝对路径<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">在开发时，强烈建议使用绝对路径</span></span><br><span class="line"><span class="comment">完整:protocol://domain:port/project/SourceName</span></span><br><span class="line"><span class="comment">推荐:/项目名/资源名</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://localhost:8080/Day33_Servlet_war_exploded/QuickServlet&quot;</span>&gt;</span></span><br><span class="line">      带HTTP协议的绝对路径:QuickServlet</span><br><span class="line">    <span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/Day33_Servlet_war_exploded/QuickServlet&quot;</span>&gt;</span>不带HTTP协议的绝对路径:QuickServlet<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">h4</span>&gt;</span>相对路径<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">相对路径语法：</span></span><br><span class="line"><span class="comment">./当前目录</span></span><br><span class="line"><span class="comment">../上级目录</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;../QuickServlet&quot;</span>&gt;</span>相对路径:QuickServlet<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>六.Servlet3.0<br>通过注解配置Servlet,简化web.xml配置Servlet复杂性，提高开发效率，集合所有框架都使用注解</p>
<p>创建web项目<br>编写普通Java类继承HttpServlet抽象类<br>配置@WebServlet</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebServlet(&quot;/QuickServlet&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;Quick Servlet 3.0 Get Method&quot;</span>);</span><br><span class="line">  &#125;<span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">    resp.getWriter().write(<span class="string">&quot;Quick Servlet 3.0 Post Method&quot;</span>);</span><br><span class="line">  &#125;&#125;</span><br></pre></td></tr></table></figure>

<p>总结<br>一 Servlet概述<br>运行在服务器端的java程序<br>一个类要想通过浏览器被访问到,那么这个类就必须直接或间接的实现Servlet接口<br>二 Servlet快速入门<br>① 创建web项目<br>② 创建普通的java类，实现servlet接口，重写抽象方法<br>③ 配置web.xml<br>④ 部署web项目<br>⑤ 启动测试<br>三 Servlet相关API<br>生命周期相关<br>创建</p>
<p>1)默认情况下，用户第一次访问时创建，执行init方法，只创建一次<br>2）修改创建时机，在tomcat启动时，创建servlet，执行init方法，只创建一次<br>运行（提供服务）</p>
<p>用户访问servlet资源时，执行service方法<br>销毁</p>
<p>服务器正常关闭，销毁servlet，执行destroy方法<br>ServletConfig接口<br>加载web.xml配置文件信息，实现参数和代码的解耦<br>四 Servlet体系结构<br>Servlet<br>GenericServlet</p>
<p>HttpServlet<br>五 Servlet路径<br>url-pattern<br>Servlet映射多个url</p>
<p>url映射模式</p>
<p>精确匹配<br>目录匹配<br>后缀匹配<br>相对&#x2F;绝对路径<br>绝对路径…<br>六 Servlet3.0<br>@WebServlet(“&#x2F;网络访问地址”)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/13/Java-Web-Tomcat-Http/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/13/Java-Web-Tomcat-Http/" class="post-title-link" itemprop="url">Java Web - Tomcat & Http</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-13 01:18:16" itemprop="dateCreated datePublished" datetime="2020-04-13T01:18:16+08:00">2020-04-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.Web知识概述<br>JavaWeb:将编写好的代码，发布到互联网，可以让所有用户访问</p>
<p>1.1 软件架构<br>•网络中有很多的计算机，它们直接的信息交流，我们称之为:交互<br>•在互联网交互的过程的有两个非常典型的交互方式——B&#x2F;S 交互模型(架构)和 C&#x2F;S 交互模型(架构)</p>
<p>C&#x2F;S架构</p>
<p>Client&#x2F;Server 客户端&#x2F;服务器<br>访问服务器资源必须安装客户端软件<br>优点:用户体验好<br>缺点:开发(客户端,服务器),部署和维护繁琐</p>
<p>B&#x2F;S架构</p>
<p>Browser&#x2F;Server 浏览器&#x2F;服务器<br>访问服务器资源不需要专门安装客户端软件,而是直接通过浏览器访问服务器资源.<br>优点:开发、部署,更新简单<br>缺点:用户体验差</p>
<p>C&#x2F;S架构也是一种特殊的B&#x2F;S架构</p>
<p>1.2 Web服务器作用<br>开发者通过web服务器可以把本地资源发布到互联网<br>用户就可以通过浏览器访问这些资源<br>1.3 资源的分类<br>资源:计算机中数据文件</p>
<p>静态资源<br>对于同一个页面,不同用户看到的内容是一样的。<br>例如:体育新闻、网站门户等，常见后缀: .html、.js、*.css</p>
<p>动态资源 用对于同一个页面,不同用户看到的内容可能不一样。<br>例如:购物车、我的订单等，常见后缀: .jsp、.aspx、*.php</p>
<p>1.4 常见的Web服务器<br>Tomcat: Apache组织开源免费的web服务器,支持JavaEE规范(Servlet&#x2F;Jsp).<br>Jetty:Apache组织开源免费的小型web服务器,支持JavaEE规范.<br>JBoss: RedHat红帽公司的开源免费的web服务器,支持JavaEE规范.<br>Glass Fish:Sun公司开源免费的web服务器,支持JavaEE规范.<br>WebLogic: Oracle公司收费的web服务器,支持JavaEE规范.<br>WebSphere:IBM公司收费的web服务器,支持JavaEE规范.<br>JavaEE规范<br>在Java中所有的服务器厂商都要实现一组Oracle公司规定的接口，这些接口是称为JavaEE规范。不同厂商的JavaWeb服务器都实现了这些接口，在JavaEE中一共有13种规范。实现的规范越多，功能越强。<br>二.Tomcat服务器<br>2.1 Tomcat使用<br>2.1.1 下载<br>Tomcat 官网下载地址:<a target="_blank" rel="noopener" href="https://tomcat.apache.org/download-80.cgi">https://tomcat.apache.org/download-80.cgi</a></p>
<p>2.1.2 安装<br>解压即用</p>
<p>2.1.3 目录结构<br>ls -F | grep “&#x2F;</p>
<p>目录	说明<br>bin&#x2F;	启停命令<br>conf&#x2F;	配置文件<br>lib&#x2F;	运行时所依赖的jar包<br>logs&#x2F;	运行日志<br>temp&#x2F;	缓存<br>webapps&#x2F;	发布自己的网站目录<br>work&#x2F;	存放编译生产的.java与.class文件<br>cd webapps&#x2F;</p>
<p>目录	说明<br>docs	tomcat的帮助文档<br>examples	web应用实例<br>host-manager	主机管理<br>manager	主机管理<br>ROOT	说默认站点根目录明<br>[root@localhost webapps]# cd ..&#x2F;conf&#x2F;</p>
<p>目录	说明<br>Catalina	<br>catalina.policy	<br>catalina.properties	<br>context.xml	<br>logging.properties	<br>logs	<br>server.xml	tomcat 主配置文件<br>tomcat-users.xml	tomcat 管理用户配置文件<br>tomcat-users.xsd	<br>web.xml	<br>ls -l | grep ^- | awk ‘{print $9}’</p>
<p>文件	说明<br>BUILDING.txt	<br>CONTRIBUTING.md	<br>LICENSE	<br>NOTICE	<br>README.md	<br>RELEASE-NOTES	<br>RUNNING.txt	<br>2.1.4 启动和关闭<br>cd apache-tomcat-8.5.54&#x2F;bin<br>chmod +x *.sh<br>.&#x2F;startup.sh<br>.&#x2F;shutdown.sh</p>
<p>2.1.5 启动报错问题<br>Java环境变量</p>
<p>解决方法:<br>配置JAVA_HOME</p>
<p>8080端口被占用<br>启动时报错</p>
<p>解决方式一:kill pid<br>netstat -anpl | grep ‘8080’</p>
<p>解决方式二:修改Tomcat端口号<br>进入Tomcat安装目录&#x2F;conf&#x2F;server.xml 文件修改<br>cat server.xml| grep ‘Connector port’<br>Connector port&#x3D;”8080”</p>
<p>如果要启动多个tomcat，需要修改三个端口<br>2.1.6 发布项目的三种方式<br>webapps部署<br>直接放置在 webapps 目录下<br>cp -r myapp tomcat&#x2F;webapps<br>这种方案,一般在开发完毕后使用</p>
<p>server.xml部署不建议使用<br>在tomcat&#x2F;conf&#x2F;server.xml中找到标签，添加标签</p>
<p>1<br>2</p>
<!-- path虚拟路径 docBase 真实路径-->
<pre><code> &lt;Context path=&quot;myapp&quot; docBase=&quot;apache-tomcat-8.5.54/webapps/myapp&quot;/&gt;
</code></pre>
<p>缺点:</p>
<p>I.配置文件修改完后，需要重启才生效<br>II.server.xml是tomcat核心配置文件，如果操作错误会导致tomcat启动失败</p>
<p>独立xml部署<br>在tomcat&#x2F;conf&#x2F;Catalina&#x2F;localhost 目录下创建一个xml文件，添加标签</p>
<p>myapp.xml<br>文件名就是虚拟路径<br>localhost:8080&#x2F;myapp&#x2F;index.html</p>
<p>1<br>2</p>
<!-- 这里没有path,真实路径就是docBase中的路径 -->
 <Context docbase="apache-tomcat-8.5.54/webapps/myapp">
2.2 Web项目结构
前端项目

<p>1<br>2<br>3<br>4<br>5<br>6<br>|– myapp(项目名称)<br>    |– css 目录<br>    |– js 目录<br>    |– html目录<br>    |– img 目录<br>    |– index.html<br>Web项目</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>|– myapp(项目名称)<br>    |– 静态资源目录(html,css,js,img)<br>    |– WEB-INF 目录 (浏览器无法直接访问内部资源)<br>            |– classes 目录(java字节码文件)<br>            |– lib     目录 (当前项目所需要的第三方jar包)<br>            |– web.xml 文件 (当前项目核心配置文件,servlet3.0可以省略)<br>    |– index.html or index.jsp<br>2.3 IDEA中使用Tomcat<br>2.3.1 配置Tomcat<br>IDEA-&gt;Edit Configuration-&gt;在Application server添加Tomcat解压的路径即可</p>
<p>2.3.2 创建Web项目<br>IDEA-&gt;New Moudle-&gt;左侧选Java Enterprise-&gt;右侧选Moudle SDK选1.8，JAVAEE Version选JAVAEE 7，Application Server选tomcat，下拉列表勾选Web Application并勾选创建web.xml，下一步即可</p>
<p>2.3.3 发布Web页面<br>IDEA-&gt;选择Edit Configurations-&gt;进入Deployment指定context(新版本会默认生成)</p>
<p>2.3.4 页面资源热更新<br>IDEA-&gt;选择Edit Configurations-&gt;On ‘Update’ action 和On frame deactivation都选择Update resources</p>
<p>注意:WEB-INF动态资源是无法被浏览器直接访问的，会出现404错误</p>
<p>三.Http协议<br>3.1 Http协议概述<br>超文本传输协议(Hyper Text Transfer Protocol)是互联网上应用最为广泛的一种网络协议。<br>传输协议:在客户端和服务器端通信时，规范了传输数据的格式<br>HTTP协议特点:<br>I.基于TCP协议<br>II.默认端口80<br>III.基于请求&#x2F;响应模型<br>IV.无状态协议(多次请求之间都是独立，不能交互数据)</p>
<p>HTTPS协议:<br>本质就是HTTP，对通信对数据进行加密<br>默认端口号443</p>
<p>3.2 Http请求<br>3.2.1 浏览器查看Http请求协议<br>get方式(查看Inspect-Network-Request Headers)<br>请求行	GET &#x2F;Day32_Tomcat&#x2F;web&#x2F;index.html?username&#x3D;jack&amp;password&#x3D;123 HTTP&#x2F;1.1<br>请求头	Host: localhost:63343<br>Connection: keep-alive<br>Upgrade-Insecure-Requests: 1<br>User-Agent: Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;80.0.3987.162 Safari&#x2F;537.36 Edg&#x2F;80.0.361.109<br>Sec-Fetch-Dest: document<br>Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,image&#x2F;apng,<em>&#x2F;</em>;q&#x3D;0.8,application&#x2F;signed-exchange;v&#x3D;b3;q&#x3D;0.9<br>Sec-Fetch-Site: same-origin<br>Sec-Fetch-Mode: navigate<br>Sec-Fetch-User: ?1<br>Referer: <a target="_blank" rel="noopener" href="http://localhost:63343/Day32_Tomcat/web/index.html">http://localhost:63343/Day32_Tomcat/web/index.html</a><br>Accept-Encoding: gzip, deflate, br<br>Accept-Language: zh,en-CN;q&#x3D;0.9,en-US;q&#x3D;0.8,en;q&#x3D;0.7<br>Cookie: Idea-b40ac89&#x3D;cb70dd01-3e65-4870-9e53-e3ad801dd2b0;<br>If-Modified-Since: Mon, 13 Apr 2020 10:05:39 GMT<br>post方式(查看Inspect-Network-Request Headers)<br>请求头	POST &#x2F;Day32_Tomcat&#x2F;web&#x2F;index.html?username&#x3D;jack&amp;password&#x3D;123 HTTP&#x2F;1.1<br>请求行	Host: localhost:63343<br>Connection: keep-alive<br>Content-Length: 26<br>Cache-Control: max-age&#x3D;0<br>Origin: <a target="_blank" rel="noopener" href="http://localhost:63343/">http://localhost:63343</a><br>Upgrade-Insecure-Requests: 1<br>Content-Type: application&#x2F;x-www-form-urlencoded<br>User-Agent: Mozilla&#x2F;5.0 (Macintosh; Intel Mac OS X 10_15_4) AppleWebKit&#x2F;537.36 (KHTML, like Gecko) Chrome&#x2F;80.0.3987.162 Safari&#x2F;537.36 Edg&#x2F;80.0.361.109<br>Sec-Fetch-Dest: document<br>Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,image&#x2F;apng,<em>&#x2F;</em>;q&#x3D;0.8,application&#x2F;signed-exchange;v&#x3D;b3;q&#x3D;0.9<br>Sec-Fetch-Site: same-origin<br>Sec-Fetch-Mode: navigate<br>Sec-Fetch-User: ?1<br>Referer: <a target="_blank" rel="noopener" href="http://localhost:63343/Day32_Tomcat/web/index.html?username=jack&amp;password=123">http://localhost:63343/Day32_Tomcat/web/index.html?username=jack&amp;password=123</a><br>Accept-Encoding: gzip, deflate, br<br>Accept-Language: zh,en-CN;q&#x3D;0.9,en-US;q&#x3D;0.8,en;q&#x3D;0.7<br>Cookie: Idea-b40ac89&#x3D;cb70dd01-3e65-4870-9e53-e3ad801dd2b0;<br>请求体<br>(位于Form Data)	username&#x3D;jack&amp;password&#x3D;123<br>3.2.2 HTTP请求消息格式<br>3.2.2.1 请求行<br>格式<br>请求方式 请求路径 协议&#x2F;版本号<br>例如<br>POST &#x2F;Day32_Tomcat&#x2F;web&#x2F;index.html?username&#x3D;jack&amp;password&#x3D;123 HTTP&#x2F;1.1<br>GET &#x2F;Day32_Tomcat&#x2F;web&#x2F;index.html?username&#x3D;jack&amp;password&#x3D;123 HTTP&#x2F;1.1</p>
<p>请求方式区别<br>get<br>1.请求参数在地址栏显示(请求行)<br>2.请求参数大小有限制<br>3.数据不太安全</p>
<p>post<br>1.请求参数不在地址栏显示(请求体)<br>2.请求参数大小没有限制<br>3.数据相对安全<br>3.2.2.2 请求头<br>格式<br>请求头名称:请求头的值<br>例如<br>Host: localhost:8080<br>常见请求头:Accept开头的，都是浏览器告诉服务器的一些暗语</p>
<p>Host: 访问服务器的地址(域名+端口)</p>
<p>Host: localhost:8080</p>
<p>Connection: 长连接(http1.1协议)</p>
<p>Connection: keep-alive</p>
<p>Cache-Control: 设置缓存数据的存活时间，单位秒</p>
<p>Cache-Control: max-age&#x3D;0</p>
<p>Upgrade-Insecure-Requests: 客户端支持https加密协议</p>
<p>Upgrade-Insecure-Requests:1</p>
<p>Content-Type: 发送数据的媒体类型</p>
<p>Content-Type: application&#x2F;x-www-form-urlencoded</p>
<p>Accept: 客户端告诉服务器，客户端支持的数据类型</p>
<p>Accept: text&#x2F;html,&#x2F;;</p>
<p>Accept-Charset: 客户端告诉服务器，客户端支持的字符集</p>
<p>Accept-Charset: UTF-8</p>
<p>Accept-Encoding: 客户告诉服务器，客户端支持的压缩格式</p>
<p>Accept-Encoding: gzip, deflate</p>
<p>Accept-Language: 客户端告诉服务器，客户端系统语言环境 简体中文</p>
<p>Accept-Language: zh-CN,zh;q&#x3D;0.9</p>
<p>Cookie:</p>
<p>Referer: <a target="_blank" rel="noopener" href="http://baidu.com/">http://baidu.com</a> 上一次请求的地址</p>
<p>User-Agent: 客户端系统和浏览器版本<br>User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; WOW64) Chrome&#x2F;63.0 Safari&#x2F;537.36<br>浏览器兼容性</p>
<p>3.2.2.3 请求体(正文)<br>格式<br>参数名&#x3D;参数值&amp;参数名&#x3D;参数值</p>
<p>例如<br>username&#x3D;jack&amp;password&#x3D;123</p>
<p>注意<br>get方式没有请求体，post有请求体</p>
<p>3.3 Http响应<br>3.3.1 浏览器查看Http响应协议(查看Inspect-Network-Response Headers,响应体查看Network的Response栏)<br>响应行	HTTP&#x2F;1.1 200 OK<br>响应头	HTTP&#x2F;1.1 200 OK<br>content-type: text&#x2F;html<br>server: IntelliJ IDEA 2020.1<br>date: Mon, 13 Apr 2020 10:25:17 GMT<br>X-Frame-Options: SameOrigin<br>X-Content-Type-Options: nosniff<br>x-xss-protection: 1; mode&#x3D;block<br>accept-ranges: bytes<br>cache-control: private, must-revalidate<br>last-modified: Mon, 13 Apr 2020 10:12:12 GMT<br>content-length: 317<br>access-control-allow-origin: <a target="_blank" rel="noopener" href="http://localhost:63343/">http://localhost:63343</a><br>vary: origin<br>access-control-allow-credentials: true<br>响应体	<br><!DOCTYPE html></p>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
</head>
<body>
<h3>Login</h3>
<form action="#" method="post">
    Name:<input type="text" name="username"><br>
    Password<input type="password" name="password"><br>
    <input type="submit" value="Login">
</form>
</body>
</html>
3.3.2 HTTP响应消息格式
3.3.2.1 响应行
格式
协议/版本号 状态码

<p>例如<br>tomcat8:HTTP&#x2F;1.1 200<br>tomcat7:HTTP&#x2F;1.1 200 OK</p>
<p>• 常见状态码</p>
<p>状态码	说明<br>200	成功<br>302	重定向<br>304	从缓存中读取数据<br>404	请求资源未找到<br>405	请求的方法未找到<br>500	服务器内部错误<br>3.3.2.2 响应头<br>格式<br>响应头名称:响应头的值</p>
<p>例如<br>last-modified: Mon, 13 Apr 2020 10:12:12 GMT</p>
<p>常见响应头:Content开头都是服务器告诉客户端一些暗语</p>
<p>Location:通常与状态码302一起使用，实现重定向操作</p>
<p>Location:<a target="_blank" rel="noopener" href="http://www.baidu.com/">http://www.baidu.com</a></p>
<p>Content-Type:服务器告诉客户端，返回响应体的数据类型和编码方式</p>
<p>Content-Type:text&#x2F;html;charset&#x3D;utf-8</p>
<p>Content-Disposition:服务器告诉客户端，以什么样方式打开响应体</p>
<p>in-line(默认):浏览器直接打开相应内容，展示给用户<br>attachment;filename&#x3D;文件名:浏览器以附件的方式保存文件 【文件下载】</p>
<p>Refresh::在指定间隔时间后，跳转到某个页面</p>
<p>Refresh:5;<a target="_blank" rel="noopener" href="http://www.baidu.com/">http://www.baidu.com</a></p>
<p>Last-Modified:通常与状态码304一起使用，实现缓存机制</p>
<p>last-modified: Mon, 13 Apr 2020 10:12:12 GMT</p>
<p>3.3.2.3 响应体<br>服务器返回的数据，由浏览器解析后展示给用户<br>用户看到页面所有的内容，都是在响应体中返回的<br>总结<br>web知识概述<br>架构分类<br>C&#x2F;S</p>
<p>客户端专门安装软件<br>B&#x2F;S</p>
<p>浏览器作为客户端<br>web服务器作用<br>将本地资源发布到互联网，用户可以通过浏览器访问<br>资源分类<br>静态</p>
<p>.html .css .js .jpg<br>动态</p>
<p>.jsp<br>常见服务器<br>Tomcat<br>tomcat服务器<br>下载<br>apache-tomcat-8.5.31-windows-x64.zip<br>安装<br>解压缩即可<br>目录结构<br>bin</p>
<p>startup.bat</p>
<p>启动<br>shutdown.bat</p>
<p>关闭<br>conf</p>
<p>server.xml</p>
<p>配置恩建<br>lib</p>
<p>logs</p>
<p>temp</p>
<p>webapps</p>
<p>存放自己编写web项目，对外发布<br>work</p>
<p>启停<br>startup.bat<br>shutdown.bat<br>启动有问题<br>JAVA_HOME环境变量</p>
<p>端口占用</p>
<p>找到占用端口软件，关闭掉，在启动tomcat<br>修改tomcat在启动<br>tomcat发布项目方式<br>webapps目录</p>
<p>热部署<br>conf&#x2F;server.xml</p>
<p>不推荐<br>conf&#x2F;catalina&#x2F;localhost</p>
<p>热部署<br>web项目目录结构<br>WEB-INF</p>
<p>classes</p>
<p>lib</p>
<p>web.xml</p>
<p>web3.0之后可选<br>静态资源</p>
<p>index.html或index.jsp</p>
<p>idea中使用tomcat<br>配置tomcat</p>
<p>创建web项目</p>
<p>启动</p>
<p>重启tomcat<br>重新部署项目<br>http协议<br>概述<br>在客户端和服务器端通信时，规范了传输数据的格式<br>构成<br>请求格式</p>
<p>行</p>
<p>请求方式</p>
<p>get<br>post<br>URL</p>
<p>协议</p>
<p>头</p>
<p>请求的描述信息</p>
<p>Referer<br>User-Agent<br>体</p>
<p>数据内容</p>
<p>get方式没有，post才有<br>响应格式</p>
<p>行</p>
<p>协议</p>
<p>状态码</p>
<p>200<br>302<br>304<br>404<br>405<br>500<br>头</p>
<p>响应的描述信息</p>
<p>Location<br>Content-Type<br>Content-Disposition<br>refresh<br>Last-Modified<br>体</p>
<p>数据内容</p>
</Context>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/11/Json-Ajax/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/11/Json-Ajax/" class="post-title-link" itemprop="url">Json & Ajax</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-11 01:07:13" itemprop="dateCreated datePublished" datetime="2020-04-11T01:07:13+08:00">2020-04-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.JSON<br>1.1 JSON概述<br>Javascript对象表现形式(JavaScript Object Notation)</p>
<p>JavaScript对象表现形式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = &#123;“username”:”<span class="title class_">ObjName</span>”,”age”:”<span class="number">10</span>”,”gender”:”male/female”&#125;;</span><br><span class="line"><span class="keyword">let</span> product = &#123;“<span class="title class_">Brander</span>”:”<span class="title class_">Apple</span>”,”<span class="title class_">Price</span>”:”<span class="number">8999</span>”&#125;;</span><br></pre></td></tr></table></figure>
<p>取代厚重XML,比起XML更小更快更易解析</p>
<p>Json,XML作用:作为数据的载体，在网络中传输</p>
<p>1.2 JSON基础语法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">对象类型</span><br><span class="line">&#123;<span class="attr">name</span>:value,<span class="attr">name</span>:value&#125;</span><br><span class="line"></span><br><span class="line">数组类型</span><br><span class="line"></span><br><span class="line">[</span><br><span class="line">&#123;<span class="attr">name</span>:value,<span class="attr">name</span>:value&#125;,</span><br><span class="line">&#123;<span class="attr">name</span>:value,<span class="attr">name</span>:value&#125;,</span><br><span class="line">&#123;<span class="attr">name</span>:value,<span class="attr">name</span>:value&#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">复杂对象:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"><span class="attr">name</span>:value,</span><br><span class="line"><span class="attr">array</span>:[&#123;<span class="attr">name</span>:value&#125;,&#123;&#125;,&#123;&#125;],</span><br><span class="line"><span class="attr">user</span>:&#123;<span class="attr">name</span>:value&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="comment">//1.描述用户对象</span></span><br><span class="line">    <span class="keyword">let</span> user = &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;Trump&quot;</span>, <span class="string">&quot;Gender&quot;</span>: <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Age&quot;</span>: <span class="string">&quot;103&quot;</span>&#125;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="keyword">typeof</span> user);<span class="comment">//object</span></span><br><span class="line">    <span class="title function_">alert</span>(user.<span class="property">username</span> + user.<span class="property">Gender</span> + user.<span class="property">Age</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2.描述用户数组</span></span><br><span class="line">    <span class="keyword">let</span> users = [</span><br><span class="line">        &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;John&quot;</span>, <span class="string">&quot;Gender&quot;</span>: <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Age&quot;</span>: <span class="string">&quot;103&quot;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;Jack&quot;</span>, <span class="string">&quot;Gender&quot;</span>: <span class="string">&quot;Female&quot;</span>, <span class="string">&quot;Age&quot;</span>: <span class="string">&quot;23&quot;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;Bobe&quot;</span>, <span class="string">&quot;Gender&quot;</span>: <span class="string">&quot;male&quot;</span>, <span class="string">&quot;Age&quot;</span>: <span class="string">&quot;13&quot;</span>&#125;</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> user <span class="keyword">of</span> users) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">username</span> + <span class="string">&quot;,&quot;</span> + user.<span class="property">Gender</span> + <span class="string">&quot;,&quot;</span> + user.<span class="property">Age</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3.描述复杂对象</span></span><br><span class="line">    <span class="keyword">let</span> <span class="title class_">Emperor</span> = &#123;</span><br><span class="line">        <span class="string">&quot;Age&quot;</span>: <span class="number">20</span>,</span><br><span class="line">        <span class="string">&quot;Wife&quot;</span>: [</span><br><span class="line">            &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;Queen&quot;</span>, <span class="string">&quot;Gender&quot;</span>: <span class="string">&quot;Female&quot;</span>, <span class="string">&quot;Age&quot;</span>: <span class="string">&quot;23&quot;</span>&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;Concubine&quot;</span>, <span class="string">&quot;Gender&quot;</span>: <span class="string">&quot;Female&quot;</span>, <span class="string">&quot;Age&quot;</span>: <span class="string">&quot;18&quot;</span>&#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">&quot;Father_Emperor&quot;</span>: &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;Lord&quot;</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Emperor</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Emperor</span>.<span class="property">Age</span>);</span><br><span class="line">    <span class="keyword">let</span> wifes = <span class="title class_">Emperor</span>.<span class="property">Wife</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> wife <span class="keyword">of</span> wifes)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(wife.<span class="property">username</span> + <span class="string">&quot;,&quot;</span> + wife.<span class="property">Gender</span> + <span class="string">&quot;,&quot;</span> + wife.<span class="property">Age</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> fatherEmperor = <span class="title class_">Emperor</span>.<span class="property">Father_Emperor</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(fatherEmperor.<span class="property">username</span>);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>1.3 JSON格式转换<br>JSON对象与字符串的相关函数<br>语法:<br>语法	作用<br>JSON.stringify(object)	把JSON对象转换为字符串<br>JSON.parse	把字符串转换为JSON对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> user = &#123;<span class="string">&quot;username&quot;</span>: <span class="string">&quot;Trump&quot;</span>&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">alert</span>(<span class="keyword">typeof</span> user);<span class="comment">//object</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> userstr = <span class="string">&#x27;&#123;&quot;username&quot;: &quot;Trump&quot;&#125;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">alert</span>(<span class="keyword">typeof</span> userstr);<span class="comment">//string</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//1. JSON.parse 把字符串转换为JSON对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> user_parse = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(userstr);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> user_parse);<span class="comment">//object</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//2. JSON.stringify(object) 把JSON对象转换为字符串</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">let</span> user_stringify = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> user_stringify);<span class="comment">//string</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>二.AJAX<br>2.1 AJAX概述<br>AJAX是浏览器提供的一套方法，在无需重新加载整个网页的情况下，能够更新部分网页技术，从而提高用户浏览器网站应用的体验<br>应用场景</p>
<p>搜索框提示<br>表单数据验证<br>无刷新分页</p>
<p>2.2 JS原生AJAX<br>代码实现<br>•创建Ajax对象<br>let xhr &#x3D; new XMLHttpRequest();<br>•告诉Ajax请求方式和请求地址<br>xhr.open(请求方式,请求地址)</p>
<p>•发送请求<br>xhr.send();</p>
<p>•获取服务器返回的数据<br>xhr.onload&#x3D;function(){<br>xhr.responseText;<br>}</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-tag">span</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">color</span>: red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Input Username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;userwarn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;username&#x27;</span>).<span class="property">onblur</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">value</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//创建Ajax对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//告诉Ajax请求方式和请求地址</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        xhr.<span class="title function_">open</span>(<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;http://localhost:8080/check?username=&#x27;</span> + <span class="variable language_">this</span>.<span class="property">value</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//发送请求</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        xhr.<span class="title function_">send</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//获取服务器返回的数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        xhr.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">console</span>.<span class="title function_">log</span>(xhr.<span class="property">responseText</span>);      <span class="comment">//返回的字符串</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;userwarn&#x27;</span>).<span class="property">innerText</span>=xhr.<span class="property">responseText</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>2.3 jQuery的Ajax插件<br>2.3.1 ajax函数<br>语法:<br>$.ajax(json对象格式);<br>参数:<br>url:请求地址<br>type:请求方式(get:不安全且大小有限制,post大小无限制且相对安全)<br>data:请求参数<br>success:请求成功时，执行回调函数<br>error:请求失败时,执行的回调函数<br>dataType:预期服务器返回的数据类型:text,json</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery-3.2.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-tag">span</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">color</span>: red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Input Username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;userwarn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//给文本绑定失去焦点事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    $(<span class="string">&#x27;#username&#x27;</span>).<span class="title function_">blur</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//使用ajax发送请求</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        $.<span class="title function_">ajax</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">url</span>: <span class="string">&quot;http://localhost:8080/check&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">type</span>: <span class="string">&quot;post&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">data</span>: <span class="string">&quot;username=&quot;</span> + $(<span class="variable language_">this</span>).<span class="title function_">val</span>(),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="comment">//实现局部刷新</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                $(<span class="string">&#x27;#userwarn&#x27;</span>).<span class="title function_">text</span>(resp);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">error</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">alert</span>(<span class="string">&#x27;Server Busy ,Please Retry&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//dataType: &quot;json&quot;//相当于把字符串转为JSON对象</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>2.3.2 get函数<br>语法:<br>$.get(url,callback)<br>参数:<br>url:请求地址<br>success:请求地址成功时的回调函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery-3.2.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-tag">span</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">color</span>: red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Input Username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;userwarn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//给文本绑定失去焦点事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    $(<span class="string">&#x27;#username&#x27;</span>).<span class="title function_">blur</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//使用get发送函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> url = <span class="string">&#x27;http://localhost:8080/check?username&#x27;</span> + $(<span class="variable language_">this</span>).<span class="title function_">val</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        $.<span class="title function_">get</span>(url, <span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//局部刷新</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            $(<span class="string">&#x27;#userwarn&#x27;</span>).<span class="title function_">text</span>(resp);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>2.3.3 post函数<br>语法:<br>$.post(url,data,success)<br>参数:<br>url:请求地址<br>data:请求参数<br>success:请求地址成功时的回调函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery-3.2.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="selector-tag">span</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">            <span class="attribute">color</span>: red;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Input Username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;userwarn&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//给文本绑定失去焦点事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    $(<span class="string">&#x27;#username&#x27;</span>).<span class="title function_">blur</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">//使用post发送函数</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> url = <span class="string">&#x27;http://localhost:8080/check&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">let</span> data = <span class="string">&#x27;username=&#x27;</span> + $(<span class="variable language_">this</span>).<span class="title function_">val</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        $.<span class="title function_">post</span>(url, data, <span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="comment">//局部刷新</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            $(<span class="string">&#x27;userwarn&#x27;</span>).<span class="title function_">text</span>(resp);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>2.4 同步和异步概述<br>使用ajax发送的是异步请求<br>**同步和异步请求指的是:客户端和服务器的交互行为<br>同步:客户端发送请求后，必须等待服务器端响应。在等待的期间客户端不能做其他操作<br>异步:客户端发送请求后，不需要等待服务器端的响应。在服务器处理的过程中，客户端可以进行其他操作</p>
<p>感知同步和异步区别:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../js/jquery-3.2.1.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>Send Ajax<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">//给按钮绑定事件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    $(<span class="string">&#x27;#btn&#x27;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 使用ajax函数发送请求，ajax默认的是异步提交，可以改为同步(了解)</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        $.<span class="title function_">ajax</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">url</span>: <span class="string">&#x27;http://localhost:8080/sleep&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">type</span>: <span class="string">&#x27;get&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">success</span>: <span class="keyword">function</span> (<span class="params">resp</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="title function_">alert</span>(resp)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">async</span>: <span class="literal">false</span> <span class="comment">// 同步提交</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>三.搜索案例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="variable constant_">DOCTYPE</span> html&gt;</span><br><span class="line">&lt;html lang=&quot;zh-CN&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Search Case&lt;/title&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot; src=&quot;../js/jquery-3.2.1.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">        .content &#123;</span><br><span class="line">            width: 643px;</span><br><span class="line">            margin: 200px auto;</span><br><span class="line">            text-align: center;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        input[type=&#x27;text&#x27;] &#123;</span><br><span class="line">            width: 530px;</span><br><span class="line">            height: 40px;</span><br><span class="line">            font-size: 14px;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        input[type=&#x27;button&#x27;] &#123;</span><br><span class="line">            width: 100px;</span><br><span class="line">            height: 46px;</span><br><span class="line">            background: #38f;</span><br><span class="line">            border: 0;</span><br><span class="line">            color: #fff;</span><br><span class="line">            font-size: 15px</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .show &#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            width: 535px;</span><br><span class="line">            height: 100px;</span><br><span class="line">            border: 1px solid #999;</span><br><span class="line">            border-top: 0;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div class=&quot;content&quot;&gt;</span><br><span class="line">    &lt;img src=&quot;../img/logo.png&quot; alt=&quot;&quot;&gt;&lt;br/&gt;&lt;br/&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; id=&quot;search&quot; name=&quot;keyword&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;button&quot; value=&quot;Search&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;show&quot; style=&quot;display: none&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    //1.搜索框绑定键盘弹起事件</span><br><span class="line">    $(&#x27;#search&#x27;).keyup(function () &#123;</span><br><span class="line">        //显示div</span><br><span class="line">        $(&#x27;.show&#x27;).show();</span><br><span class="line"></span><br><span class="line">        //2.获取用户输入的值</span><br><span class="line">        console.log($(this).val());</span><br><span class="line">        //判断用户输入的值，JS提供了trim()方法,JQ使用需要转换</span><br><span class="line">        if (this.value.trim().length == 0) &#123;</span><br><span class="line">            return $(&#x27;.show&#x27;).hide();//拦截代码，不再向下执行</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //3.使用post函数发送请求</span><br><span class="line">        let url = &#x27;http://localhost:8080/search&#x27;;</span><br><span class="line">        let data = &#x27;keyword=&#x27; + $(this).val();</span><br><span class="line">        $.post(url, data, function (resp) &#123;</span><br><span class="line">            //清空上次搜索的内容</span><br><span class="line">            $(&#x27;.show&#x27;).empty();</span><br><span class="line">            //4.局部更新</span><br><span class="line">            console.log(resp);</span><br><span class="line">            for (let ele of resp) &#123;</span><br><span class="line">                $(&#x27;.show&#x27;).append(`&lt;div style=&quot;cursor: pointer;</span><br><span class="line">                                        text-align: left;</span><br><span class="line">                                        padding-left: 5px&quot;</span><br><span class="line">                                        onmouseover=&quot;highlight(this)&quot;</span><br><span class="line">                                        onmouseout=&quot;restores(this)&quot;</span><br><span class="line">                                        onclick=&quot;set(this)&quot;&gt;$&#123;ele&#125;&lt;/div&gt;`)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    function highlight(obj) &#123;</span><br><span class="line">        $(obj).css(&#x27;background-color&#x27;, &#x27;#f0f0f0&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function restores(obj) &#123;</span><br><span class="line">        $(obj).css(&#x27;background-color&#x27;, &#x27;white&#x27;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function set(obj) &#123;</span><br><span class="line">        //设置选中文字色</span><br><span class="line">        $(&#x27;#search&#x27;).val($(obj).text()).css(&#x27;color&#x27;,&#x27;brown&#x27;);</span><br><span class="line">        //跳转网址</span><br><span class="line">        location.href = &quot;http://www.baidu.com&quot;;</span><br><span class="line">        // $(&#x27;.show&#x27;).css(&#x27;display&#x27;, &quot;none&quot;);</span><br><span class="line">        $(&#x27;.show&#x27;).hide();</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/10/jQuery-%E5%85%A5%E9%97%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/10/jQuery-%E5%85%A5%E9%97%A8/" class="post-title-link" itemprop="url">jQuery 入门</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-10 01:05:53" itemprop="dateCreated datePublished" datetime="2020-04-10T01:05:53+08:00">2020-04-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.jQuery概述<br>1.1 简介<br>jQuery是一个优秀的javascript的轻量级框架之一，封装了dom操作、事件、页面动画、异步操 作等功能。<br>特别值得一提的是基于jQuery的插件非常丰富，大多数2015年之前的前端业务场景都有其封装好的工具框架。</p>
<p>注意:如果公司使用的老版本插件，升级jQuery之后，可能会让插件失效</p>
<p>库名	说明<br>jQuery-x.js	开发版本:有良好的锁紧格式和注释，方便开发者阅读<br>jQuery-x.min.js	生产版本:代码进行压缩,体积小方便网络传输<br>1.2 自定义JS框架<br>框架(Framework)是完成某种功能的半成品，抽取重复繁琐代码，提高简介强大的方法实现。</p>
<p>感知jQuery的强大</p>
<p>1<br>2<br>3<br>4<br>5<br>&#x2F;&#x2F; 抽取获取id的方法 function jQuery(id) {<br>return document.getElementById(id); }<br>&#x2F;&#x2F; 简化名称方案 function $(id) {<br>return document.getElementById(id); }</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12</p>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="../js/itcast.js"></script>
</head>
<div id="myDiv">AAAAAAAAAA</div>
<script>
    //通过JS原生方式
    // document.getElementById("myDiv").innerHTML = "CCCCCC";

<pre><code>$(&#39;myDiv&#39;).innerHTML = &#39;ZZZZZ&#39;;
</code></pre>
<p></script><br>小结:jQuery本质上就是js的一个类库文件，使用它时，就能简化代码<p></p>
<p>二.jQuery基础语法<br>2.1 HTML引入jQuery<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12</p>
<head>
    <meta charset="UTF-8">
    <title>HTML Intro Jqurey</title>
    <script type="text/javascript" src="../js/jQuery-3.2.1.js"></script>
</head>
<body>
<div id="myDIV">AAAAAAAAAA</div>
<script>
    //获取div标签的js对象
    $('#myDIV').html("XXXXXX");
</script>
</body>
2.2 jQuery与JS区别
jQuery虽然本质也是JS，但是如果使用jQuery的属性和方法那么必须包装对象是jQuery对象而不是js对象。
通过js方式获取的是js对象，通过jQuery方式获取的是jQuery对象，两者关系和区别如下:

<p>jQuery与JS的相互转换<br>js—&gt;jq<br>$(js对象)或者jQuery(js对象)<br>jq—&gt;js<br>js对象[] 或者 jq对象.get(索引)<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30</p>
<head>
    <meta charset="UTF-8">
    <title>Mutual conversion</title>
    <script type="text/javascript" src="../js/jQuery-3.2.1.js"></script>
</head>
<body>
<div id="myDiv">AAAAA</div>
<script>

<pre><code>// 通过js方式修改文本内容
let myDiv=document.getElementById(&#39;myDiv&#39;);
myDiv.innerHTML=&#39;AAAAAAAAA&#39;;

//通过jQuery方式修改文本内容
let $myDiv = $(&#39;#myDiv&#39;);
// $myDiv.html(&#39;XXXXXXXXX&#39;);

//js对象和jQuery对象的 - 属性和方法不通用
// myDiv.html(&#39;js操作jq函数&#39;);
// $myDiv.innerHTML=&#39;jq 操作 js 属性&#39;

//JS对象——转换为JQ对象
$(myDiv).html(&#39;JS convert to JQ&#39;);

//JQ对象——转换为JS对象
//注意:jq对象本质上是js数组，数组的每一个元素就是js原生对象
console.log($myDiv.length);
$myDiv[0].innerHTML=&#39;jQuery convert to JavaScript OB&#39;;
</code></pre>
<p></script><p></p>
</body>
页面加载事件
js
window.onload=function(){}

<p>jq<br>$(function(){})</p>
<p>区别<br>js:只能定义因此，如果定义多次，后加载会进行覆盖<br>jq:可以定义多次</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21</p>
<head>
    <meta charset="UTF-8">
    <title>window onload</title>
    <script type="text/javascript" src="../js/jQuery-3.2.1.js"></script>
</head>
<body>
<script>
    //js页面加载事件
    // window.onload = function () {
    //     alert('js on load');
    // }

<pre><code>//jq页面加载事件
$(function () &#123;
    alert(&#39;jq on load 1&#39;)
&#125;)

$(function () &#123;
    alert(&#39;jq on load 2&#39;)
&#125;)
</code></pre>
<p></script><br>三.jQuery选择器<br>3.1 基本选择器<br>标签(元素)选择器<br>语法:<br>$(“html标签名”) 根据标签匹配元素 格式 标签<br>id选择器<br>语法:<br>$(“#id的属性值”) 根据id值匹配元素 id属性是标签的唯一标志 #id<br>类选择器<br>语法:<br>$(“.class的属性值”) 根据class的值匹配元素 class属性是给标签归类添加样式 格式 .class<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<p></p>
<body>
<span class="female">古力娜扎</span>
<span class="female">迪丽热巴</span>
<span class="female hero">黑寡妇</span>

<p><span class="male hero">钢铁侠</span><br><span class="male hero">超人</span></p>
<script>
    //1.获取span标签的jQuery对象
    console.log($('span'));
    //2.获取class有hero的jQuery对象
    console.log($('.hero'));
    //获得id="boss"的jQuery对象
    console.log($('#boss'));
</script>
</body>
3.2 层级关系选择器
后代选择器
语法:
$(“A B”) 选择A元素内部的所有B元素
并集选择器
语法:
$(“选择器1,选择器2….”) 获取多个选择器选中的所有元素
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
<body>
<div id="kangxi">
    <span>儿子：雍正</span>
    <p>
        <span>孙子：乾隆</span>
    </p>
</div>
<div>牛顿</div>

<script>
    // 1. 获取所有的p,div的文本
    console.log($('p,div').text());
    // 2. 获取div的后代span的文本
    console.log($('#kangxi span').text);
</script>
<p>3.3 属性选择器<br>属性选择器<br>语法:$(“A[属性名&#x3D;’值’]”) 包含指定属性等于指定值的选择器<br>复合属性选择器<br>语法:$(“A[属性名&#x3D;’值’][]…”) 包含多个属性条件的选择器<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12</p>
<body>
<input type="text" name="username" value="用户名"><br>

<p><input type="text" name="nickname" value="昵称"><br></p>
<script>
    // 1.获取type='text'的input标签
    console.log($('input[type="text"]'));
    // 2.获取type='text' 且 name="nickname" 的input标签
    console.log($('input[type="text"][name="nickname"]'));
</script>
</body>
3.4 过滤选择器
首元素选择器
语法: :first 获得选择的元素中的第一个元素
尾元素选择器
语法: :last 获得选择的元素中的最后一个元素
偶数选择器
语法: :even 偶数，从 0 开始计数
奇数选择器
语法: :odd 奇数，从 0 开始计数
指定索引选择器
语法: :eq(index) 指定索引元素
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
<body>
<ul>
    <li>大娃（红娃）</li>
    <li>二娃（橙娃）</li>
    <li>三娃（黄娃）</li>
    <li>四娃（绿娃）</li>
    <li>五娃（青娃）</li>
    <li>六娃（蓝娃）</li>
    <li>七娃（紫娃）</li>
</ul>

<script>
    // 获得所有li标签，在此基础上进行筛选过滤
    // 1.获取第一个元素
    console.log($('li:first').text());
    //获取最后一个元素
    console.log($('li:last').text());

    // 2.获取偶数索引元素
    console.log($('li:even').text());
    // 获取奇数索引元素
    console.log($('li:odd').text());

    // 3.获取指定索引2的元素
    console.log($('li:eq(2)').text());
</script>
<p>3.5 对象遍历<br>语法<br>jq对象.each(function(index,element){<br>})</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33</p>
<body>
<!--
jQuery对象的遍历
    $.each() 用法示例
-->
<ul id="city">
    <li>北京</li>
    <li>上海</li>
    <li>天津</li>
</ul>

<script>
    let lis = document.querySelectorAll('li');

    //普通for
    for(let i=0;i<lis.length;i++){
        console.log(lis[i]);
    }
    //增强for
    for (let li of lis) {
        console.log(li);
    }
    console.log("=========");
    //jQuery的for循环
    $('li').each(function (index,element) {
        console.log(index);
        console.log(element);//遍历的元素是js对象
        console.log(element.innerHTML);
        console.log($(element).html());//升级为jQuery对象
        console.log(this);//当前遍历的元素,相当于element
    })
</script>
</body>
四.jQuery的DOM操作
4.1 jQuery操作内容
text():获取/设置元素的标签体纯文本内容
相当于js: innerText属性
html():获取/设置元素的标签体超文本内容
相当于js: innerHTML属性
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
<body>
<div id="myDiv"><p>天王盖地虎</p></div>
<script>
    // 1.text()操作内容
    //1.1 获得纯文本内容
    console.log($('#myDiv').text());
    //设置纯文本内容
    console.log($('#myDiv').text('<h1>宝塔镇河妖</h1>'));

<pre><code>// 2.html()操作内容
//2.1 获取超文本内容
console.log($(&#39;#myDiv&#39;).html());

//2.2 设置超文本内容
$(&#39;#myDiv&#39;).html($(&#39;#myDiv&#39;).html()+&#39;&lt;h1&gt;宝塔&lt;/h1&gt;&#39;);
</code></pre>
<p></script><p></p>
</body>
4.2 jQuery操作属性
val():获取/设置元素的value属性值
相当于:js对象.value
attr():获取/设置元素的属性
removeAttr() 删除属性
相当于:js对象.setAttribute() / js对象.getAttribute()
prop():获取/设置元素的属性
removeAttr() 删除属性
jq在1.6版本之后，提供另一组API prop 通常处理属性值为布尔类型操作
例如:checked selected等
做条件判断用prop，做属性封装做attr

<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41</p>
<body>
<form action="#" method="get">
    姓名 <input type="text" name="username" id="username" value="德玛西亚"> <br>

<pre><code>爱好
&lt;input id=&quot;hobby&quot; type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;perm&quot; checked=&quot;checked&quot;&gt;烫头&lt;br/&gt;
&lt;input id=&quot;hobby_undefined&quot; type=&quot;checkbox&quot; name=&quot;hobby&quot; value=&quot;perm&quot; &gt;烫头&lt;br/&gt;


&lt;input type=&quot;reset&quot; value=&quot;清空按钮&quot;/&gt;
&lt;input type=&quot;submit&quot; value=&quot;提交按钮&quot;/&gt;&lt;br/&gt;
</code></pre>
</form>

<script>
    // 1.获取文本框value属性
    //方式一:
    console.log($('#username').attr("value"));//查看
    $('#username').attr('value', 'abc');//新增 or 修改
    $('#username').removeAttr('value');//删除

    //方式二:
    console.log($('#username').val());
    $('#username').val('BBC');

    // 2.获取爱好的checked属性
    /*
    方式一:使用attr获取复选框状态
      该按钮选中返回:checked
      未选中返回:undefined
    */
    console.log($('#hobby').attr('checked'));
    console.log($('#hobby_undefined').attr('checked'));

    //方式二:使用val获取复选框状态
    /*
    jq在1.6之后弥补了设计缺陷,如果该属性存在返回true,不存在返回false
    */
    console.log($('#hobby').prop('checked'));
    console.log($('#hobby_undefined').prop('checked'));
</script>
</body>
4.3 jQuery操作样式
直接修改jq对象样式属性
语法:
jq对象.css()
css(样式名) 获取
css(样式名,样式值) 设置
优点:支持css语法
举例:font-size

<p>添加&#x2F;删除jq对象样式<br>语法:<br>jq对象.addClass()<br>jq对象.removeClass()</p>
<p>切换jq对象样式<br>语法:<br>jq对象.toggleClass() 无添加，有删除</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48</p>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="../js/jquery-3.2.1.js"></script>
    <style>
        #p1 {
            background-color: red;
        }

<pre><code>    .mp &#123;
        color: green;
        border: 2px blue;
    &#125;

    .mpp &#123;
        background-color: lightgray;
    &#125;
&lt;/style&gt;
</code></pre>
</head>
<body>
<p id="p1">1. 设置一个css样式</p>
<p id="p2">2. 批量设置css样式</p>
<p id="p3">3. 通过class设置样式</p>
<p id="p4">4.
    <button id="toggle">切换</button>
    class样式
</p>
<script>
    let $p1 = $('#p1');//获取p1
    let $p2 = $('#p2');//获取p2
    let $p3 = $('#p3');//获取p3
    let $p4 = $('#p4');//获取p4

<pre><code>//0.获取单元格标签的背景色
console.log($p1.css(&#39;background-color&#39;));
// 1. 设置一个css样式
$p1.css(&#39;background-color&#39;, &#39;gray&#39;);
// 2. 批量设置css样式
$p2.css(&#123;&#39;border&#39;: &#39;1px solid red&#39;, &#39;font-size&#39;: &#39;20px&#39;&#125;);
// 3. 通过class设置样式
$p3.addClass(&#39;mp mpp&#39;);
$p3.removeClass(&#39;mpp&#39;);

// 4. toggleClass() 切换一个class
$(&#39;#toggle&#39;).click(function () &#123;
    $p4.toggleClass(&#39;mp&#39;) &#125;)
</code></pre>
<p></script></p>
</body>
4.4 jQuery操作元素
$(标签) 创建一个标签
例:
1
$('<li>xxx</li>')
$.prepend() 在父标签中将子标签放在第一个位置
$.append() 在父标签中将子标签放在最后一个位置
$.empty() 清空子元素
$.remove() 删除自己
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
<body>
<ul id="star">
    <li>古力娜扎</li>
    <li>迪丽热巴</li>
</ul>

<script>
    let $star = $('#star'); // 无序列表
    // 1.前面添加马尔扎哈
    console.log($('<li>马尔扎哈</li>'));
    $star.prepend($('<li>马尔扎哈</li>'));

    // 2.后面添加萨瓦迪卡
    $('#star').append($('<li>萨瓦迪卡</li>'));

    // 3.移出所有列表项
    $('#star').empty()
    // 4.删除无序列表
    $star.remove();
</script>
<p>五.jQuery事件绑定<br>js对象.事件属性&#x3D;function(){}<br>jq对象.事件函数(function(){})</p>
<p>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16</p>
<body>
<input type="button" value="js方式" id="jsBtn"> <br>
<input type="button" value="jq方式" id="jqBtn"> <br>

<script>
    //js事件绑定
    document.getElementById('jsBtn').onclick = function () {
        alert('JS Bind Event');
    }

    //jq事件绑定
    $('#jqBtn').click(function () {
        alert('JQ Bind Event');
    })
</script>
</body>
额外拓展
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="../js/jquery-3.2.1.js"></script>
    <style>
        div {
            width: 100px;
            height: 100px;
            background-color: skyblue;
        }
    </style>
</head>
<body>
<div id="div1">

</div>
<script>
    $('#div1').mouseover(function () {
        //可以使用this，但this是js的原生对象，需要升级成jq对象
        $(this).css({'background-color':'pink'});
    }).mouseout(function () {
        $(this).css({'background-color':'skyblue'});
    })
</script>
</body>
六.综合案例
6.1 隔行换色
1
2
3
4
<script>
    $('tr:gt(0):even').css('background-color','lightgray');
    $('tr:gt(0):odd').css('background-color','skyblue');
</script>
6.2 商品全选
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
<script>
    $('#btn1').click(function () {
        $('input[type="checkbox"]').prop('checked', true);
    })

<pre><code>$(&#39;#btn2&#39;).click(function () &#123;
    $(&#39;input[type=&quot;checkbox&quot;]&#39;).each(function (index,element) &#123;
        //js方式
        element.checked = !element.checked;
        //jq方式
        // $(element).prop(&#39;checked&#39;, !$(element).prop(&quot;checked&quot;));
    &#125;)
&#125;)

$(&#39;#btn3&#39;).click(function () &#123;
    $(&#39;input[type=&quot;checkbox&quot;]&#39;).prop(&#39;checked&#39;, false);
&#125;)
</code></pre>
<p></script><br>6.3 QQ表情<br>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<p></p>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <meta charset="UTF-8">
    <title>QQ表情选择</title>
    <style type="text/css">
        *{margin: 0;padding: 0;list-style: none;}

<pre><code>    .emoji&#123;margin:50px;&#125;
    ul&#123;overflow: hidden;&#125;
    li&#123;float: left;width: 48px;height: 48px;cursor: pointer;&#125;
    .emoji img&#123; cursor: pointer; &#125;
&lt;/style&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;../js/jquery-3.2.1.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
</head>
<body>
<div class="emoji">
    <ul>
        <li><img src="../img/01.gif" height="22" width="22" alt=""/></li>
        <li><img src="../img/02.gif" height="22" width="22" alt=""/></li>
        <li><img src="../img/03.gif" height="22" width="22" alt=""/></li>
        <li><img src="../img/04.gif" height="22" width="22" alt=""/></li>
        <li><img src="../img/05.gif" height="22" width="22" alt=""/></li>
        <li><img src="../img/06.gif" height="22" width="22" alt=""/></li>
        <li><img src="../img/07.gif" height="22" width="22" alt=""/></li>
        <li><img src="../img/08.gif" height="22" width="22" alt=""/></li>
        <li><img src="../img/09.gif" height="22" width="22" alt=""/></li>
        <li><img src="../img/10.gif" height="22" width="22" alt=""/></li>
        <li><img src="../img/11.gif" height="22" width="22" alt=""/></li>
        <li><img src="../img/12.gif" height="22" width="22" alt=""/></li>
    </ul>
    <p id="word">
        <strong>请发言：</strong><!-- 给文本加粗 -->
        <img src="../img/12.gif" height="22" width="22" alt=""/>
    </p>
</div>

<script>
    //给所有图片绑定点击事件
    $('.emoji img').click(function () {
        //this表示当前image标签
        $('#word').append($(this).clone());
    })
</script>
</body>

<p>总结:<br>Jquery概述<br>jQuery是一个优秀的javascript的轻量级框架<br>Jquery基础语法<br>HTML引入Jquery<br>jQuery与JS区别<br>jQuery对象与js对象相互转换</p>
<p>$(js对象) 或 jQuery(js对象)<br>jq对象(索引) 或 jq对象.get(索引)<br>页面加载事件</p>
<p>window.onload&#x3D;function(){}</p>
<p>只能定义一次<br>$(function(){})</p>
<p>可以定义多次<br>Jquery选择器<br>1 基本选择器<br>$(“html标签名”)<br>$(“#id的属性值”)<br>$(“.class的属性值”)<br>2 层级选择器<br>$(“A B”)<br>$(“选择器1,选择器2….”)<br>$(“A &gt; B”)<br>3 属性选择器<br>$(“A[属性名&#x3D;’值’]”)<br>$(“A[属性名&#x3D;’值’][]…”)<br>4 基本过滤选择器<br>:first<br>:last<br>:even<br>:odd<br>:eq(index)<br>5 对象遍历<br>jq对象.each(function(index,element){})<br>Jquery的DOM操作<br>Jquery操作内容<br>html()</p>
<p>超文本<br>text()</p>
<p>纯文本<br>Jquery操作属性<br>val()</p>
<p>操作value属性<br>attr()</p>
<p>removeAttr()<br>prop()</p>
<p>removeProp()</p>
<p>checked<br>selected<br>Jquery操作样式<br>jq对象.css()</p>
<p>jq对象.addClass()</p>
<p>jq对象.removeClass()<br>Jquery操作元素<br>$(““)</p>
<p>创建jq标签对象<br>prepend()</p>
<p>父添加子，放在一个位置<br>append()</p>
<p>父添加子，放在最后一个<br>remove()</p>
<p>灭门<br>empty()</p>
<p>断子绝孙脚<br>Jquery事件绑定<br>js对象.事件属性&#x3D;function(){}<br>jq对象.事件函数(function(){})<br>综合案例<br>隔行换色<br>商品全选<br>QQ表情</p>
</style></head></body></body></body>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://swzxsyh.github.io/2020/04/09/JavaScript-%E8%BF%9B%E9%98%B6%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="swzxsyh">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="swzxsyh">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/09/JavaScript-%E8%BF%9B%E9%98%B6%E7%AC%94%E8%AE%B0/" class="post-title-link" itemprop="url">JavaScript 进阶笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-09 01:05:20" itemprop="dateCreated datePublished" datetime="2020-04-09T01:05:20+08:00">2020-04-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-08-10 04:40:38" itemprop="dateModified" datetime="2022-08-10T04:40:38+08:00">2022-08-10</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>一.BOM对象<br>1.1 BOM简介<br>浏览器对象模型(Browser Object Model)<br>作用:把浏览器抽象成一个对象模型,可以使用JS模拟一些浏览器功能<br>1.2 Window对象<br>三种弹框<br>警告框:提示信息<br>alert()<br>确认框:确认信息<br>confirm()<br>输入框:输入信息<br>prompt()</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">//警告框:提示信息</span></span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;Hello&quot;</span>)</span><br><span class="line"><span class="comment">//确认框:确认信息</span></span><br><span class="line"><span class="keyword">let</span> result = <span class="title function_">confirm</span>(<span class="string">&quot;Sure to Delete?Y/N&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> (result == <span class="literal">true</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Y&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;N&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//输入框:输入信息</span></span><br><span class="line"><span class="keyword">let</span> age = <span class="title function_">prompt</span>(<span class="string">&quot;Please Input Your Age&quot;</span>);</span><br><span class="line"><span class="keyword">if</span> (age != <span class="literal">null</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Please Input Age&quot;</span>,<span class="string">`<span class="subst">$&#123;age&#125;</span>`</span>)</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Canceled&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>二种定时器</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">JS两个定时器</span></span><br><span class="line"><span class="comment">1)一次性定时器</span></span><br><span class="line"><span class="comment">创建:let 定时器对象 = setTimeout(`函数()`,毫秒)</span></span><br><span class="line"><span class="comment">关闭:clearTimeout(定时器对象)</span></span><br><span class="line"><span class="comment">2)循环型定时器</span></span><br><span class="line"><span class="comment">创建:    let 定时器对象 = setInterval(函数,毫秒)</span></span><br><span class="line"><span class="comment">关闭:clearInterval()</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span>&gt;</span>Cancel Print Time<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn2&quot;</span>&gt;</span>Cancel Print Number<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.定时1s在控制台打印当前时间</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">fun1</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toLocaleString</span>());</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> timeout = <span class="built_in">setTimeout</span>(<span class="string">`fun1()`</span>, <span class="number">1000</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2.点击按钮取消打印时间</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn1&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">clearTimeout</span>(timeout);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//3.每隔2秒在控制台打印递增自然数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> num = <span class="number">1</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">fun2</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(num++);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> interval = <span class="built_in">setInterval</span>(fun2, <span class="number">2000</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//4.点击按钮取消打印自然数</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn2&#x27;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="built_in">clearInterval</span>(interval);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>1.3 Location对象</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">location地址</span></span><br><span class="line"><span class="comment">1)获取当前窗口地址</span></span><br><span class="line"><span class="comment">location.href</span></span><br><span class="line"><span class="comment">2)刷新当前页面</span></span><br><span class="line"><span class="comment">location.reload</span></span><br><span class="line"><span class="comment">3)跳转页面</span></span><br><span class="line"><span class="comment">location.href=&#x27;new location&#x27;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;addr()&quot;</span>&gt;</span>获取当前浏览器地址<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;refresh()&quot;</span>&gt;</span>刷新当前页面<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;jump()&quot;</span>&gt;</span>跳转页面(重点)<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">addr</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="property">href</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">refresh</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="title function_">reload</span>());</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">jump</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">console</span>.<span class="title function_">log</span>(location.<span class="property">href</span> = <span class="string">&#x27;https://www.baidu.com/&#x27;</span>);;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>二.DOM对象<br>2.1 DOM简介<br>DOM(Document Object Model) 页面文档对象模型<br>JS把页面抽象成为一个对象,允许我们使用js来操作页面</p>
<p>2.2 DOM获取元素<br>第一种:es6之前的获取方式<br>1)获取一个:<br>document.getElementById(id属性值)<br>2)获取多个:<br>document.getElementByTagName(标签名属性值) 根据标签名获取，返回数组对象<br>document.getElementByClassName(class属性值) 根据class属性获取，返回数组对象<br>document.getElementByName(name属性值) 根据name属性获取，返回数组对象<br>第二种:es6可根据CSS选择器获取<br>1)获取一个:<br>document.querySelector(id选择器)<br>2)获取多个:<br>document.querySelectorAll(css选择器)<br>标签<br>class<br>属性<br>后代<br>并集<br>父子<br>…</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="comment">//1.获取id=&quot;name&quot;对象</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;name&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;name&#x27;</span>));</span><br><span class="line"><span class="comment">//2.获取class=&quot;radio&quot;的标签数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementsByClassName</span>(<span class="string">&#x27;radio&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;radio&#x27;</span>));</span><br><span class="line"><span class="comment">//3.获取所有option标签对象数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&#x27;option&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;option&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//4.获取name=&quot;hobby&quot;的input标签对象数组</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">getElementsByName</span>(<span class="string">&#x27;hobby&#x27;</span>));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;input[name=&quot;hobby&quot;]&#x27;</span>));<span class="comment">//CSS的属性选择器</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//5.获取文件上传选择框</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;form input[type=&quot;file&quot;]&#x27;</span>));</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2.3 DOM操作内容<br>获取或修改元素(标签)的纯文本内容<br>语法:<br>element.innerText<br>获取或者修改元素的html内容<br>element.innerHTML;<br>获取或者修改包含自身的html内容<br>element.outerHTML;<br>总结:</p>
<p>innerText 获取的是纯文本 innerHTML获取的是所有html内容<br>innerText 设置到页面中的是纯文本 innerHTML设置到页面中的html会展示出外观效果<br>innerHTML不包含自身 outerHTML包含自身的html内容</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#myDiv</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">border</span>: <span class="number">1px</span> solid red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;myDiv&quot;</span>&gt;</span>AAA<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> myDIV = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myDiv&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.innetText操作div内容</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.1获取纯文本</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(myDIV.<span class="property">innerText</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.2 获取纯文本,无法更改标签等属性</span></span></span><br><span class="line"><span class="language-javascript">    myDIV.<span class="property">innerText</span> = <span class="string">&quot;BBBBB&quot;</span>;<span class="comment">//覆盖</span></span></span><br><span class="line"><span class="language-javascript">    myDIV.<span class="property">innerText</span> += <span class="string">&quot;BBBBB&quot;</span>;<span class="comment">//追加</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2.innerHTML操作div内容</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2.1 获取超文本内容</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(myDIV.<span class="property">innerHTML</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2.2 设置超文本,可以更改标签等属性</span></span></span><br><span class="line"><span class="language-javascript">    myDIV.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;h1&gt;CCCCCC&lt;/h1&gt;&#x27;</span><span class="comment">//覆盖</span></span></span><br><span class="line"><span class="language-javascript">    myDIV.<span class="property">innerHTML</span> += <span class="string">&#x27;&lt;h1&gt;CCCCCC&lt;/h1&gt;&#x27;</span><span class="comment">//追加</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//3.outerHTML操作div</span></span></span><br><span class="line"><span class="language-javascript">    myDIV.<span class="property">outerHTML</span>=<span class="string">&#x27;&lt;p&gt;DDDDDDDD&lt;/p&gt;&#x27;</span><span class="comment">//不仅可以修改纯文本，还能修改标签</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.4 DOM操作属性<br>获取文本框的值,单选框或复选框的选中状态<br>语法:<br>element.properties 获取或者修改元素对象的原生属性<br>给元素设置自定义属性<br>语法:<br>element.setAttribute(属性名,属性值) 给元素设置一个属性值,可以设置原生和自定义<br>获取元素的自定义属性值<br>语法:<br>element.getAttribute(属性名) 获取元素的一个属性值,可以获取原生和自定义<br>移除元素的自定义属性<br>语法:<br>element.removeAttribute(属性名)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;#&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    Name: <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;AAAAA&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    Hobby:</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;smoke&quot;</span>&gt;</span>X</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;drink&quot;</span>&gt;</span>Y</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">name</span>=<span class="string">&quot;hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;perm&quot;</span>&gt;</span>Z<span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;清空按钮&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;提交按钮&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.获取文本框预定义的属性值</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> username = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;username&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(username);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(username.<span class="property">type</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(username.<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(username.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2.给文本框设置自定义属性</span></span></span><br><span class="line"><span class="language-javascript">    username.<span class="title function_">setAttribute</span>(<span class="string">&#x27;customize&#x27;</span>, <span class="string">&#x27;customize properties&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//3.获取文本框自定义属性</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(username.<span class="title function_">getAttribute</span>(<span class="string">&#x27;customize&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//4.移除文本框自定义属性</span></span></span><br><span class="line"><span class="language-javascript">    username.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;customize&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    username.<span class="title function_">removeAttribute</span>(<span class="string">&#x27;value&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>2.5 DOM操作样式<br>设置一个css样式<br>语法:<br>element.style.样式名&#x3D;’样式值’ 获取或者修改一个css样式<br>特点:<br>驼峰格式样式属性名<br>css格式:font-size<br>js格式:fontSize</p>
<p>批量设置css样式<br>语法:<br>element.style.cssText 获取后者修改 标签的style属性的文本值<br>特点:有耦合性，无提示较麻烦</p>
<p>通过class设置样式<br>语法:<br>element.className&#x3D;’class选择器名’ 获取或者修改标签的class属性的文本值</p>
<p>切换class样式<br>语法:<br>element.classList es6特别提供的操作元素class的接口<br>常用方法有四个:<br>add() 添加一个class样式<br>remove() 移除一个class样式<br>contains() 判断是否包含某一个样式<br>toggle() 切换一个class样式 有则删除,无则添加</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-id">#p1</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: red;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.mp</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">color</span>: green;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-size</span>: <span class="number">30px</span>;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">font-family</span>: <span class="string">&quot;Cascadia Code&quot;</span>;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.mpp</span> &#123;</span></span><br><span class="line"><span class="language-css">      <span class="attribute">background-color</span>: lightgray;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">  </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p1&quot;</span>&gt;</span>Set One CSS Style<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p2&quot;</span>&gt;</span>Set CSS Style<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">&quot;p3&quot;</span>&gt;</span>Set CSS Style By Class<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> p1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;p1&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> p2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;p2&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> p3 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;p3&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.设置一个css样式</span></span></span><br><span class="line"><span class="language-javascript">    p1.<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;black&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    p1.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;white&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//2.批量设置css样式</span></span></span><br><span class="line"><span class="language-javascript">    p2.<span class="property">style</span>.<span class="property">cssText</span> = <span class="string">&#x27;border:1px solid red;font-size:20px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//3.通过class设置样式</span></span></span><br><span class="line"><span class="language-javascript">    p3.<span class="property">className</span> = <span class="string">&#x27;mp mpp&#x27;</span>;<span class="comment">//注意不要添加&#x27;.&#x27;符号,可以添加多个组</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>2.6 DOM操作元素<br>创建一个标签对象<br>语法:<br>innerHTML 获取或者设置标签的html内容<br>父标签添加子标签<br>语法:<br>document.createElement(标签名称) 创建一个标签对象<br>parentNode.appendChild(newNode) 给父标签添加一个子标签<br>移除元素<br>outerHTML</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;name&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>A<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>B<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//添加一个心列表</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//方式一</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;name&quot;</span>).<span class="property">innerHTML</span> += <span class="string">&#x27;&lt;li&gt;C&lt;/li&gt;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//方式二</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.1 创建li标签</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;li&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    li.<span class="property">innerText</span> = <span class="string">&#x27;All&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(li);</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.2 父标签添加子标签</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;name&#x27;</span>).<span class="title function_">appendChild</span>(li);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>


<p>三.正则表达式<br>作用:根据定义好的规则，过滤文本内容</p>
<p>在js中使用正则表达式<br>创建方式<br>1)let reg1 &#x3D; new RegExp(‘正则表达式字符串’);<br>2)let reg1 &#x3D; &#x2F;正则表达式&#x2F;;<br>验证方法<br>1)正则对象.test(字符串)<br>符号正则规则就返回true，否则false<br>2)字符串对象.match(正则对象)<br>返回字符串中符号正则规则的内容</p>
<p>正则表达式修饰符<br>i忽略大小写 g全局匹配 m 多行匹配</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//1.创建正则对象</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> reg1 = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&#x27;\\d+&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reg1.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reg1.<span class="title function_">test</span>(<span class="string">&#x27;123&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> reg2 = <span class="regexp">/\d+/</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reg2.<span class="title function_">test</span>(<span class="string">&#x27;abc&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reg2.<span class="title function_">test</span>(<span class="string">&#x27;123&#x27;</span>));</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//验证方法</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;a1&quot;</span>.<span class="title function_">match</span>(reg2));<span class="comment">//表示获取字符串符号正则规则的部分</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//正则表达式修饰符</span></span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//i忽略大小写  g全局匹配 m 多行匹配</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> regi = <span class="regexp">/[]amn]/i</span>;<span class="comment">//不区分大小写匹配amn ignore忽略大小写</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> resi = <span class="string">&#x27;ABC&#x27;</span>.<span class="title function_">match</span>(regi);<span class="comment">//从ABC中匹配regi模式字符串</span></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(resi);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> regg = <span class="regexp">/\d/g</span>;<span class="comment">//全局查找数组 global 全局</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> resg = <span class="string">&quot;1 plus 2 equels 3&quot;</span>.<span class="title function_">match</span>(regg);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(resg);</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> regm = <span class="regexp">/^\d/m</span>;<span class="comment">//多行匹配开头的数字(^限定开始 $限定结束) ，multipart</span></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> resm = <span class="string">&quot;abc1 plus 2 equals 3\n6abcmnk&quot;</span>.<span class="title function_">match</span>(regm);</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(resm);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>四.综合案例<br>4.1 表单校验</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.两次密码输入一致</span></span><br><span class="line"><span class="comment">//2.获取密码框和确认密码框的js对象</span></span><br><span class="line"><span class="keyword">let</span></span><br><span class="line">pwd1 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pwd1&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> pwd2 = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pwd2&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.2 校验密码是否一致的方法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkPwd</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> boo = pwd1.<span class="property">value</span> == pwd2.<span class="property">value</span>;</span><br><span class="line">  <span class="keyword">if</span> (boo == <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pwdwarn&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;pwdwarn&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;inline&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> boo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.3 给确认密码框绑定失去焦点时间</span></span><br><span class="line">pwd2.<span class="property">onblur</span> = checkPwd;<span class="comment">//不能加括号()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.邮箱格式正确</span></span><br><span class="line"><span class="comment">//2.1 定义邮箱正则表达式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//2.2 获取邮箱的js对象</span></span><br><span class="line"><span class="keyword">let</span> email = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;email&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> emailReg = <span class="regexp">/\w+([-+.&#x27;]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.3 定义校验函数(方法)</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkEmail</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> boo = emailReg.<span class="title function_">test</span>(email.<span class="property">value</span>);</span><br><span class="line">  <span class="keyword">if</span> (boo == <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;emailwarn&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;emailwarn&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;inline&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> boo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.4 给邮箱绑定失去焦点事件</span></span><br><span class="line">email.<span class="property">onblur</span> = checkEmail;</span><br><span class="line"></span><br><span class="line"><span class="comment">//3.手机号格式正确</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> phone = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;phone&#x27;</span>);</span><br><span class="line"><span class="keyword">let</span> phoneReg = <span class="regexp">/^((0\d&#123;2,3&#125;-\d&#123;7,8&#125;)|(1[3584]\d&#123;9&#125;))$/</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">checkPhone</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> boo = phoneReg.<span class="title function_">test</span>(phone.<span class="property">value</span>);</span><br><span class="line">  <span class="keyword">if</span> (boo == <span class="literal">true</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;phonewarn&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;phonewarn&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;inline&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> boo;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">phone.<span class="property">onblur</span> = checkPhone;</span><br><span class="line"></span><br><span class="line"><span class="comment">//表单提交时进行校验 一定触发onsubmit()事件</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;myForm&#x27;</span>).<span class="property">onsubmit</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">checkPwd</span>() &amp;&amp; <span class="title function_">checkEmail</span>() &amp;&amp; <span class="title function_">checkPhone</span>()) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;Successful&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;Something Wrong&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>点我展开html和css<br>4.2 商品全选</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span>&gt;</span>1.全选<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn2&quot;</span>&gt;</span>2.反选<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn3&quot;</span>&gt;</span>3.全部取消<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span>Computer</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span>Phone</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span>Car</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span>House</span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">checked</span>=<span class="string">&quot;true&quot;</span>&gt;</span>NoteBook</span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> boxs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;input[type=&quot;checkbox&quot;]&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn1&#x27;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> box <span class="keyword">of</span> boxs) &#123;</span></span><br><span class="line"><span class="language-javascript">        box.<span class="property">checked</span>=<span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn2&#x27;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> box <span class="keyword">of</span> boxs) &#123;</span></span><br><span class="line"><span class="language-javascript">        box.<span class="property">checked</span>=!box.<span class="property">checked</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;btn3&#x27;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">for</span> (<span class="keyword">let</span> box <span class="keyword">of</span> boxs) &#123;</span></span><br><span class="line"><span class="language-javascript">        box.<span class="property">checked</span>=<span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>4.3 省市联动</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = <span class="keyword">new</span> <span class="title class_">Array</span>();</span><br><span class="line">data[<span class="string">&#x27;A&#x27;</span>] = [<span class="string">&#x27;A1&#x27;</span>, <span class="string">&#x27;A2&#x27;</span>, <span class="string">&#x27;A3&#x27;</span>];</span><br><span class="line">data[<span class="string">&#x27;B&#x27;</span>] = [<span class="string">&#x27;B1&#x27;</span>, <span class="string">&#x27;B2&#x27;</span>, <span class="string">&#x27;B3&#x27;</span>];</span><br><span class="line">data[<span class="string">&#x27;C&#x27;</span>] = [<span class="string">&#x27;C1&#x27;</span>, <span class="string">&#x27;C2&#x27;</span>, <span class="string">&#x27;C3&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> provinceID = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;provinceId&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> cityID = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;cityId&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//1.页面加载成功后，初始化省份数据</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">in</span> data) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(index);</span><br><span class="line">    provinceId.<span class="property">innerHTML</span> +=<span class="string">`&lt;option value=&quot;<span class="subst">$&#123;index&#125;</span>&quot;&gt;<span class="subst">$&#123;index&#125;</span>&lt;/option&gt;`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.给省份下拉框绑定onchange事件</span></span><br><span class="line">provinceId.<span class="property">onchange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">value</span>);<span class="comment">//当前用户选中的value值,它就是二维数组的索引</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data[<span class="variable language_">this</span>.<span class="property">value</span>]);</span><br><span class="line">  <span class="comment">//3.城市列表</span></span><br><span class="line">  cityId.<span class="property">innerHTML</span> = <span class="string">&#x27;&lt;option value=&quot;&quot;&gt;----请-选-择-市----&lt;/option&gt;&#x27;</span>;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">value</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data[<span class="variable language_">this</span>.<span class="property">value</span>]);</span><br><span class="line">  <span class="keyword">let</span> citys = data[<span class="variable language_">this</span>.<span class="property">value</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> city <span class="keyword">of</span> citys) &#123;</span><br><span class="line">    cityId.<span class="property">innerHTML</span> += <span class="string">`&lt;option value=&quot;<span class="subst">$&#123;city&#125;</span>&quot;&gt;<span class="subst">$&#123;city&#125;</span>&lt;/option&gt;`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.4 隔行换色</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> oldColor;</span><br><span class="line"><span class="comment">//获取所有数组对象</span></span><br><span class="line"><span class="keyword">let</span> trs = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;table tr&#x27;</span>);<span class="comment">//注意:这里使用的是后代选择器,这里是js的一个小坑</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; trs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;<span class="comment">//偶数索引,奇数行</span></span><br><span class="line">    trs[i].<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;lightgray&#x27;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;<span class="comment">//奇数索引，偶数行</span></span><br><span class="line">    trs[i].<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;skyblue&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  trs[i].<span class="property">onmouseover</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;<span class="comment">//鼠标移入某一行</span></span><br><span class="line">    <span class="comment">//获取当前行的颜色</span></span><br><span class="line">    oldColor=trs[i].<span class="property">style</span>.<span class="property">backgroundColor</span>;</span><br><span class="line">    trs[i].<span class="property">style</span>.<span class="property">backgroundColor</span> = <span class="string">&#x27;brown&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  trs[i].<span class="property">onmouseout</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;<span class="comment">//鼠标移出某一行</span></span><br><span class="line">    trs[i].<span class="property">style</span>.<span class="property">backgroundColor</span>=oldColor;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> tds = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;table td&#x27;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; tds.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  tds[i].<span class="property">onmouseover</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    tds[i].<span class="property">style</span>.<span class="property">backgroundColor</span>=<span class="string">&#x27;Green&#x27;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  tds[i].<span class="property">onmouseout</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;<span class="comment">//鼠标移出某一行</span></span><br><span class="line">    tds[i].<span class="property">style</span>.<span class="property">backgroundColor</span>=oldColor;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4.5 拓展:为什么不用var<br>ES6之前作用域为全局，容易导致变量有值被新值替代，局部变量使用let可以自动销毁，推荐let</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// for循环举例：var声明变量全局作用域、let声明变量是局部作用域</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;h3&gt;我是var修饰遍历的内容&lt;/h3&gt;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(i);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">write</span>(<span class="string">&#x27;&lt;h3&gt;我是let修饰遍历的内容&lt;/h3&gt;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// console.log(j);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">let</span> b = <span class="number">5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 可以取到</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// 不能取到</span></span><br></pre></td></tr></table></figure>



<p>总结:<br>BOM对象<br>简介<br>浏览器对象模型<br>Window对象<br>三种弹框</p>
<p>alert()<br>confim()<br>prompt()<br>二种定时器</p>
<p>setTimeout(函数,毫秒)</p>
<p>clearTimeout(定时器)<br>setInterval(函数,毫秒)</p>
<p>clearInterval(定时器)<br>Location对象<br>reload()</p>
<p>href</p>
<p>跳转页面<br>DOM对象<br>简介<br>文档对象模型<br>获取元素<br>ES5</p>
<p>getElementById(id属性值)<br>ES6</p>
<p>querySelector(CSS选择器)<br>querySelectorAll(CSS选择器)<br>操作内容<br>innerText<br>innerHTML<br>操作属性<br>js对象.属性名</p>
<p>原生属性<br>操作样式<br>js对象.style.样式名(驼峰格式)<br>js对象.style.cssText<br>js对象.className<br>操作元素<br>添加元素</p>
<p>js对象.innerHTML +&#x3D;追加内容</p>
<p>document.createjs对象(标签)</p>
<p>parentNode.appendChild(newNode)<br>正则表达式<br>创建<br>let rege &#x3D; new RegExp(“正则表达式”);<br>let regex &#x3D; &#x2F;正则表达式&#x2F;;<br>验证方法<br>正则对象.test(字符串)<br>综合案例<br>表单校验<br>发挥大家的想象力<br>商品全选<br>省市联动<br>隔行换色</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/14/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/16/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">swzxsyh</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">200</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/swzxsyh" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;swzxsyh" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/swzxsyh" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;swzxsyh" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fa fa-rss fa-fw"></i>RSS</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">swzxsyh</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
