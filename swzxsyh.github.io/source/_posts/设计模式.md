---
title: 设计模式
date: 2021-02-17 00:17:37
tags:
---

GOF23
创建型模式：
单例模式、工厂模式，抽象工厂模式，建造者模式，原型模式
结构型模式
从程序的结构上实现松耦合，从而扩大整体的类结构，用来解决更大的问题
适配器模式，桥接模式，装饰模式，组合模式，外观模式，享元模式，代理模式
行为型模式
模版方法模式，命令模式，迭代器模式，观察者模式，中介者模式，备忘录模式，解释器模式，状态模式，策略模式，职责链模式，访问者模式
OOP七大原则
开闭原则：对扩展开放，对修改关闭
里氏替换原则：继承必须确保超类所拥有的性质在子类中仍成立
依赖倒置原则：要面向接口编程，不要面向对象编程
单一职责原则：控制类的粒度大小，将对象解耦，提高其内聚性
接口隔离原则：要为各个类建立它们需要的专用接口
迪米特法则：只与直接朋友交谈，不跟“陌生人”说话
合成复用原则：尽量先使用组合或聚合等关联关系来实现，其次才考虑使用继承关系来实现
单例模式
核心作用
保证一个类只有一个实例，并且提供一个访问该实例的全局访问点
工厂模式
作用：
实现了创建者和调用者的分离
详细分类：
简单工厂模式（静态工厂模式）
用来生产统一等级结构中的任意产品（对于新产品，需要修改代码）
工厂方法模式
不修改已有类的情况下，通过增加新的工厂类实现扩展（支持增加任意产品）
抽象工厂模式
围绕一个超级工厂创建其他工厂。该超级工厂是其他工厂的生产工厂。不可增加产品，可以增加类型
OOP七大原则
开闭原则：对扩展开放，对修改关闭
依赖倒置原则：要面向接口编程，不要针对实现编程
迪米特法则：只与直接朋友交谈，避免跟陌生人通信
核心本质
实例化对象不使用new，用工厂方法代替
将选择实现类，创建对象统一管理和控制。从而将调用者与实现类解耦
场景：
JDK8-Calendar的getInstance
JDBC的Connection
Spring的IOC创建管理bean对象
反正Class对象的newInstance方法
抽象工厂模式
定义：
抽象工厂模式提供了一个创建一系列相关或相互依赖对象的接口，无需指定它们的类
场景：
应用层不依赖产品实现细节
同类对象一起创建对象时大量的重复代码
提供一个类库，所有的产品以同样的接口出现，使得应用不依赖于具体的实现
优点：
具体产品在应用层的代码隔离，无需关系创建细节
将一个系列的产品统一到一起创建
缺点：
规定了所有可能被创建的产品集合，产品簇中扩展新的产品困难
增加了系统的抽象性和理解难度
建造者模式
该模式提供了一种创建对象的最佳方式
定义：
将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示
作用：
在用户不知道对象的建造过程和细节情况下，就可以直接创建复杂的对象。
用户只需要给出复杂对象的类型和内容，建造者模式负责按顺序创建复杂对象。
场景：
需要生成的产品有复杂的内部结构，同时这些产品有共性
隔离复杂对象的创建和使用，使相同创建过程可以创建不同产品
适合具有较多属性的对象的创建过程
优点：
产品的建造和表示分离，实现了解耦。使用建造者模式可以使应用不必知道实现细节
将复杂的产品创建步骤分解在不同的方法中，使创建过程更清晰
具体的建造者类之间是相互独立的，有利于系统拓展。增加新建造者不需改变原有类库，符合开闭原则
缺点：
建造者模式创建的产品一般具有较多共同点，其组成部分相似。如果产品之间差异性大，则不适合该模式
如果产品内部变化复杂，可能需要定义很多具体建造者类来实现这种变化，会让系统变得很庞大
建造者模式与抽象工厂模式比较：
与抽象工厂模式相比，建造者模式返回一个完整的对象。而抽象工厂模式返回一系列对象，这些对象定位不同，构成了一个产品族
抽象工厂模式中，应用实例化工厂类，然后调用工厂方法获取所需产品对象。在建造者模式中，应用可以不直接调用建造者的相关方法，通过指挥者来指导如何生成对象，包括对象的内部细节，它侧重于一步步构造一个复杂对象，返回一个完整的对象
原型模式
适配器模式
定义：
将一个类的接口转换成客户希望的另一个接口。Adapter模式使原本接口不兼容不能一起工作的类能一起工作。
角色分析：
目标接口：客户所期待的接口，目标可以是具体的或抽象的类，也可以是接口
需要适配的类：需要适配的类货适配者类
适配器：通过包装一个需要适配的对象，把原接口转换成目标对象。
优点：
一个对象的适配器可以把多个不同的适配者适配到同一个目标。
可以适配一个适配者的字类，由于适配器和适配者之间是相互关联，根据“里氏替换原则”，适配者的字类也可以通过该适配器进行适配
缺点：
对于不支持多重类继承的语言，一次最多适配一个适配者类，不能适配多个适配者
在Java等语言中，类适配器模式中的目标抽象类只能为接口，不能为类，使用其有一定局限性。
适用场景：
系统需要使用一些现有的类，而这些类的接口（如方法名）不符合系统需要，深圳没有这些类的源码
想创建一个可以重复使用的类，用于与一些彼此之间没有太大关联的一些类，包括一些可能在将来引进的类一起工作。
桥接模式
定义：
桥接模式是将抽象部分与它的实现部分分离，使它们都可以独立变化。它是一种对象结构型模式，又称为柄体（Handle and Body）模式或接口（interface）模式
装饰模式
组合模式
外观模式
享元模式
代理模式
模版方法模式
命令模式
迭代器模式
观察者模式
中介者模式
备忘录模式
解释器模式
状态模式
策略模式
职责链模式
访问者模式